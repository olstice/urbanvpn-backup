(()=>{var k={7452:k=>{var E=function(k){"use strict";var E,D=Object.prototype,r=D.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},x=n.iterator||"@@iterator",L=n.asyncIterator||"@@asyncIterator",Q=n.toStringTag||"@@toStringTag";function M(k,E,D){return Object.defineProperty(k,E,{value:D,enumerable:!0,configurable:!0,writable:!0}),k[E]}try{M({},"")}catch(k){M=function(k,E,D){return k[E]=D}}function A(k,E,D,r){var n=E&&E.prototype instanceof h?E:h,x=Object.create(n.prototype),L=new i(r||[]);return x._invoke=function(k,E,D){var r=s;return function(n,x){if(r===m)throw new Error("Generator is already running");if(r===B){if("throw"===n)throw x;return R()}for(D.method=n,D.arg=x;;){var L=D.delegate;if(L){var Q=N(L,D);if(Q){if(Q===X)continue;return Q}}if("next"===D.method)D.sent=D._sent=D.arg;else if("throw"===D.method){if(r===s)throw r=B,D.arg;D.dispatchException(D.arg)}else"return"===D.method&&D.abrupt("return",D.arg);r=m;var M=T(k,E,D);if("normal"===M.type){if(r=D.done?B:O,M.arg===X)continue;return{value:M.arg,done:D.done}}"throw"===M.type&&(r=B,D.method="throw",D.arg=M.arg)}}}(k,D,L),x}function T(k,E,D){try{return{type:"normal",arg:k.call(E,D)}}catch(k){return{type:"throw",arg:k}}}k.wrap=A;var s="suspendedStart",O="suspendedYield",m="executing",B="completed",X={};function h(){}function y(){}function Y(){}var J={};M(J,x,(function(){return this}));var f=Object.getPrototypeOf,a=f&&f(f(j([])));a&&a!==D&&r.call(a,x)&&(J=a);var H=Y.prototype=h.prototype=Object.create(J);function w(k){["next","throw","return"].forEach((function(E){M(k,E,(function(k){return this._invoke(E,k)}))}))}function b(k,E){function D(n,x,L,Q){var M=T(k[n],k,x);if("throw"!==M.type){var A=M.arg,s=A.value;return s&&"object"==typeof s&&r.call(s,"__await")?E.resolve(s.__await).then((function(k){D("next",k,L,Q)}),(function(k){D("throw",k,L,Q)})):E.resolve(s).then((function(k){A.value=k,L(A)}),(function(k){return D("throw",k,L,Q)}))}Q(M.arg)}var n;this._invoke=function(k,r){function x(){return new E((function(E,n){D(k,r,E,n)}))}return n=n?n.then(x,x):x()}}function N(k,D){var r=k.iterator[D.method];if(r===E){if(D.delegate=null,"throw"===D.method){if(k.iterator.return&&(D.method="return",D.arg=E,N(k,D),"throw"===D.method))return X;D.method="throw",D.arg=new TypeError("The iterator does not provide a 'throw' method")}return X}var n=T(r,k.iterator,D.arg);if("throw"===n.type)return D.method="throw",D.arg=n.arg,D.delegate=null,X;var x=n.arg;return x?x.done?(D[k.resultName]=x.value,D.next=k.nextLoc,"return"!==D.method&&(D.method="next",D.arg=E),D.delegate=null,X):x:(D.method="throw",D.arg=new TypeError("iterator result is not an object"),D.delegate=null,X)}function K(k){var E={tryLoc:k[0]};1 in k&&(E.catchLoc=k[1]),2 in k&&(E.finallyLoc=k[2],E.afterLoc=k[3]),this.tryEntries.push(E)}function c(k){var E=k.completion||{};E.type="normal",delete E.arg,k.completion=E}function i(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(K,this),this.reset(!0)}function j(k){if(k){var D=k[x];if(D)return D.call(k);if("function"==typeof k.next)return k;if(!isNaN(k.length)){var n=-1,L=function D(){for(;++n<k.length;)if(r.call(k,n))return D.value=k[n],D.done=!1,D;return D.value=E,D.done=!0,D};return L.next=L}}return{next:R}}function R(){return{value:E,done:!0}}return y.prototype=Y,M(H,"constructor",Y),M(Y,"constructor",y),y.displayName=M(Y,Q,"GeneratorFunction"),k.isGeneratorFunction=function(k){var E="function"==typeof k&&k.constructor;return!!E&&(E===y||"GeneratorFunction"===(E.displayName||E.name))},k.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Y):(k.__proto__=Y,M(k,Q,"GeneratorFunction")),k.prototype=Object.create(H),k},k.awrap=function(k){return{__await:k}},w(b.prototype),M(b.prototype,L,(function(){return this})),k.AsyncIterator=b,k.async=function(E,D,r,n,x){void 0===x&&(x=Promise);var L=new b(A(E,D,r,n),x);return k.isGeneratorFunction(D)?L:L.next().then((function(k){return k.done?k.value:L.next()}))},w(H),M(H,Q,"Generator"),M(H,x,(function(){return this})),M(H,"toString",(function(){return"[object Generator]"})),k.keys=function(k){var E=[];for(var D in k)E.push(D);return E.reverse(),function D(){for(;E.length;){var r=E.pop();if(r in k)return D.value=r,D.done=!1,D}return D.done=!0,D}},k.values=j,i.prototype={constructor:i,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=E,this.done=!1,this.delegate=null,this.method="next",this.arg=E,this.tryEntries.forEach(c),!k)for(var D in this)"t"===D.charAt(0)&&r.call(this,D)&&!isNaN(+D.slice(1))&&(this[D]=E)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if("throw"===k.type)throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var D=this;function n(r,n){return Q.type="throw",Q.arg=k,D.next=r,n&&(D.method="next",D.arg=E),!!n}for(var x=this.tryEntries.length-1;x>=0;--x){var L=this.tryEntries[x],Q=L.completion;if("root"===L.tryLoc)return n("end");if(L.tryLoc<=this.prev){var M=r.call(L,"catchLoc"),A=r.call(L,"finallyLoc");if(M&&A){if(this.prev<L.catchLoc)return n(L.catchLoc,!0);if(this.prev<L.finallyLoc)return n(L.finallyLoc)}else if(M){if(this.prev<L.catchLoc)return n(L.catchLoc,!0)}else{if(!A)throw new Error("try statement without catch or finally");if(this.prev<L.finallyLoc)return n(L.finallyLoc)}}}},abrupt:function(k,E){for(var D=this.tryEntries.length-1;D>=0;--D){var n=this.tryEntries[D];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var x=n;break}}x&&("break"===k||"continue"===k)&&x.tryLoc<=E&&E<=x.finallyLoc&&(x=null);var L=x?x.completion:{};return L.type=k,L.arg=E,x?(this.method="next",this.next=x.finallyLoc,X):this.complete(L)},complete:function(k,E){if("throw"===k.type)throw k.arg;return"break"===k.type||"continue"===k.type?this.next=k.arg:"return"===k.type?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):"normal"===k.type&&E&&(this.next=E),X},finish:function(k){for(var E=this.tryEntries.length-1;E>=0;--E){var D=this.tryEntries[E];if(D.finallyLoc===k)return this.complete(D.completion,D.afterLoc),c(D),X}},catch:function(k){for(var E=this.tryEntries.length-1;E>=0;--E){var D=this.tryEntries[E];if(D.tryLoc===k){var r=D.completion;if("throw"===r.type){var n=r.arg;c(D)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(k,D,r){return this.delegate={iterator:j(k),resultName:D,nextLoc:r},"next"===this.method&&(this.arg=E),X}},k}(k.exports);try{regeneratorRuntime=E}catch(k){"object"==typeof globalThis?globalThis.regeneratorRuntime=E:Function("r","regeneratorRuntime = r")(E)}},8384:k=>{k.exports=class{static get Zk(){return"2.0.35"}static get Xk(){return 1}static get hk(){return 5}static get yk(){return 5}static get gk(){return"https://authentication.urban-vpn.com"}static get mk(){return"https://analytics-toolbar.urban-vpn.com"}static get Yk(){return"/tickets"}static get Bk(){return"/install"}static get Hk(){return`/configuration?pv=${this.Zk}`}static get fk(){return!1}static get Jk(){return!0}static get Gk(){return!1}static get Vk(){return!1}static get sk(){return!0}static get Uk(){return!0}static get Ok(){return!0}static get ak(){return!0}static get _k(){return!1}static get zk(){return!1}}},3326:(k,E,D)=>{const r=D(5364),n=D(1568);k.exports=class{constructor(k){this.id=k,this.init=!1,this.InspectorConfig=null,this.hasActiveAdblock=!1}Init(k){return this.InspectorConfig=k,!this.init&&this.InspectorConfig&&this.InspectorConfig.active&&(this.init=!0,setTimeout(this.CheckForActiveAdblocker.bind(this),1e3*this.GetAgentActivationTimeout())),this.init}CheckForActiveAdblocker(){document.readyState===n.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.CheckAdblockerActivityStatus.bind(this)):document.readyState!==n.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==n.DOCUMENT_READYSTATE_COMPLETE||this.CheckAdblockerActivityStatus()}CheckAdblockerActivityStatus(){let k=this.CreateDumpAdElements(),E=k.length,D=0;for(;0!==E||this.hasActiveAdblock;){E-=1;let r=setTimeout((()=>{this.CheckAndRemoveTestAd(k[D]),D+=1,r&&clearTimeout(r)}),1e3*this.GetAdblockerAdRemovingTimeout())}}IsElementHidden(k){return!!k&&0===k.offsetHeight}CreateDumpAdElements(){let k=this.GetAdblockerDetectingSrcPatterns();return k&&k.length||(k=[""]),k.map((k=>{let E=document.createElement("iframe");return E.innerHTML="&nbsp;",E.className=this.GetAdblockerDetectionClassName(),E.style.position="absolute",E.style.visibility="hidden",E.style.zIndex="-9999",k&&(E.src=k),document.body.appendChild(E),E}))}CheckAndRemoveTestAd(k){let E={};E.hasActiveAdblock=this.IsElementHidden(k),k.remove(),r.SendAdBlockInspectorAgentReport(this.id,E,null)}GetAdblockerDetectionClassName(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionClassName}GetAdblockerDetectingSrcPatterns(){return this.init&&this.InspectorConfig&&this.InspectorConfig.detectionSrcPatterns}GetAgentActivationTimeout(){return this.init&&this.InspectorConfig&&this.InspectorConfig.agentActivationTimeoutSec}GetAdblockerAdRemovingTimeout(){return this.init&&this.InspectorConfig&&this.InspectorConfig.adRemovingTimeoutSec}}},3522:(k,E,D)=>{const r=D(8384),n=D(1568),x=D(2880),L=D(5364);k.exports=class{constructor(k,E){this.id=k,this.IOManager=E,this.init=!1,this.tabId=null,this.status=x.GetDefaultAdblockerStatus(),this.excludeList={domains:[],pages:[]},this.IOManager&&(this.IOManager.onAdBlockerStatusChanged=this.onAdBlockerStatusChanged.bind(this),this.IOManager.onAdBlockerSetHiddenAmount=this.SetHiddenAmount.bind(this))}GetStatus(){return this.status}Init(k,E,D){return!this.init&&r.sk&&(this.tabId=D,this.status=k,this.excludeList=E,this.init=!0),this.init}onAdBlockerStatusChanged(k){this.status=k}SetHiddenAmount(k){k>0&&L.SendHiddenAdCandidatesAmount(this.id,k)}IsEnabled(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_DISPLAY]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForFacebook(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_FACEBOOK]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForTwitter(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_TWITTER]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForReddit(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_REDDIT]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForPinterest(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_PINTEREST]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForInstagram(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_INSTAGRAM]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForTiktok(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_TIKTOK]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsEnabledForLinkedin(){return this.init&&r.sk&&this.status[n.ADBLOCKER_FOR_LINKEDIN]===n.ADBLOCKER_STATUS_ENABLED&&this.IsNotExcluded()}IsConfigUseLocal(){return this.init&&this.status[n.USE_LOCAL_CONFIG]===n.ADBLOCKER_STATUS_ENABLED}GetCurrentDomain(){return window.location.origin}GetCurrentPageUrl(){return window.location.href}IsExcluded(){return this.IsExcludedByDomainRule()||this.IsExcludedByPageRule()}IsNotExcluded(){return!this.IsExcluded()}IsExcludedByDomainRule(){return-1!==this.excludeList.domains.indexOf(this.GetCurrentDomain())}IsExcludedByPageRule(){return-1!==this.excludeList.pages.indexOf(this.GetCurrentPageUrl())}IsElementHidden(k){return"hidden"===k.getAttribute(n.ATTRIBUTE_BIS_HIDE_STATUS)}}},9346:(k,E,D)=>{const r=D(9358),n=D(533),x=D(2880),L=D(1568),Q=D(8384);k.exports=class extends n{constructor(k){super(),this.id=k,this.active=!1,this.candidates=[],this.hiddenAmount=0,this.pageUrl="",this.ticketId="",this.onPageRefreshed=null,this.isActive=!1,this.available=!1,this.elementId=0}getGlobalContainer(){}sendAdCandidatesToBackground(){}getUniqueContentId(){}get CandidatesCount(){return this.candidates.length}get Candidates(){return this.candidates}get HiddenAmount(){return this.hiddenAmount}get PageUrl(){return this.pageUrl}get TicketId(){return this.ticketId}get IsActive(){return this.active}Activated(){this.active=!0}CandidateHidden(){this.hiddenAmount=this.hiddenAmount+1}ClearHiddenCounter(){this.hiddenAmount=0}ClearCandidates(){this.candidates=[]}AddCandidate(k){this.candidates.push(k)}PageRefreshed(k,E){this.pageUrl=k,this.ticketId=E,this.onPageRefreshed&&this.onPageRefreshed(k,E)}getSponsorTwitterScreenName(k){let E=this.getSponsorPageRelativeUrl(k),D=E.lastIndexOf("/")+1;return E.substring(D)}getSponsorRedditScreenName(k){let E=this.getSponsorScreenNameReddit(k);return E?E.replace(/^.*\/user\//gi,"").replace(/\/.*/gi,""):""}getSponsorPageRelativeUrl(k){let E="",D=k.querySelectorAll("a");if(D.length){E=D[0].getAttribute("href");let k=D[0].getBoundingClientRect().x;D.forEach((D=>{D.getBoundingClientRect().x<k&&(E=D.getAttribute("href"),k=D.getBoundingClientRect().x)}))}return E}getSponsorScreenNameReddit(k){let E,D=Array.from(k.querySelectorAll("a[href]"));for(let k of D){const D=new RegExp(/^\/user\/.*/),r=k.getAttribute("href");if(r&&D.test(r)){E=r.replace(/\/user\//,"").replace(/\/.*/,"");break}}return E}get Context(){return this}getAdTwitterObject(k,E,D,n){let L=x.SetFullSizeToElement(E),Q=x.GetCookie("ct0");return{content:r.encode(k.outerHTML),screenName:this.getSponsorTwitterScreenName(k),stylesByElementBisId:n?{}:this.getStylesByElementsBisId(k),adPlacementType:D,size:L,userDataByScreenName:"",token:Q}}getAdRedditObject(k,E,D,n){let L=x.SetFullSizeToElement(k);return{content:r.encode(E.outerHTML),screenName:this.getSponsorRedditScreenName(E),adPlacementType:n,targetUrl:D,size:L}}getAdLinkedinObject(k,E,D,n,L,Q,M=null){let A=x.SetFullSizeToElement(k);return{content:r.encode(E.outerHTML),socialAdvertiserUrl:L,advertiserName:Q,advertiserUrl:"",adPlacementType:D,targetUrl:n,size:A,cookie:x.GetAllCookies(),uniqueDataId:M}}getAdPinterestObject(k,E,D,n,L,Q,M){let A=x.SetFullSizeToElement(k),T=this.getUniqueContentId(E);return{content:r.encode(E.outerHTML),screenName:D,adPlacementType:M,targetUrl:n,size:A,adText:L,advertiserUrl:Q,uniqueContentId:T}}getAdInstagramObject(k,E,D,n,L,Q){let M=x.SetFullSizeToElement(k);return{content:r.encode(E.outerHTML),screenName:D,adPlacementType:Q,targetUrl:n,size:M,aboutPageUrl:L}}setSizesAndIdForAllElements(k){if(k&&k.setAttribute){let E=this.getElementId();k.setAttribute(L.ATTRIBUTE_BIS_ELEMENT_ID,E),k.querySelectorAll("*").forEach((k=>{let E=this.getElementId();k.setAttribute&&(k.setAttribute(L.ATTRIBUTE_BIS_ELEMENT_ID,E),x.SetFullSizeToElement(k))}))}}isEmpty(k){return void 0===k||0===k.length}getElementId(){return this.elementId++}set setActive(k){"boolean"==typeof k&&(this.isActive=k)}set setAvailable(k){"boolean"==typeof k&&(this.available=k)}HideElement(k){k&&k.style&&(k.style.cssText+=L.STYLES_HIDE_ELEMENT,k.setAttribute(L.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}HideElementForInstagramFeedOnly(k){k&&k.style&&(k.firstElementChild.style.cssText+=L.STYLES_HIDE_INSTAGRAM_FEED_AD[0],k.style.cssText+=L.STYLES_HIDE_INSTAGRAM_FEED_AD[1],k.setAttribute(L.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"),this.CandidateHidden())}UnhideElement(k){if(k&&k.style){let E=k.style.cssText;E.includes(L.STYLES_HIDE_ELEMENT)&&(E=E.replace(L.STYLES_HIDE_ELEMENT,""),k.style.cssText=E)}}removeCloneElement(k){k.remove()}isCarousel(k){let E=k.querySelector("ul");return!!E&&E.offsetHeight>40}isVideo(k,E){return!(!k||!k.querySelectorAll(E).length)}doesElementExists(k){if(!k)return!1;let E=k.outerHTML;return document.querySelector("html").outerHTML.includes(E)}addRedBorderForCandidates(k){Q.Gk&&(k.style.cssText+="border: 6px solid red !important;")}}},1153:(k,E,D)=>{const r=D(1568),n=D(2880),x=D(7235),L=D(3210),Q=D(4430),M=D(855),A=D(97),T=D(4919),s=D(5465),O=D(2075),m=D(3375),B=D(9181),X=D(5849),h=D(9203),y=D(1368);k.exports=class{constructor(k,E,D,r){if(this.id=k,this.Config=E,this.AdBlockerAgent=r,this.IOManager=D,this.PageUrl=document.location.href,this.FacebookAds=null,this.TwitterAds=null,this.RedditAds=null,this.SkinAds=null,this.HTML5Ads=null,this.VideoAds=null,this.PinterestAds=null,this.InstagramAds=null,this.LinkedinAds=null,this.TwitchAds=null,this.TiktokAds=null,this.IsBlacklistedPublisher=n.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),!this.IsBlacklistedPublisher)switch(!0){case n.IsFacebookUrl(this.PageUrl):this.FacebookAds=new A(this.id,this.Config,this.AdBlockerAgent);break;case n.IsTwitterUrl(this.PageUrl):this.TwitterAds=new T(this.id,this.Config,this.AdBlockerAgent);break;case n.IsRedditUrl(this.PageUrl):this.RedditAds=new s(this.id,this.Config,this.AdBlockerAgent);break;case n.IsTiktokUrl(this.PageUrl):this.TiktokAds=new X(this.id,this.Config,this.AdBlockerAgent);break;case n.IsPinterestUrl(this.PageUrl):this.PinterestAds=new O(this.id,this.Config,this.AdBlockerAgent);break;case n.IsInstagramUrl(this.PageUrl):this.InstagramAds=new m(this.id,this.Config,this.AdBlockerAgent);break;case n.IsLinkedinUrl(this.PageUrl):this.LinkedinAds=new B(this.id,this.Config,this.AdBlockerAgent);break;case n.IsTwitchUrl(this.PageUrl)&&this.Config.twitchConfig.COLLECT_INSTREAM_ADS:this.TwitchAds=new h(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new L(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new Q(this.id,this.Config,this.IOManager,this.AdBlockerAgent);break;case n.isAI(this.PageUrl,this.Config):this.AIManager=new y(this.id,this.Config,this.PageUrl);break;default:this.SkinAds=new x(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.BannerAds=new L(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.HTML5Ads=new Q(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.VideoAds=new M(this.id,this.Config,this.IOManager)}}ActivateAdsdetectors(){this.IsBlacklistedPublisher||(document.readyState===r.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.StartAdsdetectors.bind(this)):document.readyState!==r.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==r.DOCUMENT_READYSTATE_COMPLETE||this.StartAdsdetectors())}StartAdsdetectors(){this.SkinAds&&this.SkinAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.BannerAds&&this.BannerAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.HTML5Ads&&this.HTML5Ads.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.VideoAds&&this.VideoAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.FacebookAds&&this.FacebookAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.TwitterAds&&this.TwitterAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.RedditAds&&this.RedditAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.PinterestAds&&this.PinterestAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.InstagramAds&&this.InstagramAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.LinkedinAds&&this.LinkedinAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER),this.TwitchAds&&this.TwitchAds.ActivateDetector(r.ACTIVATION_BY_ADS_MANAGER)}PageRefreshed(k,E){this.SkinAds&&this.SkinAds.PageRefreshed(k,E),this.BannerAds&&this.BannerAds.PageRefreshed(k,E),this.HTML5Ads&&this.HTML5Ads.PageRefreshed(k,E),this.VideoAds&&this.VideoAds.PageRefreshed(k,E),this.FacebookAds&&this.FacebookAds.PageRefreshed(k,E),this.TwitterAds&&this.TwitterAds.PageRefreshed(k,E),this.RedditAds&&this.RedditAds.PageRefreshed(k,E),this.PinterestAds&&this.PinterestAds.PageRefreshed(k,E),this.InstagramAds&&this.InstagramAds.PageRefreshed(k,E),this.LinkedinAds&&this.LinkedinAds.PageRefreshed(k,E),this.TiktokAds&&this.TiktokAds.PageRefreshed(k,E),this.TwitchAds&&this.TwitchAds.pageRefreshed(k,E),this.AIManager&&this.AIManager.pageRefreshed(k,E)}GetHtml5CandidatesPrebuildInfo(){return this.HTML5Ads&&this.HTML5Ads.IsActive?this.HTML5Ads.GetPrebuildInfo():[]}}},1104:(k,E,D)=>{const r=D(6882);k.exports=class{constructor(k,E){this.id=k,this.onGotWindowMessageCallback=E,this.mesToFrameDeactivationIntervalId=null}SetId(k){this.id=k}ActivateMesToFrameContentListener(k){this.mesToFrameDeactivationIntervalId||(this.mesToFrameDeactivationIntervalId=setInterval(this.CheckMesToFrameContent.bind(this),300),setTimeout(this.DeactivateMesToFrameContentListener.bind(this),3e3))}CheckMesToFrameContent(){try{let k=document.body.getAttribute("bis_mes_to_fr");if(k&&k){let E=JSON.parse(k);document.body.setAttribute("bis_mes_to_fr",""),r.IsValid(E)&&this.onGotWindowMessageCallback&&this.onGotWindowMessageCallback(E),this.DeactivateMesToFrameContentListener()}}catch(k){}}DeactivateMesToFrameContentListener(){this.mesToFrameDeactivationIntervalId&&(clearInterval(this.mesToFrameDeactivationIntervalId),this.mesToFrameDeactivationIntervalId=null)}}},3210:(k,E,D)=>{const r=D(8384),n=D(2880),x=D(9358),L=D(9346),Q=D(5364),M=D(1568);k.exports=class extends L{constructor(k,E,D,r){super(k),this.Config=E,this.bannerAdsConfig=this.Config.BannerAdsConfig,this.IOManager=D,this.IOManager.onGotBannerCandidatesExtractionStatusesCallback=this.onGoBannerCandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=r}ActivateDetector(){this.DetectCandidates(),setTimeout((()=>{this.DetectCandidates()}),350),setInterval((()=>{this.DetectCandidates()}),700)}PushCandidate(k,E){let D={bisId:E,content:x.encode(k)};this.AddCandidate(D)}IsValidCandidateSize(k){return k&&k.width>70&&k.height>40&&k.height<1100}SetBorderToCandidate(k){k&&r.Gk&&(r.Vk?k.style.cssText+=M.STYLES_BORDER_BANNER_URL_EXTRACTED:k.style.cssText+="border: 6px solid red !important;")}SendCandidatesToBackground(){this.Candidates.length&&Q.SendAdCandidates(this.id,this.Candidates,M.MESSAGE_TYPE_CANDIDATES_DATA_BANNERS,null)}DetectCandidates(){this.ClearCandidates();let k=n.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.FULL_IMG_COLLECTION);for(let E=0;E<k.length;E++){let D=k[E];if(!D)continue;let r=D.src.toLowerCase(),x=this.getTagWithHref(D);if(!x)continue;let L=x.href.toLowerCase(),Q=!1;if((!this.filterNonAdBanner(D)||this.isRedirectInHref(x))&&(n.IsInFilterList(this.Config.BlacklistBannerHref,L)||n.IsInFilterList(this.Config.BlacklistBannerImgSrc,r)||D.hasAttribute("bis_skin_element")||(n.isValidUrl(r)&&n.isValidUrl(L)||n.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,r)||n.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,L))&&(Q=!0),Q)){let k=D.getBoundingClientRect();if(this.IsValidCandidateSize(k)){this.SetBorderToCandidate(D),n.SetFullSizeToElement(D),n.SetFullSizeToElement(x);let k=n.GenerateAndSetBisIdToBanner(D);this.PushCandidate(x.outerHTML,k)}}}let E=n.QuerySelectorAll(document,this.bannerAdsConfig.QUERIES.ON_EVENT_IMG_COLLECTION);for(let k=0;k<E.length;k++){let D=E[k],r=D.src.toLowerCase();if(!n.IsInFilterList(this.Config.BlacklistBannerImgSrc,r)&&(n.isValidUrl(r)&&!n.IsUrlFromHost(document.location.host,r)||n.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,r))){let k=D.getBoundingClientRect();if(this.IsValidCandidateSize(k)){this.SetBorderToCandidate(D),n.SetFullSizeToElement(D);let k=n.GenerateAndSetBisIdToBanner(D);this.PushCandidate(D.outerHTML,k)}}}this.SendCandidatesToBackground()}filterNonAdBanner(k){let E=window.location.host||"__NULL__",D=k.src.toLowerCase(),r=D.match(/\/\/(www\.)?[A-Za-z0-9.]+/),x=this.getTagWithHref(k),L=x?x.href.match(/\/\/(www\.)?[A-Za-z0-9.]+/):"",Q=document.querySelector("head").outerHTML,M=n.IsUrlFromHost(E,x.href);return L=L?L[0].replace("//",""):"",r=r?r[0].replace("//",""):"__NULL__",E=0===E.indexOf("www")?E.replace("www.",""):E,M||Q.includes(L)||D.includes(E)&&M||-1!==D.search(/^data/)}isRedirectInHref(k){let E=k.href;return!!E&&E.search(/=https?/)>0}onGoBannerCandidatesExtractionStatuses(k){if(r.Gk&&r.Vk&&k&&k.length)for(let E=0;E<k.length;E++){let D=n.QuerySelector(document,`*[bis_id="${k[E].bannerId}"]`);D&&n.UpdateCandidateStatusBorderColor(D,k[E].extractionStatus)}}getTagWithHref(k){let E=k.parentElement;for(let k=0;k<5&&"A"!==E.tagName;k++)E=E.parentElement;return"A"!==E.tagName&&(E=null),E}}},1245:(k,E,D)=>{D(1568);const r=D(9358);k.exports=class{constructor(k,E){this.id=k,this.configEncoded=E,this.config=JSON.parse(r.decode(E)),this.counterTriesToSave=0,this.SaveToStorageConfig()}GetConfigEncoded(){return this.configEncoded}get BlacklistPublishers(){return this.config.filterLists.blacklistPublishers}get BlacklistBannerImgSrc(){return this.config.filterLists.blacklistBannerImgSrc}get BlacklistBannerHref(){return this.config.filterLists.blacklistBannerHref}get BlacklistIframeSrc(){return this.config.filterLists.blacklistIframeSrc}get BlacklistIframeId(){return this.config.filterLists.blacklistIframeId}get WhitelistCandidatesUrlKeyWords(){return this.config.filterLists.whitelistCandidatesUrlKeyWords}get WhitelistRedirectionCode(){return this.config.filterLists.whitelistRedirectionCode}GetVideoValidatorsForHTML(){return this.config.videoValidatorsForHTML}GetVideoValidatorsForJS(){return this.config.videoValidatorsForJS}GetVideoValidatorsForXHR(){return this.config.videoValidatorsForXHR}get FacebookConfig(){return this.config.facebookConfig}get TwitterConfig(){return this.config.twitterConfig}get RedditConfig(){return this.config.redditConfig}get PinterestConfig(){return this.config.pinterestConfig}get LinkedinConfig(){return this.config.linkedinConfig}get TiktokConfig(){return this.config.tiktokConfig}get GetInstagramConfig(){return this.config.instagramConfig}GetAdBlockInspectorConfig(){return this.config.adBlockInspectorConfig}get BannerAdsConfig(){return this.config.bannerAdsConfig}get Html5AdsConfig(){return this.config.HTML5AdsConfig}get wk(){return this.config.aiMessagesConfig||{}}get bk(){return this.wk.CLAUDE}get Nk(){return this.wk.GROK}get Kk(){return this.wk.CHATGPT}get ck(){return this.wk.COPILOT}get ik(){return this.wk.PERPLEXITY}get jk(){return this.wk.META_AI}get Rk(){return this.wk.DEEPSEEK}get uk(){return this.wk.GEMINI}get BlacklistTargetUrl(){return this.config.filterLists.blacklistTargetUrl}get BlacklistKeyWordsInContent(){return this.config.filterLists.blacklistKeyWordsInContent}GetHtml5TargetUrlDetectionConfig(){return this.config.html5TargetUrlDetectionConfig}get twitchConfig(){return this.config.twitchConfig}static get CheckBisDataExist(){try{return!!sessionStorage.getItem("bis_data")}catch(k){return null}}SaveToStorageConfig(){const k=JSON.stringify({id:this.id,config:this.config});sessionStorage.setItem("bis_data",k),this.counterTriesToSave++}get amountTriesSaveConfig(){return this.counterTriesToSave}}},5364:(k,E,D)=>{const r=D(1568),n=D(6882),x=D(2880);class L{constructor(k,E){this.id=k,this.init=!1,this.onGotHTML5CandidatesExtractionStatusesCallback=null,this.onGotSkinAdCandidatesExtractionStatusesCallback=null,this.onGotBannerCandidatesExtractionStatusesCallback=null,this.manualSendTicket=null,this.onGotVideoXHRTrafficCallback=null,this.onGotTwitchVideoInstreamDataCallback=null,this.onAdBlockerStatusChanged=null,this.onAdBlockerSetHiddenAmount=null,this.onTabUrlChanged=null,this.twitterVideoInfoCandidates=[],this.twitterAdCandidate=[],this.ConfigAgent=E}IsInit(){return this.init}Init(){this.init||(this.init=!0,window.addEventListener("message",(k=>{try{let E=k.data;if(n.IsValid(E)){const k=E.type;switch(k){case r.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE:this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(E.content);break;case r.MESSAGE_TYPE_VIDEO_TWITCH_INSTREAM_DATA:this.onGotTwitchVideoInstreamDataCallback&&this.onGotTwitchVideoInstreamDataCallback(E.content);break;case r.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA:L.SendFBInStreamData(this.id,E.content);break;case r.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA:x.IsFBVideoDataValid(E.content)&&L.SendFBVideoData(this.id,E.content);break;case r.MESSAGE_TYPE_PINTEREST_VIDEO_DATA:L.SendPinterestVideoData(this.id,E.content);break;case r.MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA:case r.MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES:case r.MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA:case r.MESSAGE_TYPE_INSTAGRAM_STORY_DATA:L.SendInstagramDataToBgStorage(this.id,E.content,k);break;case r.MESSAGE_TYPE_LINKEDIN_VIDEO_DATA:case r.MESSAGE_TYPE_LINKEDIN_SLIDES_DATA:L.SendLinkedinDataToBgStorage(this.id,E.content,k);break;case r.MESSAGE_TYPE_TWITTER_VIDEO_DATA:L.SendTWVideoData(this.id,E.content);break;case r.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA:L.SendTWCarouselData(this.id,E.content);break;case r.MESSAGE_TYPE_TIKTOK_VIDEO_CANDIDATES:L.SendTiktokDataToBgStorage(this.id,E.content,k),this.SetAdBlockerHiddenAmount(1);break;case r.MESSAGE_TYPE_REDDIT_VIDEO_DATA:L.SendRedditVideoData(this.id,E.content);break;case r.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA:L.SendRedditRightColumnData(this.id,E.content);break;case r.MESSAGE_TYPE_CLAUDE_DATA:E.appId===chrome.runtime.id&&L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_CLAUDE_DATA);break;case r.MESSAGE_TYPE_CHATGPT_DATA:E.appId===chrome.runtime.id&&(L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_CHATGPT_DATA),this.manualSendTicket&&this.manualSendTicket());break;case r.MESSAGE_TYPE_CHATGPT_PROTECTION_STATUS:E.appId===chrome.runtime.id&&chrome.storage.local.get("panelAIFeatures").then((k=>{window.postMessage({type:r.MESSAGE_TYPE_CHATGPT_PROTECTION_STATUS_RESPONSE,content:"on"===k.panelAIFeatures},"*")}));break;case r.MESSAGE_TYPE_DEEPSEEK_DATA:E.appId===chrome.runtime.id&&L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_DEEPSEEK_DATA);break;case r.MESSAGE_TYPE_COPILOT_DATA:E.appId===chrome.runtime.id&&L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_COPILOT_DATA);break;case r.MESSAGE_TYPE_PERPLEXITY_DATA:E.appId===chrome.runtime.id&&L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_PERPLEXITY_DATA);break;case r.MESSAGE_TYPE_META_AI_DATA:E.appId===chrome.runtime.id&&L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_META_AI_DATA);break;case r.MESSAGE_TYPE_GEMINI_DATA:E.appId===chrome.runtime.id&&(L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_GEMINI_DATA),this.manualSendTicket&&this.manualSendTicket());break;case r.MESSAGE_TYPE_GEMINI_PROTECTION_STATUS:E.appId===chrome.runtime.id&&chrome.storage.local.get("panelAIFeatures").then((k=>{window.postMessage({type:r.MESSAGE_TYPE_GEMINI_PROTECTION_STATUS_RESPONSE,content:"on"===k.panelAIFeatures},"*")}));break;case r.MESSAGE_TYPE_GROK_DATA:E.appId===chrome.runtime.id&&(L.sendAIMessageCandidates(this.id,E.content,r.MESSAGE_TYPE_GROK_DATA),this.manualSendTicket&&this.manualSendTicket());break;case r.MESSAGE_TYPE_GROK_PROTECTION_STATUS:E.appId===chrome.runtime.id&&chrome.storage.local.get("panelAIFeatures").then((k=>{window.postMessage({type:r.MESSAGE_TYPE_GROK_PROTECTION_STATUS_RESPONSE,content:"on"===k.panelAIFeatures},"*")}));break;case r.MESSAGE_TYPE_CONFIG_NOT_FOUND:this.ConfigAgent.SaveToStorageConfig(),this.sendResponseConfigSaved()}}}catch(k){}}),!1),x.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((k=>{let E=k;if(n.IsValid(E))if(E.to===this.id)E.type===r.MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES?this.onGotHTML5CandidatesExtractionStatusesCallback&&this.onGotHTML5CandidatesExtractionStatusesCallback(E.content):E.type===r.MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES?this.onGotBannerCandidatesExtractionStatusesCallback&&this.onGotBannerCandidatesExtractionStatusesCallback(E.content):E.type===r.MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES?this.onGotSkinAdCandidatesExtractionStatusesCallback&&this.onGotSkinAdCandidatesExtractionStatusesCallback(E.content):E.type===r.MESSAGE_TYPE_TAB_URL_CHANGED?this.onTabUrlChanged&&this.onTabUrlChanged(E.content):E.type===r.MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED&&this.onAdBlockerStatusChanged&&this.onAdBlockerStatusChanged(E.content);else if(E.type===r.MESSAGE_TYPE_AI_FEATURES_PROTECTION_CLEAR_TIMEOUT){const k={type:r.MESSAGE_TYPE_AI_FEATURES_PROTECTION_CLEAR_TIMEOUT,result:E.content};window.postMessage(k,"*")}else if(E.type===r.MESSAGE_TYPE_AI_FEATURES_PROTECTION_NO_WARNINGS){const k={type:r.MESSAGE_TYPE_AI_FEATURES_PROTECTION_NO_WARNINGS,result:E.content};window.postMessage(k,"*")}})))}SetAdBlockerHiddenAmount(k){this.onAdBlockerSetHiddenAmount&&this.onAdBlockerSetHiddenAmount(k)}SendTicket(k){let E=n.EmptyMessage;E.type=r.MESSAGE_TYPE_OUT_TICKET,E.from=this.id,E.to="bg",E.content=k,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(E).then(this.onTicketSend.bind(this)).catch((()=>{}))}onTicketSend(k){k&&k.status}static SendHiddenAdCandidatesAmount(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}static SendInitMes(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_TAB_INITIALIZATION,D.to="bg",D.content=k,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).then((k=>{k&&k.config&&E&&E(k.config)})).catch((()=>{}))}static SendSinglePageReinitMes(k){let E=n.EmptyMessage;E.type=r.MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION,E.to="bg",E.content=k,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(E).catch((()=>{}))}static SendNewPageCreatedTicket(k){let E=n.EmptyMessage;E.type=r.MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET,E.to="bg",E.content=k,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(E).catch((()=>{}))}static SendPanelRegulatorResult(k){let E=n.EmptyMessage;E.type=r.MESSAGE_TYPE_PANEL_REGULATOR_RESULT,E.to="bg",E.content=k,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(E).catch((()=>{}))}static SendMesToBackground(k,E,D,r){let L=n.EmptyMessage;L.type=E,L.from=k,L.to="bg",L.content=D,x.IsOnChromeRuntime()&&(r?chrome.runtime.sendMessage(L).then(r).catch((()=>{})):chrome.runtime.sendMessage(L).catch((()=>{})))}static SendAdCandidates(k,E,D,r){L.SendMesToBackground(k,D,E,r)}static sendAIMessageCandidates(k,E,D){L.SendMesToBackground(k,D,E)}static SendCandidatePlacementsCount(k,E,D,r){L.SendMesToBackground(k,D,E,r)}static SendHtml5CandidatePlacements(k,E,D){L.SendMesToBackground(k,r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5,E,D)}static SendAdBlockInspectorAgentReport(k,E){L.SendMesToBackground(k,r.MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT,E,null)}static SendTWVideoData(k,E){L.SendMesToBackground(k,r.MESSAGE_TYPE_TWITTER_VIDEO_DATA,E,null)}static SendTWCarouselData(k,E){L.SendMesToBackground(k,r.MESSAGE_TYPE_TWITTER_CAROUSEL_DATA,E,null)}static SendRedditVideoData(k,E){L.SendMesToBackground(k,r.MESSAGE_TYPE_REDDIT_VIDEO_DATA,E,null)}static SendRedditRightColumnData(k,E){L.SendMesToBackground(k,r.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA,E,null)}static SendVideoHar(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_VIDEO_HAR,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}SendTwitchInstreamData(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_CANDIDATES_VIDEO_DATA_TWITCH,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}static SendFBVideoData(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}static SendPinterestVideoData(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_PINTEREST_VIDEO_DATA,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}static SendInstagramDataToBgStorage(k,E,D){let r=n.EmptyMessage;r.type=D,r.from=k,r.to="bg",r.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((()=>{}))}static SendTiktokDataToBgStorage(k,E,D){let r=n.EmptyMessage;r.type=D,r.from=k,r.to="bg",r.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((()=>{}))}static SendLinkedinDataToBgStorage(k,E,D){let r=n.EmptyMessage;r.type=D,r.from=k,r.to="bg",r.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((()=>{}))}static SendInstagramFullTextData(k,E,D){let r=n.EmptyMessage;r.type=D,r.from=k,r.to="bg",r.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(r).catch((()=>{}))}static SendFBInStreamData(k,E){let D=n.EmptyMessage;E.encodedText=E.content,E.alias=r.VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON,E.mediaType=r.VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON,E.frameId=0,E.framesChain=[],E.contentType="json",delete E.content,D.type=r.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}static SendInitRequestListener(k,E){let D=n.EmptyMessage;D.type=r.MESSAGE_TYPE_INIT_REQUEST_LISTENER,D.from=k,D.to="bg",D.content=E,x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}sendResponseConfigSaved(){if(this.ConfigAgent.amountTriesSaveConfig>4)return;let k=n.EmptyMessage;k.type=r.MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE,window.postMessage(k,"*")}}k.exports=L},8229:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k,E,D,r){this.init=!1,this.Config=r,this.chainId=k,this.frameId=E,this.bisId=D,this.documentObj=null,this.onInputsDetectedCallback=null,this.onRedirectsDetectedCallback=null,this.detectedValidationInfo={inputs:!1,redirect:!1}}Init(k,E,D){return!this.init&&k&&(this.init=!0,this.fullIdStr=r.GetFullIdStr(this.chainId,this.frameId,this.bisId),this.documentObj=k,this.onInputsDetectedCallback=E,this.onRedirectsDetectedCallback=D,this.ValidateContent()),this.init}ValidateContent(){if(!this.detectedValidationInfo.inputs){this.GetInputsAmount()>0&&!this.IsIFrameWithInputsException()&&(this.detectedValidationInfo.inputs=!0,this.onInputsDetectedCallback&&this.onInputsDetectedCallback())}this.detectedValidationInfo.redirect||this.HasRedirect()&&(this.detectedValidationInfo.redirect=!0,this.onRedirectsDetectedCallback&&this.onRedirectsDetectedCallback())}GetInputsAmount(){let k=0;try{let E=r.QuerySelectorAll(this.documentObj,"input");E&&E.length&&E.forEach((E=>{let D=E.getBoundingClientRect();D.width>0&&D.height>0&&(k+=1)}))}catch(k){}return k}IsIFrameWithInputsException(){let k=!1,E=r.QuerySelector(this.documentObj,"html");return E&&-1!==E.innerHTML.search(/var clicktag/i)&&(k=!0),k}IsWhiteListedRedirectionCode(k){let E=!1;try{if(k&&k.length&&this.Config){let D=this.Config.WhitelistRedirectionCode;for(let r=0;r<D.length&&!E;r++)k.includes(D[r])&&(E=!0)}}catch(k){}return E}HasRedirect(){let k=!1,E=r.QuerySelectorAll(this.documentObj,"script");for(let D=0;D<E.length&&!k;D++){let r=E[D].innerHTML;r.length&&r.includes("location.replace")&&(k=!this.IsWhiteListedRedirectionCode(r))}return k}}},3870:(k,E,D)=>{const r=D(9358),n=D(2880),x=D(6882),L=D(1568),Q=D(4503),M=D(8229),A=D(9877),T=D(855),s=D(1245);class O{constructor(){this.id=null,this.frameId=null,this.chainId=null,this.fullIdStr="",this.init=!1,this.chainActivated=!1,this.finalFrame=!1,this.activated=!1,this.contentSenderTimer=null,this.activationInfo=null,this.IframesIO=null,this.TargetUrlDetector=null,this.ContentValidator=null,this.VideoAds=null,this.Config=null,this.recheckerInterval=null,this.PageUrl=document.location.href,this.counter=10,this.timeoutHandlerForBlockedFrame=null,this.isBlockedFrameInfoGot=!1}Init(){this.init||(this.init=!0,setTimeout(this.SendInitMessage.bind(this),700))}SetBisStatus(){document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_status","ok")}RecheckBisStatus(){document&&document.body&&document.body.getAttribute&&"ok"!==document.body.getAttribute("bis_status")&&this.SetBisStatus()}StopRechecker(){this.recheckerInterval&&(clearInterval(this.recheckerInterval),this.recheckerInterval=null)}SendInitMessage(){let k=document.querySelector("html"),E=k?k.innerHTML:"",D=x.EmptyMessage;D.type=L.MESSAGE_TYPE_IFRAME_INITIALIZATION,D.from=this.id,D.to="bg",D.content={location:document.location.href,contentForSave:{depth:this.findDepthForClosedFrame(window,0),src:document.location.href,content:r.encode(E)}},n.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).then(this.onGotInitMesResponse.bind(this)).catch((()=>{}))}findDepthForClosedFrame(k,E=0){const D=k.parent;return D&&D!==top?(E++,this.findDepthForClosedFrame(D,E)):E}onGotInitMesResponse(k){const E=k.mes.content.location;this.Config=new s(this.id,k.mes.content.configuration);const D=this.Config?.LinkedinConfig?.FEED.REGEXP_IFRAME_SRC;if(!D)throw new Error("Not found this.Config.LinkedinConfig.FEED.REGEXP_IFRAME_SRC in PosdFrameContent.onGotInitMesResponse");if(!0===new RegExp(D).test(E))this.linkedinScenario(k);else this.commonScenario(k)}commonScenario(k){if(k&&k.status&&"ok"===k.status&&x.IsValid(k.mes)&&k.mes.content.activeStatus&&(this.frameId=k.mes.content.frameId,this.fullIdStr=n.GetFullIdStr(this.chainId,this.frameId,this.id),k.mes.content.isMaster)){this.Config=new s(this.id,k.mes.content.configuration);const E=n.IsPublisherInBlacklist(this.PageUrl,this.Config.BlacklistPublishers),D=n.IsInFilterList(this.Config.BlacklistIframeSrc,this.PageUrl),r=n.IsInFilterList(this.Config.BlacklistKeyWordsInContent,document.querySelector("html").innerHTML);if(E||D||r)return;this.SetBisStatus(),setTimeout(this.StopRechecker.bind(this),1e4),this.recheckerInterval=setInterval(this.RecheckBisStatus.bind(this),300),this.IframesIO=new Q(this.id),this.IframesIO.Init(),this.IframesIO.onGotChainActivationCallback=this.onGotChainActivation.bind(this),this.IframesIO.onGotContentMesCallback=this.onGotContentMes.bind(this),this.VideoAds=new T(this.id,this.Config,this.IframesIO,!E),document&&document.body&&document.body.setAttribute&&document.body.setAttribute("bis_frame_id",this.frameId),"null"===self.origin&&(this.timeoutHandlerForBlockedFrame=setInterval((()=>{this.counter--,this.isBlockedFrameInfoGot||this.counter<=0?clearInterval(this.timeoutHandlerForBlockedFrame):this.requestHeaderInfoFromBG()}),1e3))}}linkedinScenario(k){if(!(k&&k.status&&"ok"===k.status&&x.IsValid(k.mes)))return;let E=document?.documentElement;if(!E)return;let D=E.querySelector("body");if(D){let k=1e3;D.setAttribute(L.ATTRIBUTE_BIS_ELEMENT_ID,k),D.querySelectorAll("*").forEach((E=>{k++,E.setAttribute&&(E.setAttribute(L.ATTRIBUTE_BIS_ELEMENT_ID,k),n.SetFullSizeToElement(E))}))}let r=setTimeout((()=>{let k=E.outerHTML,D=document.querySelector('span[class="ssplayer-topbar-title-text ssplayer-topbar-ellipsis"]')?.textContent;this.storeLinkedinFrameContent(k,D),clearTimeout(r)}),100)}storeLinkedinFrameContent(k,E){let D=x.EmptyMessage;D.type=L.MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE,D.from=this.id,D.to="bg",D.content={content:r.encode(k),title:E},n.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}requestHeaderInfoFromBG(){let k=x.EmptyMessage;k.type=L.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME,k.from=this.id,k.to="bg",k.content={src:document.location.href},n.IsOnChromeRuntime()&&(this.setMessageListenerForThisIFrame(),chrome.runtime.sendMessage(k).catch((()=>{})))}setMessageListenerForThisIFrame(){chrome.runtime.onMessage.addListener(this.callbackForHeaderInfoRequest.bind(this))}callbackForHeaderInfoRequest(k){let E=arguments.callee;if(k&&k.type&&k.type===L.MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE){let D=k.parentInfo;if(chrome.runtime.onMessage.removeListener(E),D){this.isBlockedFrameInfoGot=!0;let k=A.DetectTargetUrlFromWindowObj(this.id,self,this.Config),E={depth:D.depth,headerInfo:D.headerInfo,chainId:D.chainId,configEncoded:this.Config.configEncoded,targetUrlCandidates:k.length?k:[]};this.onGotChainActivation(E)}}}onGotChainActivation(k){if(this.chainActivated)return null;if(this.chainActivated=!0,!(k&&k.headerInfo&&k.headerInfo.bisId))return null;this.id=k.headerInfo.bisId,this.IframesIO.SetId(this.id),this.chainId=k.chainId,this.fullIdStr=n.GetFullIdStr(this.chainId,this.frameId,this.id),this.StopRechecker(),this.activationInfo=k,this.Config||k.configEncoded&&k.configEncoded.length&&(this.Config=new s(this.id,k.configEncoded)),this.ContentValidator=new M(this.chainId,this.frameId,this.id,this.Config),this.ContentValidator.Init(document,this.onContentInputsDetected.bind(this),this.onContentRedirectsDetected.bind(this)),this.TargetUrlDetector=new A(this.chainId,this.frameId,this.id,this.activationInfo.targetUrlCandidates,this.Config),this.TargetUrlDetector.Init(this.IframesIO),O.SetBisId(document,window,this.id),n.SetBisDepth(document.body,k.depth),n.SetBisChainId(document.body,k.chainId),this.InjectJs();let E=setTimeout((()=>{this.onGotActivationMes(),clearTimeout(E)}),50)}onGotActivationMes(){if(!this.activated){this.activated=!0;var k=n.QuerySelectorAll(document,"iframe, frame");if(k.length)for(let E=0;E<k.length;E++){const D=k[E];if(n.SetFullSizeToElement(D,O.GetAbsoluteCoordinates(this.activationInfo)),n.GenerateAndSetBisIdToFrame(D),n.SetBisDepth(D,this.activationInfo.depth+1),n.SetBisChainId(D,this.activationInfo.chainId),n.IsIframeHasContentScript(k[E]))O.SendActivationMesToFrame(this.id,this.activationInfo.chainId,D,this.activationInfo.depth+1,this.Config);else{let k=O.GetInvalidChainSegmentContent(this.id,this.activationInfo.chainId,D,this.activationInfo.depth+1,this.Config);O.SendInvalidChainSegmentContent(this.id,k)}}this.TargetUrlDetector.DetectTargetUrl(1e3,this.onTargerUrlDetected.bind(this))}}onTargerUrlDetected(){if(!this.contentSenderTimer){let k=n.GetRandomIntInRange(0,200);this.contentSenderTimer=setTimeout(this.SendContent.bind(this),k)}}SendContent(){O.PrepareContent(this.fullIdStr,document,O.GetAbsoluteCoordinates(this.activationInfo)),O.RemoveInjectedJs(this.fullIdStr,document);let k=document.querySelector("html");if(!k)return;let E=k.outerHTML;if(E.length){let k=x.EmptyMessage;k.type=L.MESSAGE_TYPE_IFRAME_CONTENT,k.from=this.id,k.to="bg",k.content={isValid:!0,headerInfo:this.activationInfo.headerInfo,contentFinal:r.encode(E),targetUrl:this.TargetUrlDetector.FrameTargetUrl},n.IsOnChromeRuntime()&&chrome.runtime.sendMessage(k).catch((()=>{}))}}onGotChainActivationResponse(){}onGotContentMes(){}onContentInputsDetected(){this.IframesIO.SendInputsDetected()}onContentRedirectsDetected(){this.IframesIO.SendRedirectDetected()}static SetBisId(k,E,D){E&&(E.bis_id=D),k&&(k.bis_id=D),k.body&&k.body.setAttribute&&k.body.setAttribute("bis_body_id",D)}static RemoveInjectedJs(k,E){try{let k=E.head.querySelectorAll("script[bis_script]");if(k&&k.length)for(let E=0;E<k.length;E++)k[E].remove()}catch(k){}}static GetAbsoluteCoordinates(k){return{x:k.headerInfo.size.abs_x,y:k.headerInfo.size.abs_y}}static PrepareContent(k,E,D){for(var r=n.QuerySelectorAll(E,"*:not(html):not(script):not(head):not(meta):not(link):not(title):not(style):not(param)"),x=0;x<r.length;x++){var L=r[x];if(L)try{var Q=!1,M=window.getComputedStyle(L).backgroundImage;if(M&&M.length&&"none"!=M&&M.includes("url")&&(M=M.replace(/"/g,"'"),Q=!0),L.hasAttribute("style")){var A=L.getAttribute("style");A&&L.setAttribute&&(A=A.replace(/"/g,"'"),L.setAttribute("style",A),Q&&(L.style.cssText+="background-image: "+M+";",L.setAttribute("bis_label","style")))}else Q&&L.setAttribute&&(L.setAttribute("style","background-image: "+M+";"),L.setAttribute("bis_label","style"));try{if(L.attributes&&L.attributes.length)for(var T=0;T<L.attributes.length;T++)L.attributes[T]&&L.attributes[T].value&&L.attributes[T].value.length&&"src"!==L.attributes[T].name&&L.attributes[T].value.includes('"')&&(L.attributes[T].value=L.attributes[T].value.replace(/"/g,"'"))}catch(k){}n.SetFullSizeToElement(L,D)}catch(k){}}}static ExtractContent(k,E){return E.document.querySelector("html").outerHTML}static GetFrameHeaderInfo(k,E,D){let n={depth:D,chainId:k,frameId:E.id,src:E.src,size:JSON.parse(E.getAttribute("bis_size")),bisId:E.getAttribute("bis_id")};return 0===D&&(n.topHeaderContent=r.encode(E.outerHTML)),n}static SendActivationMesToFrame(k,E,D,Q,M){let T=!1;try{const s=document.querySelector("body"),m=self===top?0:s?+s.getAttribute("bis_frame_id"):null;let B="";if(M&&M.GetConfigEncoded&&(B=M.GetConfigEncoded()),D){let s,X=x.EmptyMessage;try{s=D.contentWindow&&Object.keys(D.contentWindow).includes("origin")?D.contentWindow.origin:D.src}catch(k){s=D.src}X.type=L.MESSAGE_TYPE_CHAIN_ACTIVATION,X.from=k,X.to="fr",X.content={chainId:E,depth:Q,headerInfo:O.GetFrameHeaderInfo(E,D,Q),configEncoded:B,targetUrlCandidates:[]};let h=x.EmptyMessage;if(h.type=L.MESSAGE_TYPE_HEADER_INFO_TO_STORAGE,h.from=k,h.to="bg",h.content={chainId:E,depth:Q,frameId:m,headerInfo:O.GetFrameHeaderInfo(E,D,Q)},n.IsOnChromeRuntime()&&chrome.runtime.sendMessage(h).catch((()=>{})),n.IsIframeSecure(D)){if(D.contentWindow&&D.contentWindow.postMessage)try{D.contentWindow.postMessage(X,s)}catch(k){}}else{try{let E=A.DetectTargetUrlFromWindowObj(k,D.contentWindow,M);E.length&&(X.content.targetUrlCandidates=E)}catch(k){}D.contentWindow.document.body.setAttribute&&D.contentWindow.document.body.setAttribute("bis_activation",r.encode(JSON.stringify(X)))}T=!0}}catch(k){}return T}static GetInvalidChainSegmentContent(k,E,D,x,L){let Q={},M=!1,T=O.GetFrameHeaderInfo(E,D,x),s={x:T.size.x,y:T.size.y};try{let m=n.QuerySelectorAll(D.contentWindow.document,"iframe, frame");if(0===m.length)M=!0;else{M=!1;for(let D=0;D<m.length;D++)n.SetFullSizeToElement(m[D],s),n.GenerateAndSetBisIdToFrame(m[D]),n.SetBisDepth(m[D],x+1),O.SendActivationMesToFrame(k,E,m[D],x+1,L)}O.PrepareContent(k,D.contentWindow.document,s),Q.isValid=!1,Q.isChainCompleted=M,Q.headerInfo=T,Q.contentFinal=r.encode(O.ExtractContent(k,D.contentWindow)),Q.targetUrl=A.DetectTargetUrlFromWindowObj(k,D.contentWindow,L)}catch(k){}return Q}static SendInvalidChainSegmentContent(k,E){if(E){let D=x.EmptyMessage;D.type=L.MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT,D.from=k,D.to="bg",D.content=E,n.IsOnChromeRuntime()&&chrome.runtime.sendMessage(D).catch((()=>{}))}}InjectJs(){if(document.querySelector('script[bis_script="display"]'))return;let k=document.createElement("script"),E=document.querySelector("head");this.setAttributes(k),E&&E.appendChild(k)}setAttributes(k){const E=n.getURL("../executors/frame.js");k.setAttribute("bis_use","true"),k.setAttribute("bis_script","display"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("bis_id",this.id),k.src=E}}k.exports=O},4430:(k,E,D)=>{const r=D(8384),n=D(2880),x=D(1568),L=D(9346),Q=D(3870),M=D(5364);k.exports=class extends L{constructor(k,E,D,r){super(k),this.Config=E,this.HTML5AdsConfig=this.Config.Html5AdsConfig,this.IOManager=D,this.IOManager.onGotHTML5CandidatesExtractionStatusesCallback=this.onGotHTML5CandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=r,this.topFramesCandidates=[],this.onDetectedCallback=null,this.chainIdCounter=0,this.maxTriesForPreciseAds=this.HTML5AdsConfig.PRECISE_ADVERTISING_IDENTIFIERS.MAX_TRIES_FIND_ADS}ActivateDetector(){this.Activated(),this.sequentialDetection().catch((()=>{}))}async sequentialDetection(){let k=await this.asyncStartDetectPreciseAds();this.startDetectCandidates(k)}startDetectCandidates(k){k?setInterval(this.startDetectPreciseAds.bind(this),600):setTimeout(this.sequentialDetection.bind(this),500)}startDetectPreciseAds(){this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter();let k=this.detectByQuerySelectors();if(!k.length)return void this.startDetectHTML5AdsCandidates();let E=0;for(let D=0;D<k.length;D++){const r=k[D];r.setAttribute&&(r.setAttribute(x.ATTRIBUTE_BIS_PRECISE_AD,1),this.buildCandidateObject(r,!0),this.addRedBorderForCandidates(r),E++,this.AdBlockerAgent.IsEnabled()&&this.HideElement(r))}this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),this.startToProcessCandidates(E),this.startDetectHTML5AdsCandidates()}asyncStartDetectPreciseAds(){return new Promise((k=>{this.AdBlockerAgent.IsEnabled()&&this.ClearHiddenCounter(),this.maxTriesForPreciseAds<=0&&(this.maxTriesForPreciseAds--,k(!0));let E=this.detectByQuerySelectors();if(!E.length)return k(!1),void this.maxTriesForPreciseAds--;let D=0;for(let k=0;k<E.length;k++){const r=E[k];r.setAttribute&&(r.setAttribute(x.ATTRIBUTE_BIS_PRECISE_AD,1),this.buildCandidateObject(r,!0),this.addRedBorderForCandidates(r),D++,this.AdBlockerAgent.IsEnabled()&&this.HideElement(r))}this.AdBlockerAgent.IsEnabled()&&this.AdBlockerAgent.SetHiddenAmount(this.HiddenAmount),this.maxTriesForPreciseAds--,this.startToProcessCandidates(D),k(E.length>0)}))}detectByQuerySelectors(){const k=this.HTML5AdsConfig.PRECISE_ADVERTISING_IDENTIFIERS.QUERY_SELECTORS;let E=[];for(let D of k){let k=Array.from(n.QuerySelectorAll(document,`${D}:not([${x.ATTRIBUTE_BIS_PRECISE_AD}]):not([${x.ATTRIBUTE_BIS_SIZE}])`));k.length&&(E=E.concat(...k))}return E}startDetectHTML5AdsCandidates(){let k=n.QuerySelectorAll(document,this.HTML5AdsConfig.QUERIES.IFRAMES_COLLECTION),E=0;if(k.length){for(let D=0;D<k.length;D++){const r=k[D];if(r.getAttribute(x.ATTRIBUTE_BIS_PRECISE_AD))continue;let L=r.src?r.src.toLowerCase():r.src;this.preCheckFrameContent(r)&&(n.IsInFilterList(this.Config.BlacklistIframeSrc,L)||n.IsInFilterList(this.Config.BlacklistIframeId,r.id)?n.SetFullSizeToElement(r):!this.IsFrameFromSite(L)||n.IsInFilterList(this.Config.WhitelistCandidatesUrlKeyWords,L)?(this.buildCandidateObject(r,!1),E+=1,this.addRedBorderForCandidates(r)):n.SetFullSizeToElement(r))}E>0&&this.startToProcessCandidates(E)}}startToProcessCandidates(k){M.SendHtml5CandidatePlacements(this.id,k,null);for(let k=0;k<this.topFramesCandidates.length;k++)this.topFramesCandidates[k].status===x.CANDIDATE_PROCESS_STATUS_DETECTED&&(this.topFramesCandidates[k].status=x.CANDIDATE_PROCESS_STATUS_START_PROCESSING,setTimeout((()=>{this.ActivateCandidateProcessing(this.topFramesCandidates[k])}),3e3+n.GetRandomIntInRange(0,500)))}buildCandidateObject(k,E){let D=k.getBoundingClientRect();if(!E&&D.width<=70&&D.height<=40&&D.height>=1100)return;n.SetFullSizeToElement(k);let r=n.GenerateAndSetBisIdToFrame(k);this.chainIdCounter=this.chainIdCounter+1;let L={ticketId:this.TicketId,pageUrl:this.PageUrl,bisId:r,chainId:this.chainIdCounter,detectionTime:(new Date).getTime(),processingStartTime:null,frame:k,isSecure:n.IsIframeSecure(k),hasContentScript:n.IsIframeHasContentScript(k),status:x.CANDIDATE_PROCESS_STATUS_DETECTED};this.topFramesCandidates.push(L),n.SetBisDepth(k,0),n.SetBisChainId(k,this.chainIdCounter)}preCheckFrameContent(k){if(!k.contentDocument)return!0;const E=k.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.ACCEPTABLE_NODES_IN_IFRAME),D=k.contentDocument.querySelectorAll(this.HTML5AdsConfig.QUERIES.UNACCEPTABLE_NODES_IN_IFRAME);let r=!1;return E.length&&!D.length&&(r=!0),r}onGotHTML5CandidatesExtractionStatuses(k){if(k&&k.length)for(let E=0;E<k.length;E++)if(this.AdBlockerAgent.IsEnabled()&&k[E].extractionStatus.filteredOut)this.UnhideElement(n.QuerySelector(document,`iframe[bis_chainid="${k[E].chainId}"]`));else if(r.Gk&&r.Vk){let D=n.QuerySelector(document,`iframe[bis_chainid="${k[E].chainId}"]`);D&&n.UpdateCandidateStatusBorderColor(D,k[E].extractionStatus)}}ActivateCandidateProcessing(k){if(k&&k.status&&k.status===x.CANDIDATE_PROCESS_STATUS_START_PROCESSING){k.processingStartTime=(new Date).getTime(),k.status=x.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED;let E=n.IsIframeSecure(k.frame);k.isSecure!==E&&(k.isSecure=E);let D=n.IsIframeHasContentScript(k.frame);if(k.hasContentScript!==D&&(k.hasContentScript=D),k.hasContentScript)Q.SendActivationMesToFrame(this.id,k.chainId,k.frame,0,this.Config);else{let E=Q.GetInvalidChainSegmentContent(this.id,k.chainId,k.frame,0,this.Config);if(r.Gk&&r.Vk&&E.isChainCompleted){let D={fullContentExtracted:!1,targetUrlExtracted:!1,sentToBackend:!1};E.contentFinal&&E.contentFinal.length&&(D.fullContentExtracted=!0),E.targetUrl&&E.targetUrl.length&&(D.targetUrlExtracted=!0),n.UpdateCandidateStatusBorderColor(k.frame,D)}Q.SendInvalidChainSegmentContent(this.id,E)}}}GetPrebuildInfo(){let k=[],E=(new Date).getTime();for(let D=0;D<this.topFramesCandidates.length;D++)this.topFramesCandidates[D].status===x.CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED&&(this.topFramesCandidates[D].status=x.CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT,k.push({ticketId:this.topFramesCandidates[D].ticketId,pageUrl:this.topFramesCandidates[D].pageUrl,bisId:this.topFramesCandidates[D].bisId,chainId:this.topFramesCandidates[D].chainId,timeAfterDetection:E-this.topFramesCandidates[D].detectionTime,timeAfterProcessingStart:E-this.topFramesCandidates[D].processingStartTime}));return k}IsFrameFromSite(k){let E=!1,D=k;if(D.length){let r=D.indexOf("?");r>0?D=k.substring(0,r):(r=D.indexOf("#"),r>0&&(D=k.substring(0,r))),-1!==D.indexOf(window.location.host)?E=!0:n.isValidUrl(D)||"about:blank"===D||(E=!0)}return E}}},4503:(k,E,D)=>{const r=D(6882),n=D(1568),x=D(2880),L=D(9358),Q=D(1104);k.exports=class{constructor(k){this.id=k,this.init=!1,this.AtrMessageListeners=[],this.webNavigationIframes=[],this.chainActivationListernerIntervalId=null,this.onWindowEmbeddedTargetUrlDetectionCallback=null,this.onGotContentMesCallback=null,this.onGotChainActivationCallback=null,this.onGotVideoXHRTrafficCallback=null,this.chainActivationEventProcessed=!1,this.processedMessages=[]}IsInit(){return this.init}get Context(){return this}SetId(k){this.id=k,this.AtrMessageListener&&this.AtrMessageListener.SetId(k)}Init(){this.init||(this.init=!0,window.addEventListener("message",(k=>{try{var E=k.data;this.ProcessWindowMessage(E)}catch(k){}}),!1),x.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener((k=>{var E=k;r.IsValid(E)&&(E.type===n.MESSAGE_TYPE_GET_FRAME_CONTENT?E.multiTo.includes(this.id)&&(this.webNavigationIframes=E.content,this.onGotContentMesCallback&&this.onGotContentMesCallback()):E.type===n.MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK&&E.multiTo.includes(this.id)&&this.ActivateWindowClickTargetUrlDetection(E.content))})),this.chainActivationListernerIntervalId=setInterval((()=>{try{if(!this.chainActivationEventProcessed&&document&&document.body){let k=document.body.getAttribute("bis_activation");if(k&&k.length){let E=L.decode(k);if("{"===E[0]&&"}"===E[E.length-1]){let k=JSON.parse(E);r.IsValid(k)&&k.type===n.MESSAGE_TYPE_CHAIN_ACTIVATION&&(this.chainActivationEventProcessed=!0,clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null,document.body.setAttribute("bis_activation","done"),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(k.content))}}document.body.removeAttribute("bis_activation")}}catch(k){}}),500))}ProcessWindowMessage(k){r.IsValid(k)&&k.posdHash&&!this.processedMessages.includes(k.posdHash)&&(k.posdHash&&k.posdHash.length&&this.processedMessages.push(k.posdHash),k.type===n.MESSAGE_TYPE_CHAIN_ACTIVATION?(this.chainActivationListernerIntervalId&&(clearInterval(this.chainActivationListernerIntervalId),this.chainActivationListernerIntervalId=null),this.onGotChainActivationCallback&&this.onGotChainActivationCallback(k.content)):k.type===n.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND?this.onWindowEmbeddedTargetUrlDetectionCallback&&this.onWindowEmbeddedTargetUrlDetectionCallback(k.content.targetUrlList):k.type===n.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND?(k.to="bg",x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(k).catch((()=>{}))):k.type===n.MESSAGE_TYPE_VIDEO_XHR_CANDIDATE&&this.onGotVideoXHRTrafficCallback&&this.onGotVideoXHRTrafficCallback(k.content))}ActivateWindowEmbeddedTargetUrlDetection(k){try{this.onWindowEmbeddedTargetUrlDetectionCallback=k;let D=r.EmptyMessage;D.type=n.MESSAGE_TYPE_GET_WINDOW_TARGET_URL,D.from=this.id,D.to=this.id+"_w",window.postMessage&&window.postMessage(D,"*");var E=new Q(this.id,this.ProcessWindowMessage.bind(this));E.ActivateMesToFrameContentListener(n.MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND),this.AtrMessageListeners.push(E)}catch(k){}}ActivateWindowClickTargetUrlDetection(k){try{let D=r.EmptyMessage;D.type=n.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL,D.from=this.id,D.to=this.id+"_w",D.content=k,window.postMessage&&window.postMessage(D,"*");var E=new Q(this.id,this.ProcessWindowMessage.bind(this));E.ActivateMesToFrameContentListener(n.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL),this.AtrMessageListeners.push(E)}catch(k){}}SendInputsDetected(){let k=r.EmptyMessage;k.type=n.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS,k.from=this.id,k.to="bg",x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(k).catch((()=>{}))}SendRedirectDetected(){let k=r.EmptyMessage;k.type=n.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS,k.from=this.id,k.to="bg",x.IsOnChromeRuntime()&&chrome.runtime.sendMessage(k).catch((()=>{}))}}},9700:(k,E,D)=>{D(1568);const r=D(2880);k.exports=class{#k;#E;#D;constructor(k){this.#k=k}injectDetector(k){if(this.#E=k.className,this.#D=k.fileName,document.head&&!this.#r()){let E=document.createElement("script");this.#n(E),k.injectBeforeFirstChild?document.head.insertBefore(E,document.head.firstChild):document.head.appendChild(E)}}#n(k){const E=r.getURL(`../executors/${this.#D}.js`);k.setAttribute("bis_use","true"),k.setAttribute("id",chrome.runtime.id),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}#r(){let k=document.querySelector("head");return Array.from(k.querySelectorAll("script")).map((k=>k.src)).some((k=>k.includes(`executors/${this.#D}.js`)))}}},3129:(k,E,D)=>{const r=D(2880),n=D(1568),x=D(7584),L=D(1153),Q=D(5364),M=D(3522),A=D(3326),T=D(1245),s=D(7376);k.exports=class{constructor(){this.id=null,this.tabId=null,this.init=!1,this.panalyticsId="",this.adsCandidatesDetectionInterval=null,this.ticket=null,this.cycleNumber=0,this.RefreshTicket(),Q.SendNewPageCreatedTicket(r.ToJSON(this.ticket))}RefreshTicket(){this.pageUrl=document.location.href,this.ticketId=r.GenerateUUID(),this.cycleNumber=0,this.ticket=x.GetSingleOutTicket(this.panalyticsId,this.ticketId,this.tabId),this.init&&this.AdsManager&&this.AdsManager.PageRefreshed(this.pageUrl,this.ticketId)}Init(){this.init||Q.SendInitMes({ticketId:this.ticketId,url:this.pageUrl},this.onGetInitConfig.bind(this))}onGetInitConfig(k){return k.activeStatus?this.init?null:(this.init=!0,this.tabId=k.tabId,this.id="mp_"+k.tabId,this.panalyticsId=k.panalyticsId,this.ticket.tabId=this.tabId,this.ticket[n.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.Config=new T(this.id,k.configuration),this.IOManager=new Q(this.id,this.Config),this.IOManager.onTabUrlChanged=this.onTabUrlChanged.bind(this),this.IOManager.manualSendTicket=this.prepareAndSendTicket.bind(this),this.IOManager.Init(),this.AdBlockerAgent=new M(this.id,this.IOManager),this.AdBlockerAgent.Init(k.adBlockerStatus,k.excludeList,k.tabId),this.AdsManager=new L(this.id,this.Config,this.IOManager,this.AdBlockerAgent),this.PanelsRegulator=new s(this.id),this.PanelsRegulator.Init(this.AdBlockerAgent,this.onGotRegulatorRespond.bind(this)),void(k.activeAdBlockInspectorAgent&&(this.AdBlockInspectorAgent=new A(this.id),this.AdBlockInspectorAgent.Init(this.Config.GetAdBlockInspectorConfig())))):null}onGotRegulatorRespond(k){return!!this.init&&(!!k&&(this.adsCandidatesDetectionInterval=setInterval(this.onAdsCandidatesDetected.bind(this),1e4),this.AdsManager.ActivateAdsdetectors(),Q.SendNewPageCreatedTicket(r.ToJSON(this.ticket)),void Q.SendPanelRegulatorResult(k)))}onTabUrlChanged(k){return!(!k?.newUrl||!k?.initedTicketId)&&((k.newUrl!==this.pageUrl||k.initedTicketId===this.ticketId)&&(this.RefreshTicket(),Q.SendSinglePageReinitMes({ticketId:this.ticketId,url:this.pageUrl}),void Q.SendNewPageCreatedTicket(r.ToJSON(this.ticket))))}onAdsCandidatesDetected(){return!!this.init&&(r.IsOnChromeRuntime()?!!this.panalyticsId.length&&void this.prepareAndSendTicket():(this.adsCandidatesDetectionInterval&&clearInterval(this.adsCandidatesDetectionInterval),!1))}prepareAndSendTicket(){this.cycleNumber=this.cycleNumber+1,this.ticket[n.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId,this.ticket.windowSize=r.GetWindowSize(),this.ticket.firstVisit=this.cycleNumber<=1,this.ticket.adCandidatesHtml5=this.AdsManager.GetHtml5CandidatesPrebuildInfo(),this.IOManager.SendTicket(r.ToJSON(this.ticket))}}},7376:(k,E,D)=>{const r=D(8384),n=D(1568),x=D(2880),L=D(9358);k.exports=class{constructor(k){this.id=k,this.init=!1,this.extensionId=""+chrome.runtime.id,this.AdBlockerAgent=null,this.onInitCallback=null}Init(k,E){!this.init&&k&&(this.onInitCallback=E,this.init=!0,this.AdBlockerAgent=k,document.readyState===n.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.ActivateRegulator.bind(this)):document.readyState!==n.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==n.DOCUMENT_READYSTATE_COMPLETE||this.ActivateRegulator())}ActivateRegulator(){this.RegisterPanel(),setTimeout(this.Regulate.bind(this),500)}Regulate(){let k=!0,E="",D=[];try{let r=document.body.getAttribute("bis_register");if(r&&r.length){D=JSON.parse(L.decode(r));for(let k=0;k<D.length&&0===E.length;k++)D[k].master&&(E=D[k].extensionId);E.length&&this.extensionId!==E&&(k=!1)}}catch(k){}this.onInitCallback&&this.onInitCallback(k)}GetPanelScore(){let k=r.Zk.split("."),E=1e4*parseInt(k[0])+100*parseInt(k[1])+parseInt(k[2]),D=this.AdBlockerAgent.GetStatus();return x.IsFacebookUrl(document.location.href)?D[n.ADBLOCKER_FOR_FACEBOOK]===n.ADBLOCKER_STATUS_ENABLED&&(E*=10):x.IsTwitterUrl(document.location.href)?D[n.ADBLOCKER_FOR_TWITTER]===n.ADBLOCKER_STATUS_ENABLED&&(E*=10):x.IsRedditUrl(document.location.href)?D[n.ADBLOCKER_FOR_REDDIT]===n.ADBLOCKER_STATUS_ENABLED&&(E*=10):D[n.ADBLOCKER_FOR_DISPLAY]===n.ADBLOCKER_STATUS_ENABLED&&(E*=10),E}UpdateRegister(k){let E={master:!0,extensionId:this.extensionId,adblockerStatus:this.AdBlockerAgent.GetStatus(),version:r.Zk,score:this.GetPanelScore()},D=!0;for(let r=0;r<k.length&&D;r++)k[r].extensionId===this.extensionId&&(D=!1,k[r]=E);D&&k.push(E)}ChooseWinner(k){if(k&&k.length)if(1===k.length);else{let E=0,D=k[E].score;for(let r=0;r<k.length;r++)k[r].master=!1,k[r].score>D&&(D=k[r].score,E=r);k[E].master=!0}}RegisterPanel(){try{let k=[],E=document.body.getAttribute("bis_register");E&&E.length&&(k=JSON.parse(L.decode(E))),this.UpdateRegister(k),this.ChooseWinner(k),document.body.setAttribute("bis_register",L.encode(JSON.stringify(k)))}catch(k){}}}},7235:(k,E,D)=>{const r=D(2880),n=D(8384),x=D(9346),L=D(5364),Q=D(1568);k.exports=class extends x{constructor(k,E,D,r){super(k),this.Config=E,this.skinAdsConfig=E.config.skinAdsConfig,this.IOManager=D,this.IOManager.onGotSkinAdCandidatesExtractionStatusesCallback=this.onGotSkinAdCandidatesExtractionStatuses.bind(this),this.AdBlockerAgent=r}ActivateDetector(){this.DetectCandidates(),setTimeout((()=>{this.DetectCandidates()}),500),setInterval((()=>{this.DetectCandidates()}),1e3)}SendCandidatesToBackground(){this.Candidates.length&&L.SendAdCandidates(this.id,this.Candidates,Q.MESSAGE_TYPE_CANDIDATES_DATA_SKINADS,null)}DetectCandidates(){this.ClearCandidates(),this.GetSkinAdFromBodyBackground(),0==this.CandidatesCount&&this.GetSkinAdFromDivBackground(),this.SendCandidatesToBackground()}GetSkinAdFromBodyBackground(){var k,E={source:[],targetUrl:[]},D=document.body;if(D&&!D.hasAttribute("bis_skin_checked")&&(k=r.GetUrlFromStyleStr(window.getComputedStyle(D).backgroundImage)),k&&r.isValidUrl(k)){D.setAttribute("bis_skin_checked","1");var n={type:"single",src:k,size:r.GetFullElementSize(D)};E.source.push(n);for(var x=r.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION),L=0;L<x.length;L++){var Q=x[L];Q.setAttribute&&Q.setAttribute("bis_skin_checked","1");var M=Q.getBoundingClientRect(),A=Q.firstElementChild?Q.firstElementChild.getBoundingClientRect():null;Q.href&&(M.width>50&&M.height>=100&&0==M.left||A&&A.width>50&&A.height>=100&&0==A.left)&&r.isValidUrl(Q.href)&&!E.targetUrl.includes(Q.href)&&E.targetUrl.push(Q.href),this.findElementsByHref(E.targetUrl,Q)}}E.source.length&&E.targetUrl.length&&this.AddCandidate(E)}GetSkinAdFromDivBackground(){let k={source:[],targetUrl:[]},E=!1,D=r.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_DIV_COLLECTION);for(let n=0;n<D.length&&!E;n++){let x=D[n];x.setAttribute&&x.setAttribute("bis_skin_checked","1");let L=x.getBoundingClientRect();if(L.width>50&&L.height>500&&0==L.left){let D=r.GetUrlFromStyleStr(window.getComputedStyle(x).backgroundImage);if(D&&r.isValidUrl(D)){let n={type:"single",src:D,size:r.GetFullElementSize(x)};k.source.push(n),E=!0}}}if(E){let E=r.QuerySelectorAll(document,this.skinAdsConfig.QUERIES.FULL_HREF_COLLECTION);for(let D=0;D<E.length;D++){let n=E[D];n.setAttribute&&n.setAttribute("bis_skin_checked","1");let x=n.getBoundingClientRect();n.href&&0==x.left&&(x.width>50&&x.height>500||x.width>500&&x.height>50)&&r.isValidUrl(n.href)&&!k.targetUrl.includes(n.href)&&k.targetUrl.push(n.href)}}k.source.length&&k.targetUrl.length&&this.AddCandidate(k)}findElementsByHref(k,E){const D=E.href;k.includes(D)&&(this.SetBorderToCandidate(E),E.setAttribute("bis_skin_element","1"))}SetBorderToCandidate(k){const E=k.getBoundingClientRect();k&&(E.width>1&&E.height>1?k.style.cssText+="border: 6px solid red !important; display: block;":k.firstElementChild.style.cssText+="border: 6px solid red !important; display: block;")}onGotSkinAdCandidatesExtractionStatuses(k){if(n.Gk&&n.Vk&&k&&k.length)for(let E=0;E<k.length;E++){let D=r.QuerySelectorAll(document,k[E].query);D&&D.forEach((D=>{D&&r.UpdateCandidateStatusBorderColor(D,k[E].extractionStatus)}))}}}},7584:(k,E,D)=>{const r=D(8384),n=D(2880),x=D(1568);k.exports=class{static GetSingleOutTicket(k,E,D){let L={tabId:D,ticketFormatVersion:3,partnerId:r.hk,distributorId:r.yk,ticketId:E,firstVisit:!1,url:document.location.href,userAgent:navigator.userAgent,creationTime:n.GetCurrentDataTimeStr(),windowSize:n.GetWindowSize(),timeOnPage:0,adCandidatesSkinAd:[],adCandidatesBanner:[],adCandidatesHtml5:[],adsFacebook:[],adsTwitter:[],adsReddit:[],adsPinterest:[],adsInstagram:[],adsLinkedin:[],adsTiktok:[],aiSessions:[],adCandidatePlacements:{skinAd:0,banner:0,html5:0,facebook:0,twitter:0,reddit:0,pinterest:0,tiktok:0,instagram:0,linkedin:0},videoTraffics:[],activeAdBlocker:!1};L[x.TICKET_ALIAS_PANALYTICSID]=k,L[x.TICKET_ALIAS_PINSTANCEID]=r.Xk;let Q=n.GetBaseHref();""!==Q&&(L.base=Q);let M=chrome.runtime.getManifest();return L.extensionVersion=M.version,L.panelosVersion=r.Zk,L}}},855:(k,E,D)=>{const r=D(1568),n=D(9358),x=D(2880),L=D(1936),Q=D(2938),M=D(8940),A=D(5364);k.exports=class{constructor(k,E,D){this.id=k,this.Config=E,this.IOManager=D,this.onDetectVideoHarCallback=null,this.VideoTrafficValidator=new M(this.id,this.Config),this.VideoTrafficDetector=new Q(this.id),this.VideoTrafficDetector.InjectXhrDetector(this.Config),this.IOManager.onGotVideoXHRTrafficCallback=this.ProcessVideoXHRTraffic.bind(this)}ActivateDetector(){this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS()}PageRefreshed(k,E){x.IsYouTubeUrl(k)||(this.CheckVideoTrafficInHTML(),this.CheckVideoTrafficInJS())}CheckVideoTrafficInHTML(){let k=new L(r.VIDEO_TRAFFIC_SOURCE_HTML,"GET",window.location.href,"text/html",document.documentElement.outerHTML),E=this.VideoTrafficValidator.Validate(k);E&&this.SendVideoTraffic(k,E)}CheckVideoTrafficInJS(){let k=x.QuerySelectorAll(document,"script");for(let E=0;E<k.length;E++){let D=new L(r.VIDEO_TRAFFIC_SOURCE_JS,"GET",k[E].src,"text/javascript",k[E].innerHTML),n=this.VideoTrafficValidator.Validate(D);n&&this.SendVideoTraffic(D,n)}}ProcessVideoXHRTraffic(k){if(L.IsXHRvalid(k)){let E=new L(r.VIDEO_TRAFFIC_SOURCE_XHR,k.requestMethod,k.url,k.type,k.content,k.encodedPostBody),D=this.VideoTrafficValidator.Validate(E);D&&this.SendVideoTraffic(E,D)}}SendVideoTraffic(k,E){if(k&&E){let D={requestMethod:k.GetRequestMethod(),url:k.GetUrl(),contentType:k.GetType(),mediaType:E.name,alias:E.alias};if(k.IsEncodedPostBodyExist()&&(D.encodedPostBody=k.GetEncodedPostBody()),E.reduceSizeFilter&&E.reduceSizeFilter.active){let r;if(null!==(r=M.CreateRegExp(E.reduceSizeFilter.reducePattern).exec(k.GetContent()))&&r.length>0&&Math.max(...E.reduceSizeFilter.regResIndexes)<r.length){let k=r.filter(((k,D)=>E.reduceSizeFilter.regResIndexes.includes(D)));D.encodedText=n.encode(k.join(" "))}}else D.encodedText=n.encode(k.GetContent());A.SendVideoHar(this.id,D)}}}},1936:(k,E,D)=>{const r=D(9358);k.exports=class{constructor(k,E,D,r,n,x=null){this.trafficSource=k,this.requestMethod=E,this.url=D,this.type=r,this.content=n,this.SetEncodedPostBody(x)}static IsXHRvalid(k){return k&&k.hasOwnProperty("requestMethod")&&k.hasOwnProperty("url")&&""!==k.url}SetEncodedPostBody(k){k&&"string"==typeof k&&k.length>0&&(this.encodedPostBody=r.encode(k))}GetEncodedPostBody(){return this.encodedPostBody?this.encodedPostBody:null}IsEncodedPostBodyExist(){return!!this.encodedPostBody}GetTrafficSource(){return this.trafficSource}GetRequestMethod(){return this.requestMethod}GetUrl(){return this.url}GetType(){return this.type}GetContent(){return this.content}SetContent(k){this.content=k}SetUrl(k){this.url=k}}},2938:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k){this.id=k}InjectXhrDetector(k){if(document.head){let E=document.createElement("script");this.setAttributes(E,k),document.head.appendChild(E)}}setAttributes(k,E){const D=r.getURL("../executors/traffic.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("data-bis-config",JSON.stringify(E.config.filterLists.blacklistIframeSrc)),k.src=D}}},8940:(k,E,D)=>{const r=D(1568);class n{constructor(k,E){this.id=k,this.Config=E}Validate(k){let E=[],D=!1;if(k&&(k.GetTrafficSource()===r.VIDEO_TRAFFIC_SOURCE_HTML?(E=this.Config.GetVideoValidatorsForHTML(),D=!0):k.GetTrafficSource()===r.VIDEO_TRAFFIC_SOURCE_XHR?(E=this.Config.GetVideoValidatorsForXHR(),D=!0):k.GetTrafficSource()===r.VIDEO_TRAFFIC_SOURCE_JS&&(E=this.Config.GetVideoValidatorsForJS(),D=!0),D))for(let D of E){if(this.ValidateUseConfiguration(k,D))return this.specificFilterCandidate(k,D)}return!1}ValidateUseConfiguration(k,E){const D=Object.keys(E);let r=[];for(let k of D)-1!==k.indexOf("Pattern")&&r.push(k);let x=0,L={domainPattern:"GetUrl",mimePattern:"GetType",contentPattern:"GetContent"};for(let D of r)try{let r=n.CreateRegExp(E[D]),Q=L[D];x+=r.test(k[Q]())?1:0}catch(k){}return x===r.length}static CreateRegExp(k){let E=k.replace(/.*\/([gimy]*)$/,"$1"),D=k.replace(new RegExp("^/(.*?)/"+E+"$"),"$1");return new RegExp(D,E)}specificFilterCandidate(k,E){return!(!k.IsEncodedPostBodyExist()&&"YT_FORCING_KEY"===E.alias)&&E}}k.exports=n},1368:(k,E,D)=>{const r=D(1568),n=D(2880),x=D(100),L=D(9587),Q=D(778),M=D(6912),A=D(8065),T=D(8476),s=D(8375),O=D(6311);k.exports=class{#k;#x;#L;#Q=null;constructor(k,E,D){switch(this.#k=k,this.#x=E,this.#L=D,!0){case n.isClaudeUrl(this.#L,E):this.#Q=new x(this.#k,this.#x);break;case n.isChatgptUrl(this.#L,E):this.#Q=new L(this.#k,this.#x);break;case n.isCopilotUrl(this.#L,E):this.#Q=new Q(this.#k,this.#x);break;case n.isPerplexityUrl(this.#L,E):this.#Q=new M(this.#k,this.#x);break;case n.isMetaUrl(this.#L,E):this.#Q=new A(this.#k,this.#x);break;case n.isDeepseekUrl(this.#L,E):this.#Q=new T(this.#k,this.#x);break;case n.isGeminiUrl(this.#L,E):this.#Q=new s(this.#k,this.#x);break;case n.isGrokUrl(this.#L,E):this.#Q=new O(this.#k,this.#x)}this.#M()}#M(){document.readyState===r.DOCUMENT_READYSTATE_LOADING?document.addEventListener("DOMContentLoaded",this.#A.bind(this)):document.readyState!==r.DOCUMENT_READYSTATE_INTERACTIVE&&document.readyState!==r.DOCUMENT_READYSTATE_COMPLETE||this.#A.apply(this)}#A(){this.#Q&&this.#Q.activateDetector()}pageRefreshed(k,E){}}},9587:(k,E,D)=>{const r=D(1568),n=D(9700);k.exports=class extends n{#k;#x={};#T={fileName:"chatgpt",className:"PosdChatgptMessagesCollector:Injector"};#s=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.Kk||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#T),this.#O())}#O(){this.#s||(this.#s=!0,chrome.storage.onChanged.addListener((k=>{for(let[E,{oldValue:D,newValue:n}]of Object.entries(k))if("panelAIFeatures"===E){window.postMessage({type:r.MESSAGE_TYPE_CHATGPT_PROTECTION_STATUS_RESPONSE,content:"on"===n},"*");break}})))}}},100:(k,E,D)=>{const r=D(9700);D(1568);k.exports=class extends r{#k;#x={};#T={fileName:"claude",className:"PosdClaudeMessagesCollector:Injector",injectBeforeFirstChild:!0};#m=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.bk||{}}activateDetector(){this.#m||(this.#m=!0,this.injectDetector(this.#T))}}},778:(k,E,D)=>{const r=D(9700);D(1568);k.exports=class extends r{#k;#x={};#T={fileName:"copilot",className:"PosdCopilotMessagesCollector:Injector",injectBeforeFirstChild:!0};#m=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.ck||{}}activateDetector(){this.#m||(this.#m=!0,this.injectDetector(this.#T))}}},8476:(k,E,D)=>{D(1568);const r=D(9700);k.exports=class extends r{#k;#x={};#T={fileName:"deepseek",className:"PosdDeepseekMessagesCollector:Injector"};constructor(k,E){super(k),this.#k=k,this.#x=E.Rk||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#T))}}},8375:(k,E,D)=>{const r=D(1568),n=D(9700);k.exports=class extends n{#k;#x={};#T={fileName:"gemini",className:"PosdGeminiMessagesCollector:Injector"};#s=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.Rk||{},this.init=!1}activateDetector(){this.init||(this.init=!0,this.injectDetector(this.#T),this.#O())}#O(){this.#s||(this.#s=!0,chrome.storage.onChanged.addListener((k=>{for(let[E,{oldValue:D,newValue:n}]of Object.entries(k))if("panelAIFeatures"===E){window.postMessage({type:r.MESSAGE_TYPE_GEMINI_PROTECTION_STATUS_RESPONSE,content:"on"===n},"*");break}})))}}},6311:(k,E,D)=>{const r=D(9700),n=D(1568);k.exports=class extends r{#k;#x={};#T={fileName:"grok",className:"PosdGrokMessagesCollector:Injector",injectBeforeFirstChild:!0};#m=!1;#s=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.Nk||{}}activateDetector(){this.#m||(this.#m=!0,this.injectDetector(this.#T),this.#O())}#O(){this.#s||(this.#s=!0,chrome.storage.onChanged.addListener((k=>{for(let[E,{oldValue:D,newValue:r}]of Object.entries(k))if("panelAIFeatures"===E){window.postMessage({type:n.MESSAGE_TYPE_GROK_PROTECTION_STATUS_RESPONSE,content:"on"===r},"*");break}})))}}},8065:(k,E,D)=>{const r=D(9700);D(1568);k.exports=class extends r{#k;#x={};#T={fileName:"meta",className:"PosdMetaMessagesCollector:Injector"};#m=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.jk||{}}activateDetector(){this.#m||(this.#m=!0,this.injectDetector(this.#T))}}},6912:(k,E,D)=>{const r=D(9700);D(1568);k.exports=class extends r{#k;#x={};#T={fileName:"perplexity",className:"PosdPerplexityMessagesCollector:Injector",injectBeforeFirstChild:!0};#m=!1;constructor(k,E){super(k),this.#k=k,this.#x=E.ik||{}}activateDetector(){this.#m||(this.#m=!0,this.injectDetector(this.#T))}}},655:(k,E,D)=>{const r=D(2880),n=D(1568);k.exports=class{constructor(k,E,D){this.id=k,this.options=E,this.AdBlockerAgent=D,this.active=!1,this.lastDetectTime=r.GetCurrentTimestampMs()-1e3,this.activateDetectorTime=r.GetCurrentTimestampMs(),this.detectorInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.isObserverAlreadySet=!1,this.onScrollListenerHandler=null,this.onScrollListenerIsOn=!1,this.onScrollCallback=null}ActualizeDetector(){}ActivateMutationObserver(){}DeactivateMutationObserver(){}Detector(){}HideAd(k,E,D){}CheckIfAd(k){}CheckIfAdRendered(k){}ExtractAd(k){}ActivateDetector(){this.active||(this.activateDetectorTime=r.GetCurrentTimestampMs(),this.active=!0,this.options.firstDetectionAfterActivationTimeoutMs&&this.options.firstDetectionAfterActivationTimeoutMs>0&&setTimeout((()=>{this.DetectCandidates(n.AD_DETECTOR_INITIATOR_ACTIVATION)}),this.options.firstDetectionAfterActivationTimeoutMs),this.startIntervalDetectCandidates(n.AD_DETECTOR_INITIATOR_TIMER),this.options.useObserver&&this.IsActualByKeyWordInUrl&&(this.observerNodesListenerInterval=setInterval((()=>{this.observerNodesChecksAmount=this.observerNodesChecksAmount+1,this.ActivateMutationObserver(),(this.isObserverAlreadySet||this.observerNodesChecksAmount>this.options.observerNodesChecksMaxAmount)&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.activateOnScrollEvent())}),this.options.observerNodesCheckIntervalMs)))}DeactivateDetector(k){k===n.AD_DETECTOR_INITIATOR_URL&&(this.DeactivateMutationObserver(),(this.onScrollCallback||this.onScrollListenerIsOn)&&(window.removeEventListener("scroll",this.onScrollCallback),this.onScrollCallback=null,this.onScrollListenerIsOn=!1,this.onScrollListenerHandler&&(clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null))),this.detectorInterval&&(clearInterval(this.detectorInterval),this.detectorInterval=null),this.observerNodesListenerInterval&&(clearInterval(this.observerNodesListenerInterval),this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0),this.activateDetectorTime=r.GetCurrentTimestampMs(),this.lastDetectTime=r.GetCurrentTimestampMs()-1e3,this.active=!1}DetectCandidates(k,E){if(!this.ActualizeDetector()||!this.IsActualByKeyWordInUrl)return void this.checkLimits(k);let D=r.GetCurrentTimestampMs();r.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs?(this.checkLimits(k),E&&this.startIntervalDetectCandidates(k)):D-this.lastDetectTime>this.options.minTimeAfterLastDetectionMs&&(this.lastDetectTime=D,this.Detector())}get IsActualByKeyWordInUrl(){const k=this.options.urlInvalidKeyWord,E=this.options.urlValidationByKeyWord;if(!k&&!E)return!0;const D=window.location.href;let r=!!k&&k.some((k=>D.includes(k))),n=!E||D.includes(E);return!r&&n}checkLimits(k){return!this.options.maxActualizeDetectorWaitTimeMs||(!(r.GetCurrentTimestampMs()-this.activateDetectorTime>this.options.maxActualizeDetectorWaitTimeMs)||(this.DeactivateDetector(k),!1))}activateOnScrollEvent(){this.options.useOnScroll&&!this.onScrollListenerIsOn&&this.IsActualByKeyWordInUrl&&this.ActualizeDetector()&&(this.onScrollCallback=this.onScroll.bind(this),window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0)}onScroll(k){this.DetectCandidates(n.AD_DETECTOR_INITIATOR_SCROLL_EVENT),this.startIntervalDetectCandidates(n.AD_DETECTOR_INITIATOR_SCROLL_EVENT),window.removeEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!1,this.onScrollListenerHandler=setTimeout((()=>{window.addEventListener("scroll",this.onScrollCallback),this.onScrollListenerIsOn=!0,clearTimeout(this.onScrollListenerHandler),this.onScrollListenerHandler=null}),this.options.onScrollTimeout)}startIntervalDetectCandidates(k){this.detectorInterval||(this.detectorInterval=setInterval((()=>{this.DetectCandidates(k)}),this.options.detectionIntervalMs))}}},97:(k,E,D)=>{const r=D(8384),n=D(2880),x=D(9358),L=D(1568),Q=D(9346),M=D(5364),A=D(7678),T=D(6335),s=D(7948),O=D(1899),m=D(2300),B=D(1454);k.exports=class extends Q{constructor(k,E,D){super(k),this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.fbConfig=E.FacebookConfig,this.AdBlockerAgent=D,this.VideoTrafficDetector=new B(this.id),this.VideoTrafficDetector.InjectDetector()}onPageUrlChanged(k,E){this.available&&setTimeout((()=>{this.DeactivateDetectors(L.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetector(k){k===L.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.fbContent=document.querySelector(this.fbConfig.FB_CONTENT),this.fbContent&&(this.DetectorFeed=new T(this.id,this.fbConfig.FEED_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorFeed.HideAd=this.HideAd.bind(this),this.DetectorFeed.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorFeed.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorRightColumn=new O(this.id,this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorRightColumn.HideAd=this.HideAd.bind(this),this.DetectorRightColumn.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorRightColumn.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorWatch=new s(this.id,this.fbConfig.FEED_WATCH_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorWatch.HideAd=this.HideAd.bind(this),this.DetectorWatch.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorWatch.ExtractAd=this.ProcessFbCreative.bind(this),this.DetectorMarketplace=new m(this.id,this.fbConfig.MARKETPLACE_ADS_CONFIG.DETECTOR_OPTIONS,this.AdBlockerAgent,this.fbConfig),this.DetectorMarketplace.HideAd=this.HideAd.bind(this),this.DetectorMarketplace.CheckIfAdRendered=this.IsAdContentRendered.bind(this),this.DetectorMarketplace.ExtractAd=this.ProcessFbCreative.bind(this),this.ActivateDetectors())}ActivateDetectors(){this.DetectorRightColumn.ActivateDetector(),this.DetectorFeed.ActivateDetector(),this.DetectorWatch.ActivateDetector(),this.DetectorMarketplace.ActivateDetector()}DeactivateDetectors(k){this.DetectorRightColumn.DeactivateDetector(k),this.DetectorFeed.DeactivateDetector(k),this.DetectorWatch.DeactivateDetector(k),this.DetectorMarketplace.DeactivateDetector(k)}ProcessFbCreative(k,E,D){try{let x=!1,Q=!1,T=!1;if(k){let s=document.querySelector(`[${L.ATTRIBUTE_BIS_ID}=${k}]`);if(s)if(x=!0,Q=this.IsAdContentRendered(s,A.GetMinImgsSpacePercentag(this.fbConfig,D)),Q){T=this.IsVideoCreative(s),M.SendCandidatePlacementsCount(this.id,1,L.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK,null);let k={x:0,y:0};if(A.IsPostHidden(s)){s.setAttribute(L.ATTRIBUTE_BIS_SIZE,n.ToJSON(A.GetPostContainerSize(s)));let E=s.getAttribute(L.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);E&&(k.x=parseInt(E))}else n.SetFullSizeToElement(s);let x=s.querySelectorAll("*");for(let E=0;E<x.length;E++)n.SetFullSizeToElement(x[E],null,k);let Q=[];Q.push(this.BuildCreative(s,T,E,D)),this.SendFacebookCandidates(Q),r.Gk&&r.Vk&&(this.IsVideoCreative(s)?s.style.cssText+=L.STYLES_OUTLINE_VIDEO_AD:s.style.cssText+=L.STYLES_OUTLINE_SUCCESS_DETECT)}else s.removeAttribute&&s.removeAttribute(L.ATTRIBUTE_BIS_ID)}}catch(k){}}BuildCreative(k,E,D,r){let n=A.GetPostContainerSize(k),Q=Array.from(document.querySelectorAll("link")),M=Array.from(document.querySelector("head").querySelectorAll("style[nonce]")),T=Q.concat(M),s='<html><head><meta charset="utf-8">';for(let k of T)s+=k.outerHTML;if(s+=`</head><body style='position:absolute; top:0px; left:0px; width:${n.w}px; height:${n.h}px;'>${k.outerHTML}</body></html>`,this.AdBlockerAgent.IsEnabledForFacebook()&&D?.length&&s.includes(D)){let k="";s=s.replace(D,k)}let O="",m=!1;this.fbConfig.ABOUT_SECTION_CONFIG&&this.fbConfig.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE&&(m=!0),this.fbConfig&&m&&(this.DetectorFeed&&r===L.FACEBOOK_AD_PLACEMENT_TYPE_FEED?O=this.DetectorFeed.GetAboutPageLink(k):this.DetectorWatch&&r===L.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH&&(O=this.DetectorWatch.GetAboutPageLink(k)));let B={content:x.encode(s),adPlacementType:r,designVersion:L.FACEBOOK_DESIGN_VERSION_NEW,aboutPageLink:O,aboutSectionContent:"",size:n};return E&&(B.videoData={videoId:"",videoUrl:"",audioUrl:""}),k.setAttribute(L.ATTRIBUTE_BIS_STATUS,"extracted"),B}HideAd(k,E,D){let r="";return k&&E&&k&&k.style&&(r=`position: absolute !important; width: ${E.w}px; overflow: hidden; height: 0px;`,A.IsPostHidden(k)||(k.style.cssText+=r,k.setAttribute(L.ATTRIBUTE_BIS_HIDE_HEIGHT,E.h),k.setAttribute(L.ATTRIBUTE_BIS_HIDE_WIDTH,E.w),k.setAttribute(L.ATTRIBUTE_BIS_HIDE_STATUS,"hidden"))),k.style.cssText}IsAdContentRendered(k,E){let D=A.GetPostContainerSize(k);if(n.GetImagesSpacePercentage(this.fbConfig.TAGS_FOR_LOADING_CHECK,k,D).some((k=>k>=E)))return!0;let r=k.querySelector(`a[${L.ATTRIBUTE_BIS_LABEL}]`);return r&&r.removeAttribute(L.ATTRIBUTE_BIS_LABEL),!1}IsVideoCreative(k){return 0!==k.querySelectorAll("video").length}AddNeededStylesForElement(k,E){try{if(E.w<=3&&E.h<=3&&("SPAN"===k.nodeName||"DIV"===k.nodeName)){let E=k.getAttribute("class");if(E&&E.includes("accessible_elem")){let E=getComputedStyle(k);k.setAttribute(L.ATTRIBUTE_BIS_STYLE,`clip:${E.getPropertyValue("clip")}; height:${E.getPropertyValue("height")}; overflow:${E.getPropertyValue("overflow")}; position:${E.getPropertyValue("position")}; white-space:${E.getPropertyValue("white-space")}; width:${E.getPropertyValue("width")};`)}}}catch(k){}}LoadAboutPageAndSendCandidates(k){if(k&&k.length){let E=k[0].aboutPageLink;E&&E.length?fetch(E,{headers:this.fbConfig.ABOUT_SECTION_CONFIG.HEADERS,method:"GET"}).then((E=>{try{if(200===E.status)return E.text();this.SendFacebookCandidates(k)}catch(k){}})).then((E=>{let D="",r=E.split(/\r?\n/);if(r.length)for(let k=0;k<r.length;k++){!new RegExp(this.fbConfig.ABOUT_SECTION_CONFIG.CONTENT_CHECK_STRING).test(r[k])||D.includes("delegate_page_id")&&D.includes("about_app_sections")||(D+=r[k])}k[0].aboutSectionContent=x.encode(D),this.SendFacebookCandidates(k)})).catch((()=>{this.SendFacebookCandidates(k)})):this.SendFacebookCandidates(k)}}SendFacebookCandidates(k){M.SendAdCandidates(this.id,k,L.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK,null),this.AdBlockerAgent.IsEnabledForFacebook()&&this.AdBlockerAgent.SetHiddenAmount(k.length)}}},7678:(k,E,D)=>{const r=D(1568),n=D(2880);class x{static GetVisibleText(k){let E=k.querySelectorAll(":scope > *");if(0!==E.length)return Array.prototype.slice.call(E).map(x.GetVisibleText).flat();if("none"!==getComputedStyle(k).display){let E=k.innerText;try{if(0===E.length&&k.getAttribute){let D=k.getAttribute("data-content");D&&D.length&&(E=D)}}catch(k){}return E}return""}static GetVisibleSpansText(k,E,D=[]){if(k.hasAttribute&&k.hasAttribute("bis_sponsor_checked")&&3==k.getAttribute("bis_sponsor_checked"))return"";let r=k.querySelectorAll(E),n="",x=parseInt(k.getAttribute("bis_sponsor_checked"))||0;return r.forEach((k=>{const E=getComputedStyle(k);if("none"!==E.display&&"absolute"!==E.position)try{let E=Array.from(k.childNodes).filter((k=>3===k.nodeType)).map((k=>k.nodeValue.trim())).reduce(((k,E)=>k+E),"");if(0===E.length&&k.getAttribute){let D=k.getAttribute("data-content");D&&D.length&&(E=D)}n+=E}catch(k){}})),k.setAttribute("bis_sponsor_checked",parseInt(x)+1),n&&D.length&&!D.includes(n)&&(n=this.checkLettersOfAlly(n,D)),n}static checkLettersOfAlly(k,E){const D=k.split(""),r=D.length-1,n=E.length;let x=1,L=!1,Q=0,M="";for(;!L&&x<=n;){const n=E[x-1],A=D[Q];-1!==n.indexOf(A)&&n.length===D.length?r!==Q?Q+=1:r===Q&&k.length===n.length?(L=!0,M=n):(x+=1,Q=0):(x+=1,Q=0)}return M}static HideSateliteSponsoredString(k,E){try{E&&E.forEach((E=>{if(E.innerText){let D=E.innerText;k.SPONSORED_TEXTS.some((k=>-1!==D.indexOf(k)))&&(E.style="display:none")}}))}catch(k){}}static GetMinImgsSpacePercentag(k,E){return E===r.FACEBOOK_AD_PLACEMENT_TYPE_FEED?k.FEED_PAGE.MIN_IMGS_SPACE_PERCENTAGE:E===r.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE?k.MARKETPLACE_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:E===r.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN?k.RIGHT_COLUMN_ADS_CONFIG.MIN_IMGS_SPACE_PERCENTAGE:E===r.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH?k.FEED_WATCH_PAGE.MIN_IMGS_SPACE_PERCENTAGE:0}static IsInitiallyRendered(k,E){return!!x.IsPostHidden(k)||E.w>0&&E.h>10}static IsPostHidden(k){return"hidden"===k.getAttribute(r.ATTRIBUTE_BIS_HIDE_STATUS)}static GetPostContainerSize(k){let E=n.GetFullElementSize(k);if(x.IsPostHidden(k)){let D=k.getAttribute(r.ATTRIBUTE_BIS_HIDE_HEIGHT);D&&(E.h=parseInt(D));let n=k.getAttribute(r.ATTRIBUTE_BIS_HIDE_WIDTH);n&&(E.w=parseInt(n));let x=k.getAttribute(r.ATTRIBUTE_BIS_HIDE_LEFT_OFFSET);x&&(E.x=E.x+parseInt(x),E.abs_x=E.abs_x+parseInt(x))}return E}}k.exports=x},6335:(k,E,D)=>{const r=D(655),n=D(7678),x=D(2880),L=D(1568),Q=D(6882);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.fbConfig=r,this.fbFeed=null,this.fbFeedObserver=null}ActualizeDetector(){return!!this.isValidUrl&&(this.fbFeed=this.FeedContainer,!!this.fbFeed)}ActivateMutationObserver(){this.fbFeed?(this.fbFeedObserver||(this.fbFeedObserver=new MutationObserver(this.DetectCandidates.bind(this,L.AD_DETECTOR_INITIATOR_MUTATION)),this.fbFeedObserver.observe(this.fbFeed,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}get FeedContainer(){const k=this.fbConfig.FEED_PAGE.MIN_HEIGHT,E=this.fbConfig.FEED_PAGE.FEED_QUERIES,D=E.length;let r=!1,n=null;for(let x=0;x<D&&!r;x++){let D=E[x],L=document.querySelector(D);if(L){const E=L.offsetHeight;if(L.children.length>2&&E>k)n=L,r=!0;else if(L.nodeName.search(/span/i)>-1){let E=L.nextElementSibling;if(E&&E.children){const D=E.offsetHeight;1===E.children.length&&E.querySelector("h3")?(n=E.querySelector("h3").parentElement,r=!0):2===E.children.length?(L=E.querySelector("div:not([class])"),L&&L.offsetHeight>k&&(n=L,r=!0)):E.children.length>1&&D>k&&(n=E,r=!0)}}}}return n}DeactivateMutationObserver(){this.fbFeedObserver&&(this.fbFeedObserver.disconnect(),this.fbFeedObserver=null,this.isObserverAlreadySet=!1)}Detector(){let k=this.FeedContainer;if(k){let E=Array.from(k.children);if(E.length&&1!==E.length||(E=document.querySelectorAll(this.fbConfig.FEED_PAGE.POSTS_QUERY)),!E)return;for(let k=0;k<E.length;k++){let D=E[k],r=x.GetElementSize(D);if(!D.hasAttribute(L.ATTRIBUTE_BIS_ID)&&n.IsInitiallyRendered(D,r)&&this.CheckIfAdRendered(D,n.GetMinImgsSpacePercentag(this.fbConfig,L.FACEBOOK_AD_PLACEMENT_TYPE_FEED))&&this.CheckIfAd(D)){let n="";this.AdBlockerAgent.IsEnabledForFacebook()&&(n=this.HideAd(E[k],r,L.FACEBOOK_AD_PLACEMENT_TYPE_FEED)),this.addCoverImageSrcAttribute(D);let Q=x.GenerateAndSetBisIdToFBAds(D),M=this.options.extractAdStaticPartTimeoutMs+x.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(D),setTimeout(this.ReadyToExtractAd.bind(this,Q,n),M)}}}}ReadyToExtractAd(k,E){try{if(k){let D=document.querySelector(`[${L.ATTRIBUTE_BIS_ID}=${k}]`);if(!D)return;let r=D.querySelector(`[${L.ATTRIBUTE_BIS_LABEL}="fb_feed_ad"]`);r?this.ExtractAd(k,E,L.FACEBOOK_AD_PLACEMENT_TYPE_FEED):null!==r&&(r.removeAttribute(L.ATTRIBUTE_BIS_ID),D.removeAttribute(L.ATTRIBUTE_BIS_ID))}}catch(k){}}CheckIfAd(k){const E=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES;let D=!1;for(let r=0;r<E.length&&!D;r++){const n=E[r];let x=k.querySelectorAll(n);if(D=this.GetTextCustom(x),D||(D=this.GetTextFromXlink(x)),D||(D=this.GetTextIfUseCanvas(x)),D){k.firstElementChild.setAttribute(L.ATTRIBUTE_BIS_LABEL,"fb_feed_ad");break}}return!!D}GetTextCustom(k){for(let E=0;E<k.length;E++){const D=k[E];let r=D.innerText,x=D.getAttribute(this.options.attributeWithSponsorAlly),Q=x?[r,x]:r;if("string"==typeof r&&r.length&&this.isTagSponsored(Q))return!0;if(r&&r.length>=2&&!D.hasAttribute(L.ATTRIBUTE_BIS_LABEL)){let k=n.GetVisibleSpansText(D,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(k!==r&&k!==x&&"string"==typeof k&&k.length&&this.isTagSponsored(k))return!0}}return!1}GetTextFromXlink(k){let E="";for(let D of k){if(!D.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))continue;const k=D.parentElement;let r="";if(k?.hasAttribute("bis_processed")&&k?.hasAttribute(L.ATTRIBUTE_BIS_LABEL))continue;const n=Array.from(k.children);if(n&&n.forEach((k=>{let E=k.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);const D=document.querySelector(E);D&&("text"===D.nodeName.toLowerCase()?r+=D.textContent:"svg"===D.nodeName.toLowerCase()&&(r=this.GetTextFromXlink([D.firstElementChild])))})),k.setAttribute("bis_processed",""),this.isTagSponsored(r))return E=r,k.removeAttribute("bis_processed"),E;E=""}return E}GetTextIfUseCanvas(k){let E="";for(let D of k){if("canvas"!==D.nodeName.toLowerCase()||D.hasAttribute(L.ATTRIBUTE_BIS_LABEL))continue;let k=this.CheckAndGetFieldName(D);if("string"==typeof k&&this.isTagSponsored(k)){E=k;break}}return E}CheckAndGetFieldName(k){if(k.hasAttribute("bis-text"))return k.getAttribute("bis-text");let E=Q.EmptyMessage;E.type=L.MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE,E.content={attribute:"bis-text"},window.postMessage({attribute:"bis-text"},window.location.origin)}AddHiddenTextTags(k){const E=k.querySelectorAll("svg>use");if(E)for(let k=0;k<E.length;k++){const D=E[k],r=D.parentElement;let n=D.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);let x=document.querySelector(n).cloneNode(!0);x.style.display="none",x.id=x.id+"_bis",r&&r.appendChild(x)}}isTagSponsored(k){let E=!1;if(!k)return E;if("string"==typeof k)E=this.fbConfig.SPONSORED_TEXTS.some((E=>E===k));else for(let D of k)if(E=this.fbConfig.SPONSORED_TEXTS.some((k=>k===D)),E)break;return E}GetAboutPageLink(k){let E="",D=this.fbConfig.ABOUT_SECTION_CONFIG,r=k.querySelectorAll(D.QUERY_ABOUT_PAGE_HREF);if(!r?.length)return E;let n="";for(let E=0;E<r.length;E++){let x=r[E];if(!x.href)continue;if(!D.ABOUT_PAGE_BAD_WORDS_MATCHES.every((k=>-1===x.href.indexOf(k))))continue;let L=k.getBoundingClientRect().top,Q=x.getBoundingClientRect();Q.top>L&&Q.top-L<=D.MAX_DISTANCE_FROM_POST_TOP&&(n=x.href)}if(!n.length)return E;const x=new RegExp(D.QUERY_GET_USER_ID_FROM_HREF);let L=n.match(x)?.groups?.username||"";return E=D.ABOUT_PAGE_TEMPLATE.replace("%1",L),E}get isValidUrl(){return!this.fbConfig.FEED_PAGE.INVALID_URL_PATHS.some((k=>window.location.href.includes(k)))}addCoverImageSrcAttribute(k){let E=k.querySelector(this.fbConfig.FEED_PAGE.COVER_IMAGE_QUERY);if(E&&E.hasAttribute("src")){let D=E.getAttribute("src");k.setAttribute("data-cover-image-src",D)}}}},2300:(k,E,D)=>{const r=D(655),n=D(2880),x=D(7678),L=D(1568);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.fbConfig=r,this.fbMarketplace=null,this.fbMarketplaceObserver=null}ActualizeDetector(){return this.fbMarketplace=this.MainContainer,!!this.fbMarketplace}get MainContainer(){return document.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.CONTAINER)}ActivateMutationObserver(){this.fbMarketplace?(this.fbMarketplaceObserver||(this.fbMarketplaceObserver=new MutationObserver(this.DetectCandidates.bind(this,L.AD_DETECTOR_INITIATOR_MUTATION)),this.fbMarketplaceObserver.observe(this.fbMarketplace,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.fbMarketplaceObserver&&(this.fbMarketplaceObserver.disconnect(),this.fbMarketplaceObserver=null,this.isObserverAlreadySet=!1)}Detector(){let k=this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.CARDS);if(k?.length)for(let E=0;E<k.length;E++){const D=k[E];let r=n.GetElementSize(D);if(this.addCoverImageSrcAttribute(D),!D.hasAttribute(L.ATTRIBUTE_BIS_ID)&&x.IsInitiallyRendered(D,r)&&(this.addCoverImageSrcAttribute(D),this.CheckIfAd(D))){let k;if(this.AdBlockerAgent.IsEnabledForFacebook()&&(x.HideSateliteSponsoredString(this.fbConfig,document.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SATELITE_SPONSORED_STRING)),k=this.HideAd(D,r,L.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE)),this.CheckIfAdRendered(D,x.GetMinImgsSpacePercentag(this.fbConfig,L.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE))){let E=n.GenerateAndSetBisIdToFBAds(D),r=this.options.extractAdStaticPartTimeoutMs+n.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.addCoverImageSrcAttribute(D),setTimeout(this.ExtractAd.bind(this,E,k,L.FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE),r)}}}}addCoverImageSrcAttribute(k){let E=k.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.COVER_IMAGE_QUERY);if(E&&E.hasAttribute("src")&&!k.hasAttribute("data-cover-image-src")){let D=E.getAttribute("src");k.setAttribute("data-cover-image-src",D)}}CheckIfAd(k){let E=!1;if(!k||!this.MainContainer)return E;const D=k.getBoundingClientRect();let r=Array.from(this.MainContainer.querySelectorAll(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSOR_BLOCKS));if(!r?.length)return E;for(let n of r){const r=n.getBoundingClientRect();if(r.x-D.x<=5&&r.x-D.x>=-5){let D=x.GetVisibleSpansText(n,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(this.fbConfig.SPONSORED_TEXTS.some((k=>-1!==D.indexOf(k)))){k.setAttribute(L.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),E=!0;break}}else if(this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH){let D=k;for(let k of this.fbConfig.MARKETPLACE_ADS_CONFIG.PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH)if(D[k])D=D[k];else if(k.includes(",")){const E=k.split(",");D=D[E[0]](E[1])}if(D){let r=x.GetVisibleSpansText(D,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(this.fbConfig.SPONSORED_TEXTS.some((k=>-1!==r.indexOf(k)))){k.setAttribute(L.ATTRIBUTE_BIS_LABEL,"fb_marketplace_ad"),E=!0;break}}}}return E||(E=this.checkAHref(k)),E}checkAHref(k){return!!k.querySelector(this.fbConfig.MARKETPLACE_ADS_CONFIG.SPONSORED_HREF_CHECK)}}},1899:(k,E,D)=>{const r=D(655),n=D(2880),x=D(7678),L=D(1568),Q=D(8384);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.fbConfig=r,this.fbRightColumn=null,this.fbRightColumnObserver=null,this.options=E}ActualizeDetector(){return this.fbRightColumn=this.getRightColumnContainer(),!!this.fbRightColumn}ActivateMutationObserver(){this.fbRightColumn?(this.fbRightColumnObserver||(this.fbRightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,L.AD_DETECTOR_INITIATOR_MUTATION)),this.fbRightColumnObserver.observe(this.fbRightColumn,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.fbRightColumnObserver&&(this.fbRightColumnObserver.disconnect(),this.fbRightColumnObserver=null,this.isObserverAlreadySet=!1)}Detector(){let k=this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CARDS);if(k?.length)for(let E=0;E<k.length;E++){let D=k[E],r=null,M=Array.from(this.fbRightColumn.querySelectorAll(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.SATELITE_SPONSORED_STRING)),A=n.GetElementSize(D);if(x.IsInitiallyRendered(D,A))if(D.hasAttribute(L.ATTRIBUTE_BIS_ID))this.CheckIfAdRotated(D)&&D.removeAttribute&&(D.removeAttribute(L.ATTRIBUTE_BIS_ID),D.removeAttribute(L.ATTRIBUTE_BIS_SIZE),D.removeAttribute(L.ATTRIBUTE_BIS_STATUS),Q.Gk&&Q.Vk&&"border: 6px solid green !important;"===D.style.cssText&&(D.style.cssText=""));else if(this.CheckIfAd(D,M)&&(this.AdBlockerAgent.IsEnabledForFacebook()&&(x.HideSateliteSponsoredString(this.fbConfig,M),r=this.HideAd(D,A,L.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)),this.CheckIfAdRendered(D,x.GetMinImgsSpacePercentag(this.fbConfig,L.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN)))){let k=n.GenerateAndSetBisIdToFBAds(D),E=this.options.extractAdStaticPartTimeoutMs+n.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);setTimeout(this.ExtractAd.bind(this,k,r,L.FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN),E)}}}CheckIfAd(k,E){const D=this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IMPOSSIBLE_HREF_REG_FOR_AD,r=this.fbConfig.SPONSORED_TEXTS;if(E?.length)for(let k of E){let E=k.innerText;if(r.some((k=>k===E)))return!0}const n=Array.from(k.querySelectorAll(`${this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.IF_AD}, [${this.options.attributeWithSponsorAlly}]`));return!!n.length&&n.some((k=>{const E=k.href;if(-1===E?.indexOf(D))return!0;const n=k.getAttribute(this.options.attributeWithSponsorAlly);return!!n&&r.some((k=>n===k))}))}CheckIfAdRotated(k){let E=!1;if(k&&"extracted"===k.getAttribute(L.ATTRIBUTE_BIS_STATUS)){let D=0,r=0,n=0,x=k.querySelectorAll("*");x&&x.length&&(x.forEach((k=>{k.getAttribute(L.ATTRIBUTE_BIS_SIZE)?D+=1:r+=1})),0===D&&r>0?E=!0:D>0&&r>0&&(n=r/x.length*100|0,n>50&&(E=!0)))}return E}getRightColumnContainer(){return document.querySelector(this.fbConfig.RIGHT_COLUMN_ADS_CONFIG.CONTAINER)}}},1454:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k){this.id=k}InjectDetector(){if(document.head){let k=document.createElement("script");this.setAttributes(k),document.head.appendChild(k)}}setAttributes(k){const E=r.getURL("../executors/facebook.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}}},7948:(k,E,D)=>{const r=D(655),n=D(7678),x=D(2880),L=D(1568);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.fbConfig=r,this.fbWatch=null,this.fbWatchObserver=null}ActualizeDetector(){return this.fbWatch=this.FeedWatchContainer,!!this.fbWatch}ActivateMutationObserver(){this.fbWatch?(this.fbWatchObserver||(this.fbWatchObserver=new MutationObserver(this.DetectCandidates.bind(this,L.AD_DETECTOR_INITIATOR_MUTATION)),this.fbWatchObserver.observe(this.fbWatch,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}get FeedWatchContainer(){const k=this.fbConfig.FEED_WATCH_PAGE.FEED_WATCH_QUERIES,E=k.length;let D=!1,r=null;for(let n=0;n<E&&!D;n++){let E=k[n],x=Array.from(document.querySelectorAll(E));if(!x.length)continue;let L=x.filter((k=>k.children&&k.children.length>2));L.length&&1===L.length&&(r=L[0],D=!0)}return r}DeactivateMutationObserver(){this.fbWatchObserver&&(this.fbWatchObserver.disconnect(),this.fbWatchObserver=null,this.isObserverAlreadySet=!1)}Detector(){let k=this.fbWatch;if(k){let E=Array.from(k.children);for(let k=0;k<E.length;k++){const D=E[k];let r=x.GetElementSize(D);if(!D.hasAttribute(L.ATTRIBUTE_BIS_ID)&&n.IsInitiallyRendered(D,r)&&this.CheckIfAd(D)){let k="";if(this.AdBlockerAgent.IsEnabledForFacebook()&&(k=this.HideAd(D,r,L.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH)),this.CheckIfAdRendered(D,n.GetMinImgsSpacePercentag(this.fbConfig,L.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH))){this.addCoverImageSrcAttribute(D);let E=x.GenerateAndSetBisIdToFBAds(D),r=this.options.extractAdStaticPartTimeoutMs+x.GetRandomIntInRange(0,this.options.extractAdRandomPartTimeoutMs);this.AddHiddenTextTags(D),setTimeout(this.ReadyToExtractAd.bind(this,E,k),r)}}}}}ReadyToExtractAd(k,E){try{if(k){let D=document.querySelector(`[${L.ATTRIBUTE_BIS_ID}=${k}]`),r=D.querySelector(`[${L.ATTRIBUTE_BIS_LABEL}="fb_watch_ad"]`);D&&r?this.ExtractAd(k,E,L.FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH):(r.removeAttribute(L.ATTRIBUTE_BIS_ID),D.removeAttribute(L.ATTRIBUTE_BIS_ID))}}catch(k){}}CheckIfAd(k){const E=this.fbConfig.POSSIBLE_SPONSORED_TEXT_QUERIES;let D=!1;for(let r=0;r<E.length&&!D;r++){const n=E[r];let x=k.querySelectorAll(n);if(D=this.GetTextCustom(x),D||(D=this.GetTextFromXlink(x)),D||(D=this.GetTextIfUseCanvas(x)),D){k.firstElementChild.setAttribute(L.ATTRIBUTE_BIS_LABEL,"fb_watch_ad");break}}return!!D}GetTextCustom(k){for(let E=0;E<k.length;E++){const D=k[E];let r=D.innerText,x=D.getAttribute(this.options.attributeWithSponsorAlly),Q=x?[r,x]:r;if("string"==typeof r&&r.length&&this.isTagSponsored(Q))return!0;if(r&&r.length>=2&&!D.hasAttribute(L.ATTRIBUTE_BIS_LABEL)){let k=n.GetVisibleSpansText(D,this.fbConfig.VISIBLE_SPANS_TEXT,this.fbConfig.SPONSORED_TEXTS);if(k!==r&&k!==x&&"string"==typeof k&&k.length&&this.isTagSponsored(k))return!0}}return!1}GetTextFromXlink(k){let E="";for(let D of k){if(!D.hasAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG))continue;const k=D.parentElement;let r="";if(k?.hasAttribute("bis_processed")&&k?.hasAttribute(L.ATTRIBUTE_BIS_LABEL))continue;const n=Array.from(k.children);if(n&&n.forEach((k=>{let E=k.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);const D=document.querySelector(E);D&&("text"===D.nodeName.toLowerCase()?r+=D.textContent:"svg"===D.nodeName.toLowerCase()&&(r=this.GetTextFromXlink([D.firstElementChild])))})),k.setAttribute("bis_processed",""),this.isTagSponsored(r))return E=r,k.removeAttribute("bis_processed"),E;E=""}return E}GetTextIfUseCanvas(k){let E="";for(let D of k){if("canvas"!==D.nodeName.toLowerCase()||D.hasAttribute(L.ATTRIBUTE_BIS_LABEL))continue;let k=this.CheckAndGetFieldName(D);if("string"==typeof k&&this.isTagSponsored(k)){E=k;break}}return E}AddHiddenTextTags(k){const E=k.querySelectorAll("svg>use");if(E)for(let k=0;k<E.length;k++){const D=E[k],r=D.parentElement;let n=D.getAttribute(this.fbConfig.XLING_HREF_ATTRIBUTE_FOR_SVG);let x=document.querySelector(n).cloneNode(!0);x.style.display="none",r&&r.appendChild(x)}}isTagSponsored(k){let E=!1;if(!k)return E;if("string"==typeof k)E=this.fbConfig.SPONSORED_TEXTS.some((E=>E===k));else for(let D of k)if(E=this.fbConfig.SPONSORED_TEXTS.some((k=>k===D)),E)break;return E}GetAboutPageLink(k){let E="",D=this.fbConfig.ABOUT_SECTION_CONFIG,r=k.querySelectorAll(D.QUERY_ABOUT_PAGE_HREF);if(!r?.length)return E;let n="";for(let E=0;E<r.length;E++){let x=r[E];if(!x.href)continue;if(!D.ABOUT_PAGE_BAD_WORDS_MATCHES.every((k=>-1===x.href.indexOf(k))))continue;let L=k.getBoundingClientRect().top,Q=x.getBoundingClientRect();Q.top>L&&Q.top-L<=D.MAX_DISTANCE_FROM_POST_TOP&&(n=x.href)}if(!n.length)return E;const x=new RegExp(D.QUERY_GET_USER_ID_FROM_HREF);let L=n.match(x)?.groups?.username||"";return E=D.ABOUT_PAGE_TEMPLATE.replace("%1",L),E}addCoverImageSrcAttribute(k){let E=k.querySelector(this.fbConfig.FEED_WATCH_PAGE.COVER_IMAGE_QUERY);if(E&&E.hasAttribute("src")){let D=E.getAttribute("src");k.setAttribute("data-cover-image-src",D)}}}},3162:(k,E,D)=>{const r=D(2880),n=D(9358);class x{static GetHyperlinkEmbeddedTargetUrlDataList(k,E,D){let n,x,L,Q=r.QuerySelectorAll(E,"A[href]"),M=[];for(var A=0;A<Q.length;A++)if(n=Q[A],!r.IsInFilterList(D,n.href)){x=r.GetElementSize(n),L=x.w*x.h;let k=n.querySelectorAll("img, canvas");if(k.length){let E,D;for(var T=0;T<k.length;T++)E=r.GetElementSize(k[T]),D=E.w*E.h,D>L&&(L=D,x.w=E.w,x.h=E.h)}L>=100&&r.isValidUrl(n.href)&&M.push({href:n.href,square:L})}return M&&M.length,M}static GetDocumentEmbeddedTargetUrlDataList(k,E,D){let r=[this.strategyStrictFinalUrl,this.strategyScriptClickTag,this.strategyAppnexus,this.strategyNoscriptAnchors,this.strategyScriptAndMetaContentJsonKeyWords,this.strategyLookingForPropertyInsideWindow],n=this.processStrategyList(E,r,D);return n&&n.length,n}static processStrategyList(k,E,D){let r=[];for(let n of E)try{let E=n(k,D);E&&E.href&&r.push(E)}catch(k){}return r}static strategyStrictFinalUrl(k,E){for(var D=r.QuerySelectorAll(k,'script[type="application/json"]'),n=0;n<D.length;n++){var x=D[n].outerText;if(x.length>1&&"{"===x[0]&&"}"===x[x.length-1]&&-1!=x.indexOf("targets")&&-1!=x.indexOf("redirectUrl")&&-1!=x.indexOf("finalUrl")){var L=JSON.parse(x);if(void 0!==L.targets&&void 0!==L.targets.redirectUrl&&void 0!==L.targets.redirectUrl.finalUrl){let k=L.targets.redirectUrl.finalUrl;if(r.isValidUrl(k))return{href:k,square:1e6}}}}}static strategyScriptClickTag(k,E){let D=r.QuerySelectorAll(k,"script");for(let k=0;k<D.length;k++){let E=D[k].outerText;if(E.length>1&&-1!==E.indexOf("clickTag")&&(E=E.replace(/\s/g,""),E.startsWith('varclickTag="')&&E.endsWith('";'))){let k=E.indexOf('"'),D=E.lastIndexOf('"'),n=E.substring(k+1,D);if(r.isValidUrl(n))return{href:n,square:1e6}}}}static strategyAppnexus(k,E){let D=r.QuerySelectorAll(k,".GoogleActiveViewElement script"),n=Array.from(D).map((k=>k.innerHTML)).filter((k=>k.indexOf("APPNEXUS.placement")>=0));for(let k=0;k<n.length;k++){let E=x(n[k]);if(r.isValidUrl(E))return{href:E,square:1e6}}function x(k){let E=(k=k.replace(/(\r\n|\n|\r|\s)/gm,"")).match(/APPNEXUS.placement\(".+","(.+)",.+/);return E&&E.length>1?E[1]:null}}static strategyNoscriptAnchors(k,E){let D=r.QuerySelectorAll(k,"noscript");for(let E=0;E<D.length;E++){let n=k.createElement("div");n.innerHTML=D[E].innerText;let x=n.querySelector("a[href]");if(x){let k=x.getAttribute("href");if(r.isValidUrl(k))return{href:k,square:1}}}}static strategyScriptAndMetaContentJsonKeyWords(k,E,D=null){if(D){let k=x(D,E);return r.isValidUrl(k)?{href:k,square:999999}:void 0}let n=r.QuerySelectorAll(k,"script, meta[content]");for(let k of n){let D="script"===k.nodeName.toLowerCase()?k.outerText:k.getAttribute("content");if(D.length>1&&"{"===D[0]&&"}"===D[D.length-1]){let k=x(JSON.parse(D),E);if(r.isValidUrl(k))return{href:k,square:999999}}}function x(k,E,D=[]){let n=E.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(D.length>n)return null;let Q=Object.getOwnPropertyNames(k);for(let n of Q)try{let Q=k[n];if(!Q)return null;let M=D.concat(n);if("string"==typeof Q&&Q.length>1&&"{"===Q[0]&&"}"===Q[Q.length-1]){let k=x(JSON.parse(Q),E,M);if(k)return k}if("object"==typeof Q){let k=x(Q,E,M);if(k)return k}else if("string"==typeof Q&&L(n,E)&&r.isValidUrl(Q))return Q}catch(k){}return null}function L(k,E){let D=function(k){let E=k.toLowerCase();return E.replace(/[^a-zA-Z]+/g,"")}(k),r=E.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let k of r){if(D===k)return!0}return!1}}static strategyLookingForPropertyInsideWindow(k,E){const D=k.defaultView,r=E.WINDOW_PROPERTY_NAMES;for(let n of r){let r=D[n];if(r){if("string"==typeof r)return!r.search(/^http/)>-1&&(r=L(r)),{href:r,square:1e6};if("object"==typeof r)return x.strategyScriptAndMetaContentJsonKeyWords(k,E,r)}}function L(D){try{const r=n.decode(D);if(r){if("string"==typeof r&&"{"===r[0]){let D=JSON.parse(r);return x.strategyScriptAndMetaContentJsonKeyWords(k,E,D).href}return""}}catch(k){}}}}k.exports=x},9877:(k,E,D)=>{const r=D(2880),n=D(7817),x=D(3162);class L{constructor(k,E,D,n,x){this.id=D,this.fullIdStr=r.GetFullIdStr(k,E,D),this.init=!1,this.targetUrlDataList=[],this.targetUrlDetected=!1,this.IframesIO=null,this.activationTargetUrlCandidates=n,this.html5TargetUrlDetectionConfig=x.GetHtml5TargetUrlDetectionConfig(),this.blacklistedTargetUrls=x.BlacklistTargetUrl,this.detectionTimerId=null,this.onDetectTargetUrlCallBack=null}get FrameTargetUrl(){return this.targetUrlDataList}Init(k){return k&&(this.IframesIO=k,this.init=!0),this.init}DetectTargetUrl(k,E){if(this.init&&!this.targetUrlDetected&&this.html5TargetUrlDetectionConfig)if(this.onDetectTargetUrlCallBack=E,this.detectionTimerId=setTimeout(this.onTargetUrlDetectionTimout.bind(this),k),this.activationTargetUrlCandidates&&this.activationTargetUrlCandidates.length)this.targetUrlDataList=this.activationTargetUrlCandidates,this.TargetUrlDetected();else{let k=x.GetHyperlinkEmbeddedTargetUrlDataList(this.id,document,this.blacklistedTargetUrls);this.targetUrlDataList=this.targetUrlDataList.concat(k);let E=x.GetDocumentEmbeddedTargetUrlDataList(this.id,document,this.html5TargetUrlDetectionConfig);E=L.filterTargetUrlDataList(E,this.blacklistedTargetUrls),this.targetUrlDataList=this.targetUrlDataList.concat(E),this.targetUrlDataList&&this.targetUrlDataList.length?this.TargetUrlDetected():this.IframesIO.ActivateWindowEmbeddedTargetUrlDetection(this.onGetWindowEmbeddedTargetUrlData.bind(this))}}static filterTargetUrlDataList(k,E){if(!k||0===k.length)return[];return k.filter((k=>{if(k.href&&0===k.href.search(/^http/)&&!r.IsInFilterList(E,k.href))return!0}))}onGetWindowEmbeddedTargetUrlData(k){let E=L.filterTargetUrlDataList(k,this.blacklistedTargetUrls);this.targetUrlDataList.push(E),this.concatTargetUrlsDataIfNeed(),!E||E.length,this.TargetUrlDetected()}concatTargetUrlsDataIfNeed(){this.targetUrlDataList[0].length&&(this.targetUrlDataList=this.targetUrlDataList.flat(1))}onTargetUrlDetectionTimout(){this.targetUrlDetected||this.TargetUrlDetected()}TargetUrlDetected(){this.targetUrlDetected=!0,this.detectionTimerId&&(clearTimeout(this.detectionTimerId),this.detectionTimerId=null),this.onDetectTargetUrlCallBack&&this.onDetectTargetUrlCallBack()}static DetectTargetUrlFromWindowObj(k,E,D){var r=[];let L=D.GetHtml5TargetUrlDetectionConfig(),Q=D.BlacklistTargetUrl;try{let D=x.GetHyperlinkEmbeddedTargetUrlDataList(k,E.document,L);r=r.concat(D)}catch(k){}try{let D=x.GetDocumentEmbeddedTargetUrlDataList(k,E.document,L);D=this.filterTargetUrlDataList(D,Q),r=r.concat(D)}catch(k){}try{let D=n.GetWindowEmbeddedTargetUrlDataList(k,E,L,this.defaultWindowProps);D=this.filterTargetUrlDataList(D,Q),r=r.concat(D)}catch(k){}return r&&r.length,r}}k.exports=L},7817:k=>{k.exports=class{static GetWindowEmbeddedTargetUrlDataList(k,E,D){let r=[function(k){if(void 0!==k.clickTag&&x(k.clickTag))return{href:k.clickTag,square:1000001}},function(k){if(void 0!==k.adData){if(void 0!==k.adData.destination_url&&x(k.adData.destination_url))return{href:k.adData.destination_url,square:1000001};if(void 0!==k.adData.redirect_url&&x(k.adData.redirect_url))return{href:k.adData.redirect_url,square:1000001}}},function(k){if(void 0!==k.BF&&void 0!==k.BF.Parameters&&void 0!==k.BF.Parameters.targeturl&&x(k.BF.Parameters.targeturl))return{href:k.BF.Parameters.targeturl,square:1000001}},function(k){if(void 0!==k.ADAPT&&void 0!==k.ADAPT.symbols&&void 0!==k.ADAPT.symbols.stage&&void 0!==k.ADAPT.symbols.stage.clickUrl&&x(k.ADAPT.symbols.stage.clickUrl))return{href:k.ADAPT.symbols.stage.clickUrl,square:1000001}},function(k){if(void 0!==k.admixAPI&&void 0!==k.admixAPI.ownerBanner&&void 0!==k.admixAPI.ownerBanner.clickUrl&&x(k.admixAPI.ownerBanner.clickUrl))return{href:k.admixAPI.ownerBanner.clickUrl,square:1000001}},function(k,E){let D=function(k,E,D){let r=function(k,E){let D=Object.getOwnPropertyNames(k);return D.filter((k=>E.WINDOW_PROPERTY_NAMES.indexOf(k)<0))}(E,D);if(!r||0===r.length)return null;return L(E,r,D)}(0,k,E);if(x(D))return{href:D,square:999999}}],n=function(k,E,D){let r=[];for(let n of E)try{let E=n(k,D);E&&E.href&&r.push(E)}catch(k){}return r}(E,r,D);return n&&n.length,n;function x(k){return"string"==typeof k&&k.length>0&&(-1!==k.indexOf("http")||-1!==k.indexOf("//"))}function L(k,E,D,r=[]){let n=D.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(r.length>n)return null;for(let n of E)try{let E=k[n];if(!E)return null;let M=r.concat(n);if("object"==typeof E){let k=L(E,Object.getOwnPropertyNames(E),D,M);if(k)return k}else if("string"==typeof E&&Q(n,D)&&x(E))return E}catch(k){}return null}function Q(k,E){let D=function(k){let E=k.toLowerCase();return E.replace(/[^a-zA-Z]+/g,"")}(k),r=E.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let k of r){if(D===k)return!0}return!1}}}},3375:(k,E,D)=>{const r=D(8384),n=D(1568),x=D(5364),L=D(5337),Q=D(5972),M=D(9944),A=D(9346);k.exports=class extends A{constructor(k,E,D){super(k),this.id=k,this.available=!1,this.onPageRefreshed=this.onPageUrlChanged,this.instaConfig=E.GetInstagramConfig,this.AdBlockerAgent=D,this.DetectorFeed=null,this.DetectorStories=null,this.headersEntries=[],this.ActivateVideoTrafficDetector()}onPageUrlChanged(k,E){this.available&&setTimeout((()=>{this.DeactivateDetectors(n.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),0)}ActivateDetector(k){k===n.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.DetectorFeed=new L(this.id,this.instaConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.DetectorStories=new M(this.id,this.instaConfig.STORIES.DETECTOR_OPTIONS,this.AdBlockerAgent,this.instaConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.DetectorFeed.isVideo=this.isVideo.bind(this),this.DetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorFeed.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorFeed.HideElement=this.HideElementForInstagramFeedOnly.bind(this),this.DetectorFeed.isCarousel=this.isCarousel.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this),this.DetectorStories.HideElement=this.HideElement.bind(this),this.DetectorStories.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.DetectorStories.ExtractAd=this.processAndSendInstagramAd.bind(this),this.DetectorStories.getAdInstagramObject=this.getAdInstagramObject.bind(this),this.DetectorFeed.removeCloneElement=this.removeCloneElement.bind(this)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector=new Q(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_w",JSON.stringify(this.instaConfig.TRAFFIC_LISTENER_CONFIG))}ActivateDetectors(){this.GetHeadersDataForLoader(),this.DetectorFeed.ActivateDetector(),this.DetectorStories.ActivateDetector()}DeactivateDetectors(k){this.DetectorFeed.DeactivateDetector(k),this.DetectorStories.DeactivateDetector(k)}processAndSendInstagramAd(k,E,D){let L=document.querySelector(`[${n.ATTRIBUTE_BIS_ID}=${k}]`);L&&(this.addFieldsToCandidateAboutHeaders(E),x.SendCandidatePlacementsCount(this.id,1,n.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM,null),x.SendAdCandidates(this.id,[E],n.MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM,null),r.Gk&&r.Vk&&(L.style.cssText+=D?n.STYLES_OUTLINE_VIDEO_AD:n.STYLES_OUTLINE_SUCCESS_DETECT))}GetHeadersDataForLoader(){let k=this.instaConfig.LOAD_USER_DATA.HEADERS_VALUES_QUERIES;for(let E of k){let k=new RegExp(E[1]),D=E[0],r=new RegExp(D,"i"),n=Array.from(document.querySelectorAll("script")).filter((k=>k.innerHTML.search(r)>-1));if(!n.length)return;let x=n[0].innerHTML.match(k)[1];this.headersEntries.push([D,x])}}addFieldsToCandidateAboutHeaders(k){this.headersEntries.length&&k.aboutPageUrl&&(k.headers=Object.fromEntries(this.headersEntries))}}},5337:(k,E,D)=>{const r=D(2880),n=D(1568),x=D(655);k.exports=class extends x{constructor(k,E,D,r){super(k,E,D),this.instaConfig=r,this.timeOptions=this.instaConfig.FEED.TIMEOUT_OPTIONS,this.id=k,this.adBlockerAgent=D,this.feedContainer=null,this.feedObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.processInstagramAdsInterval=null}HideElement(k){}setSizesAndIdForAllElements(k){}getAdInstagramObject(k,E,D,r,n,x){}isCarousel(k){}isVideo(k,E){}removeCloneElement(k){}ActualizeDetector(){return this.feedContainer=this.FeedContainer,!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.processFeedAds()}get FeedContainer(){const k=this.instaConfig.FEED.CONTAINER_QUERIES,E=this.instaConfig.FEED.CONTAINER_MIN_HEIGHT;for(let D of k){let k=document.querySelector(D);if(k){if(k.offsetHeight>=E)return k}}}checkAdBlockerAndHide(k){this.adBlockerAgent.IsEnabledForInstagram()&&!this.adBlockerAgent.IsElementHidden(k)&&(this.HideElement(k),this.adBlockerAgent.SetHiddenAmount(1))}processFeedAds(){let k=this.detectPromotedPosts();if(k&&k.length)for(let E of k){r.GetElementSize(E);if(!E.hasAttribute(n.ATTRIBUTE_BIS_ID)){this.setSizesAndIdForAllElements(E);let k=r.GenerateAndSetBisIdToInstagramAds(E),D=this.createHTML(E);const x=this.getAdvertiserName(E),L=this.getTargetUrl(E),Q=this.getAboutPageUrl(E);this.AddHiddenTextTags(D);const M=this.isCarousel(E),A=this.isVideo(E,this.instaConfig.TAGS_FOR_VIDEO_CHECK),T=this.getAdInstagramObject(E,D,x,L,Q,n.INSTAGRAM_AD_PLACEMENT_TYPE_FEED);A&&!M&&(T.videoData={}),M&&(T.carouselSlidesSources=[]),this.removeCloneElement(D),this.checkAdBlockerAndHide(E);let s=setTimeout((()=>{this.ExtractAd.call(this,k,T,A),clearTimeout(s)}),100)}}}AddHiddenTextTags(k){const E=k.querySelectorAll("svg>use");if(E)for(let k=0;k<E.length;k++){const D=E[k],r=D.parentElement;let n=D.getAttribute("xlink:href");let x=document.querySelector(n).cloneNode(!0);x.style.display="none",x.id=x.id+"_bis",r&&r.appendChild(x)}}RemoveHideStylesFromClone(k){let E=k.querySelector("div"),D=E?E.firstElementChild:null,r=D?D.firstElementChild:null;return r?(D.style.cssText=D.style.cssText.replace(n.STYLES_HIDE_INSTAGRAM_FEED_AD[1],""),r.style.cssText=r.style.cssText.replace(n.STYLES_HIDE_INSTAGRAM_FEED_AD[0],""),k):k}detectPromotedPosts(){if(!this.feedContainer)return[];const k=this.instaConfig.FEED.IMG_SPACE_PERCENTAGE,E=this.instaConfig.PROMOTED_ALIASES;let D=Array.from(this.feedContainer.children),r=[];for(let n of D)if(this.IsPostContentRendered(n,k)){const k=n.querySelectorAll(this.instaConfig.FEED.PROMOTED_QUERY);for(let D of k){if(!D)continue;let k=D.hasAttribute("xlink:href")?this.GetTextFromXlink(D):D.innerText;if(k.includes("#"))continue;if(E.some((E=>k.search(E)>=0))){r.push(n);break}}}return r}GetTextFromXlink(k){let E=k.getAttribute("xlink:href");if(E){return document.querySelector(E).textContent}return""}IsPostContentRendered(k,E){let D=!1;if(k){let n=r.GetFullElementSize(k);if(n.w>0){r.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,k,n).some((k=>k>=E))&&(D=!0)}}return D}createHTML(k){const E=document.createElement("html"),D=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,n=k.cloneNode(!0),x=this.feedContainer,L=x.cloneNode();return this.styleFixes(L),this.setWrapperStyles(x,L),L.appendChild(n),D.appendChild(L),E.appendChild(r),E.appendChild(D),E}setWrapperStyles(k,E){E.style.cssText=E.style.cssText+` max-width: ${this.maxWidthContainer(k)}`}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}styleFixes(k){k.style.paddingBottom=0}get cloneBodyWithStyles(){const k=document.createElement("body"),E=document.querySelectorAll('body style, body link[rel="stylesheet"]');return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}get cloneHeadWithStyles(){const k=document.createElement("head"),E=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return E&&E.forEach((E=>{let D=E.cloneNode(!0);k.appendChild(D)})),k}getAboutPageUrl(k){const E=this.instaConfig.FEED.ABOUT_PAGE_URL_QUERY;let D=k.querySelector(E);return D&&D.href?D.href:""}getAdvertiserName(k){const E=this.instaConfig.FEED.ADVERTISER_NAME_QUERY;let D=k.querySelector(E),r="";if(D){if(r=D.innerText,r)return r;if(r=D.innerHTML,-1===r.search(/\<\//))return r}return""}getTargetUrl(k){const E=this.instaConfig.FEED.TARGET_URL_QUERY;let D=k.querySelector(E),r="";return D&&D.href&&(r=D.href),r}}},9944:(k,E,D)=>{const r=D(2880),n=D(1568),x=D(655);k.exports=class extends x{constructor(k,E,D,r){super(k,E,D),this.instaConfig=r,this.id=k,this.adBlockerAgent=D,this.storyContainer=null,this.storiesObserver=null,this.processInstagramAdsInterval=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}HideElement(k){}setSizesAndIdForAllElements(k){}getAdInstagramObject(k,E,D,r,n,x){}removeCloneElement(k){}ActualizeDetector(){return this.storyContainer=this.StoryContainer,!!this.storyContainer}ActivateMutationObserver(){this.storyContainer?(this.storiesObserver||(this.storiesObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.storiesObserver.observe(this.storyContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.storiesObserver&&(this.storiesObserver.disconnect(),this.storiesObserver=null,this.storyContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.processStoriesAds()}processStoriesAds(){let k=this.detectPromotedMarkedStory();if(k&&(r.GetElementSize(k),!k.hasAttribute(n.ATTRIBUTE_BIS_ID))){let E=r.GenerateAndSetBisIdToInstagramAds(k);this.setSizesAndIdForAllElements(k);const D=this.createHTML(k),x=this.getAdvertiserName(k),L=this.getTargetUrl(k),Q=this.getAboutPageUrl(k);this.AddHiddenTextTags(D);const M=this.getAdInstagramObject(k,D,x,L,Q,n.INSTAGRAM_AD_PLACEMENT_TYPE_STORY);this.adBlockerAgent.IsEnabledForInstagram(),this.removeCloneElement(D);let A=setTimeout((()=>{this.ExtractAd.call(this,E,M),clearTimeout(A)}),100)}}AddHiddenTextTags(k){const E=k.querySelectorAll("svg>use");if(E)for(let k=0;k<E.length;k++){const D=E[k],r=D.parentElement;let n=D.getAttribute("xlink:href");let x=document.querySelector(n).cloneNode(!0);x.style.display="none",x.id=x.id+"_bis",r&&r.appendChild(x)}}createHTML(k){const E=document.createElement("html"),D=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,n=k.cloneNode(!0),x=document.createElement("div");return this.styleFixes(n),this.setWrapperStyles(k,x),x.appendChild(n),D.appendChild(x),E.appendChild(r),E.appendChild(D),E}get cloneBodyWithStyles(){const k=document.createElement("body"),E=document.querySelectorAll('body style, body link[rel="stylesheet"]');return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}get cloneHeadWithStyles(){const k=document.createElement("head"),E=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style');return E&&E.forEach((E=>{let D=E.cloneNode(!0);k.appendChild(D)})),k}detectPromotedMarkedStory(){if(!this.storyContainer)return null;const k=this.instaConfig.STORIES.IMG_SPACE_PERCENTAGE,E=this.instaConfig.PROMOTED_ALIASES;let D=this.storyContainer;if(this.IsStoryContentRendered(D,k)){const k=D.querySelectorAll(this.instaConfig.STORIES.PROMOTED_QUERY);for(let r of k){if(!r)continue;let k=r.hasAttribute("xlink:href")?this.GetTextFromXlink(r):r.innerText;if(k.includes("#"))continue;if(E.some((E=>k.search(E)>=0)))return D}}return null}GetTextFromXlink(k){let E=k.getAttribute("xlink:href");if(E){return document.querySelector(E).textContent}return""}getAdvertiserName(k){const E=this.instaConfig.STORIES.ADVERTISER_NAME_QUERY;let D=k.querySelector(E);return D?D.innerText:""}getTargetUrl(k){const E=this.instaConfig.STORIES.TARGET_URL_QUERY;let D=k.querySelector(E),r="";return D&&D.href&&(r=D.href),r}getAboutPageUrl(k){const E=this.instaConfig.STORIES.ABOUT_PAGE_URL_QUERY;let D=k.querySelector(E);return D&&D.href?D.href:""}IsStoryContentRendered(k,E){let D=!1;if(k){let n=r.GetFullElementSize(k);if(n.w>0){r.GetImagesSpacePercentage(this.instaConfig.TAGS_FOR_LOADING_CHECK,k,n).some((k=>k>=E))&&(D=!0)}}return D}setWrapperStyles(k,E){E.style.cssText=E.style.cssText+` max-width: ${this.maxWidthContainer(k)}`}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}styleFixes(k){k.style.transform=""}get StoryContainer(){return document.querySelector(this.instaConfig.STORIES.STORY_QUERY)}}},5972:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k,E){this.id=k,this.AdBlockerAgent=E}InjectDetector(k,E){if(document.head){var D=document.createElement("script");this.setAttributes(D),document.head.appendChild(D)}}setAttributes(k){const E=r.getURL("../executors/insta.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),this.AdBlockerAgent.IsEnabledForInstagram()&&k.setAttribute("ad-opt-on",""),k.src=E}}},9181:(k,E,D)=>{const r=D(9346),n=D(9170),x=D(1568),L=D(8384),Q=D(5364),M=D(2880),A=D(1291),T=D(8247);k.exports=class extends r{constructor(k,E,D){super(k),this.id=k,this.VideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=D,this.linkedinConfig=E.LinkedinConfig,this.LinkedinDetectorFeed=null,this.LinkedinDetectorRightColumn=null,this.ActivateTrafficDetector()}onPageUrlChanged(k,E){this.available&&setTimeout((()=>{this.DeactivateDetectors(x.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.LinkedinDetectorFeed.ActivateDetector(),this.LinkedinDetectorRightColumn.ActivateDetector()}DeactivateDetectors(k){this.LinkedinDetectorFeed.DeactivateDetector(k),this.LinkedinDetectorRightColumn.DeactivateDetector(k)}ActivateDetector(k){k===x.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.LinkedinDetectorFeed=new A(this.id,this.linkedinConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.LinkedinDetectorRightColumn=new T(this.id,this.linkedinConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.linkedinConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.LinkedinDetectorFeed.isVideo=this.isVideo.bind(this),this.LinkedinDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorFeed.getAdLinkedinObject=this.getAdLinkedinObject.bind(this),this.LinkedinDetectorFeed.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorFeed.HideElement=this.HideElement.bind(this),this.LinkedinDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorFeed.isCarousel=this.isCarousel.bind(this),this.LinkedinDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.LinkedinDetectorRightColumn.HideElement=this.HideElement.bind(this),this.LinkedinDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.LinkedinDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this),this.LinkedinDetectorRightColumn.ExtractAd=this.processAndSendLinkedinAd.bind(this),this.LinkedinDetectorRightColumn.getAdLinkedinObject=this.getAdLinkedinObject.bind(this)}ActivateTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new n(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_l",JSON.stringify(this.linkedinConfig)))}IsAdContentRendered(k,E){let D=M.GetFullElementSize(k);return M.GetImagesSpacePercentage(this.linkedinConfig.TAGS_FOR_LOADING_CHECK,k,D).some((k=>k>=E))}processAndSendLinkedinAd(k,E,D=!1,r=document){let n=r.querySelector(`[${x.ATTRIBUTE_BIS_ID}=${k}]`);n&&(Q.SendCandidatePlacementsCount(this.id,1,x.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN,null),Q.SendAdCandidates(this.id,[E],x.MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN,null),L.Gk&&L.Vk&&(n.style.cssText+=D?x.STYLES_OUTLINE_VIDEO_AD:x.STYLES_OUTLINE_SUCCESS_DETECT))}}},1291:(k,E,D)=>{const r=D(655),n=D(1568),x=D(2880);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.id=k,this.feedObserver=null,this.linkedinConfig=r,this.feedContainer=null,this.AdBlockerAgent=D,this.adPlacementType=n.LINKEDIN_AD_PLACEMENT_TYPE_FEED}HideElement(){}setSizesAndIdForAllElements(k){}getAdLinkedinObject(k,E,D,r,n,x){}doesElementExists(k){}isCarousel(k){}isVideo(k,E){}IsAdContentRendered(k,E){}ActualizeDetector(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds()}processFeedAds(){this.extractOccurrences()}get getFeedContainer(){const k=this.linkedinConfig.FEED.QUERY_CONTAINER;let E=document.querySelector(k);return!E||E.children.length<3?null:E}extractOccurrences(){let{allCells:k,minImgSquarePercentage:E}=this.allCellsAndMinImgSpace();if(k.length)for(let D of k){if(x.GetElementSize(D),D.hasAttribute(n.ATTRIBUTE_BIS_ID))continue;if(!this.IsAdContentRendered(D,E))continue;let k=x.GenerateAndSetBisIdToLinkedinAds(D);this.setSizesAndIdForAllElements(D);const r=this.createHTML(D),L=this.getTargetUrl(D),Q=this.getSocialAdvertiserUrl(D),M=this.getAdvertiserName(D),A=this.isCarousel(D),T=this.isVideo(D,this.linkedinConfig.TAGS_FOR_VIDEO_CHECK),s=this.getUniqueDataId(D);this.removeBisAttribute(r);let O=this.getAdLinkedinObject(D,r,this.adPlacementType,L,Q,M,s);if(this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(D)&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),A&&(O.carouselSlidesData=this.getCarouselSlidesFromDOM(Q,D)),D.querySelector("iframe")&&(O.doesHaveIframe=!0),T&&!A){const k=this.getVideoIdAndThumbnail(D);O.videoData=k||{}}setTimeout(this.ExtractAd.bind(this,k,O,T),100)}}allCellsAndMinImgSpace(){let k=[],E=0;return this.feedContainer&&(k=Array.from(this.feedContainer.children),E=this.linkedinConfig.FEED.IMG_SPACE_PERCENTAGE),k=k.filter((k=>this.linkedinConfig.FEED.COLLECT_AD_TYPE_EVENT?this.isPromoted(k):this.isPromoted(k)&&!k.querySelector(this.linkedinConfig.FEED.QUERY_CHECK_AD_TYPE_EVENT))),{allCells:k,minImgSquarePercentage:E}}isPromoted(k){const E=this.linkedinConfig.FEED.QUERIES_IS_PROMOTED,D=this.linkedinConfig.PROMOTED_ALIASES;let r=!1;for(let n of E){let E=Array.from(k.querySelectorAll(n));E.length&&(r=E.some((k=>{let E=k.textContent.trim().toLowerCase();if(E)return D.some((k=>E.indexOf(k)>=0))})))}return r}createHTML(k){const E=document.createElement("html"),D=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,n=k.cloneNode(!0),x=this.feedContainer,L=x.cloneNode();return this.styleFixes(L),this.setWrapperStyles(x,L,k),L.appendChild(n),D.appendChild(L),E.appendChild(r),E.appendChild(D),E}setWrapperStyles(k,E,D){E.style.cssText=E.style.cssText+` max-width: ${this.maxWidthContainer(k)}`,E.style.cssText=E.style.cssText+` max-height: ${this.maxHeightContainer(D)}`}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}maxHeightContainer(k){return k?k.offsetHeight+"px":"auto"}styleFixes(k){k.style.overflow="hidden"}get cloneBodyWithStyles(){const k=document.createElement("body"),E=document.querySelectorAll('body style, body link[rel="stylesheet"]');return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}get cloneHeadWithStyles(){const k=document.createElement("head"),E=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),D=document.createElement("meta");return D.setAttribute("charset","UTF-8"),k.append(D),E&&E.forEach((E=>{let D=E.cloneNode(!0);k.appendChild(D)})),k}getTargetUrl(k){const E=this.linkedinConfig.FEED.QUERY_TARGET_URL;let D=k.querySelector(E);return D&&D.href?D.href:""}getSocialAdvertiserUrl(k){const E=this.linkedinConfig.FEED.QUERY_ADVERTISER_URL;let D=k.querySelector(E),r="";return D&&D.href?(r=D.href,r):r}getAdvertiserName(k){let E=k.querySelector(this.linkedinConfig.FEED.QUERY_ADVERTISER_NAME);return E?E.innerText.trim():""}getVideoIdAndThumbnail(k){const E=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.QUERY_VIDEO_TAG_GET_VIDEO_ID,D=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.REGEXP_VIDEO_ID),r=k.querySelector(E);if(!r)return null;const n=this.linkedinConfig.FEED.PARAMS_GET_VIDEO_ID.ATTRIBUTE_NAME_WITH_VIDEO_ID;let x=r.getAttribute(n);if(!x)return null;let L=x.match(D);return{videoId:L?.groups?.videoId?L.groups.videoId:null,previewImageUrl:x}}getCarouselSlidesFromDOM(k,E){let D=this.searchFirstImage(E);if(!D)return[];let r=this.searchMatchedImgId(D);if(!r)return[];let n=this.getAllCodeElements();if(!n.length)return[];let x=this.filterCodeElements(n,r);if(!x.length)return[];let L=this.getSlidesDatas(x,k);return L.length?this.getSlidesImagesSources(L):[]}searchFirstImage(k){return k.querySelector(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_FIRST_IMG)}searchMatchedImgId(k){let E=new RegExp(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.REGEXP_IMG_ID),D=k.src.match(E);return D.length&&1!==D.length?D[1]:null}getAllCodeElements(){return Array.from(document.querySelectorAll(this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.QUERY_CODE_ELEMENTS))}filterCodeElements(k,E){return k.filter((k=>k.innerHTML.includes(E))).map((k=>"{"===k.innerHTML.trim()[0]?JSON.parse(k.innerHTML):{}))}getSlidesDatas(k,E){const D=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SOCIAL_ADV_URL,r=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_DATA;let n=k.map((k=>{if(!k.included)return{};let n=k.included.filter((k=>{let r=k;for(let k of D)if(r[k]&&(r=r[k]),E===r)return!0}));if(!n.length)return!1;let x=n[0];for(let k of r)x[k]&&(x=x[k]);return x}));return n.length?n[0]:[]}getSlidesImagesSources(k){const E=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_ROOT_URL,D=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_IMAGES_PATH_URL,r=this.linkedinConfig.FEED.PARAMS_GET_CAROUSEL_SLIDES.PATH_TO_SLIDE_TEXT;let n=[];for(let x of k){let k=x,L=x,Q=x;for(let D of E)k[D]&&(k=k[D]);if(!k||"string"!=typeof k)break;for(let k of D)L[k]&&(L=L[k]);if(!L||"string"!=typeof L)break;for(let k of r)Q[k]&&(Q=Q[k]);if(!Q||"string"!=typeof Q)break;let M=k+L,A={source:this.transformToValidUrl(M),text:Q};n.push(A)}return n}transformToValidUrl(k){return k.replace(/amp\;/g,"")}removeBisAttribute(k){let E=k.querySelectorAll(`*[${n.ATTRIBUTE_BIS_ID}]`);E.length&&E.forEach((k=>{k.removeAttribute(n.ATTRIBUTE_BIS_ID)}))}getUniqueDataId(k){return k.querySelector(this.linkedinConfig.FEED.QUERY_GET_UNIQUE_ID)?.getAttribute("data-id")}}},8247:(k,E,D)=>{const r=D(655),n=D(2880),x=D(1568);D(9358);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.rightColumnContainer=null,this.rightColumnObserver=null,this.linkedinConfig=r,this.adPlacementType=x.LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN,this.promotedHeaderHeaderHeight=0}HideElement(){}setSizesAndIdForAllElements(k){}getAdLinkedinObject(k,E,D,r,n,x){}doesElementExists(k){}ActualizeDetector(){return this.rightColumnContainer=this.getRightColumnContainer(),!!this.rightColumnContainer}ActivateMutationObserver(){this.getRightColumnContainer()?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,x.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.rightColumnContainer=null,this.isObserverAlreadySet=!1)}getRightColumnContainer(){const k=document.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_CONTAINER);return k&&k.children.length?k:null}isPromoted(k){const E=k?.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_PROMOTED),D=this.linkedinConfig.PROMOTED_ALIASES;let r=!1;if(E){this.promotedHeaderHeaderHeight=E.parentElement.offsetHeight;let k=E.textContent.trim().toLowerCase();r=D.includes(k)}return r}Detector(){this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer(),this.rightColumnContainer&&this.processRightColumnAds()}processRightColumnAds(){this.rightColumnContainer.querySelectorAll(this.linkedinConfig.RIGHT_COLUMN.QUERY_AD_CONTAINER).forEach((k=>{this.isIframe(k)&&this.processIFrame(k)}))}isIframe(k){return!!k?.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME)}processIFrame(k){const E=k.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IS_IFRAME),D=E?.contentDocument;if(this.isPromoted(D)){const E=[];this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD.forEach((k=>E.push(...D.querySelectorAll(k)))),this.AdBlockerAgent.IsEnabledForLinkedin()&&!this.AdBlockerAgent.IsElementHidden(k)&&(this.HideElement(k),this.AdBlockerAgent.SetHiddenAmount(E.length)),this.extractOccurrences(E,D)}}extractOccurrences(k,E){k.length&&k.forEach((k=>{if(n.GetElementSize(k),k.hasAttribute(x.ATTRIBUTE_BIS_ID))return;const D=n.GenerateAndSetBisIdToLinkedinAds(k);this.setSizesAndIdForAllElements(k);const r=this.cloneIframeWithAd(E,k),L=this.getTargetUrl(k);this.removeBisAttribute(r);const Q=this.getAdLinkedinObject(k,r,this.adPlacementType,L,"","");setTimeout(this.ExtractAd.bind(this,D,Q,!1,E),100)}))}cloneIframeWithAd(k,E){const D=document.createElement("html"),r=this.cloneHeadWithStyles(k),n=k.querySelector("body").cloneNode(!0),x=this.linkedinConfig.RIGHT_COLUMN.QUERIES_IFRAME_AD_WRAPPER.find((k=>!!n.querySelector(k))),L=n.querySelector(x),Q=n.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_IFRAME_STYLES_CONTAINER),M=n.querySelector("script");return M&&M.remove(),Q.style.height="auto",Q.style.width=`${E.offsetWidth}px`,L.parentNode.style.height="auto",L.replaceChildren(),L.appendChild(E.cloneNode(!0)),D.appendChild(r),D.appendChild(n),D}cloneHeadWithStyles(k){const E=k||document,D=document.createElement("head"),r=E.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head style'),n=document.createElement("meta");return n.setAttribute("charset","UTF-8"),D.append(n),r&&r.forEach((k=>{let E=k.cloneNode(!0);D.appendChild(E)})),D}getTargetUrl(k){return(k.querySelector(this.linkedinConfig.RIGHT_COLUMN.QUERY_TARGET_URL)||k).href||""}removeBisAttribute(k){let E=k.querySelectorAll(`*[${x.ATTRIBUTE_BIS_ID}]`);E.length&&E.forEach((k=>{k.removeAttribute(x.ATTRIBUTE_BIS_ID)}))}}},9170:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k){this.id=k}InjectDetector(k,E){if(document.head){let k=document.createElement("script");this.setAttributes(k),document.head.appendChild(k)}}setAttributes(k){const E=r.getURL("../executors/linkedin.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}}},2075:(k,E,D)=>{const r=D(2629),n=D(1050),x=D(2765),L=D(1568),Q=D(5364),M=D(8384),A=D(8792),T=D(9346),s=D(2880);k.exports=class extends T{constructor(k,E,D){super(k),this.id=k,this.AdBlockerAgent=D,this.pinterestConfig=E.PinterestConfig,this.onPageRefreshed=this.onPageUrlChanged,this.available=!1,this.pinterestFeedDetector=null,this.pinterestPinDetector=null,this.pinterestSearchDetector=null,this.VideoTrafficDetector=null,this.ActivateVideoTrafficDetector()}onPageUrlChanged(k,E){this.available&&setTimeout((()=>{this.DeactivateDetectors(L.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),100)}PageRefreshed(k,E){this.pageUrl=k,this.ticketId=E,this.onPageUrlChanged&&this.onPageUrlChanged(k,E)}ActivateDetector(k){k===L.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.pinterestFeedDetector=new r(this.id,this.pinterestConfig.FEED_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestSearchDetector=new x(this.id,this.pinterestConfig.SEARCH_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.pinterestPinDetector=new n(this.id,this.pinterestConfig.PIN_PAGE.DETECTOR_OPTIONS,this.pinterestConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.pinterestFeedDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestFeedDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestFeedDetector.isCarousel=this.isCarousel.bind(this),this.pinterestFeedDetector.HideElement=this.HideElement.bind(this),this.pinterestFeedDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestFeedDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestFeedDetector.isVideo=this.isVideo.bind(this),this.pinterestFeedDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestFeedDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestPinDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestPinDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestPinDetector.isCarousel=this.isCarousel.bind(this),this.pinterestPinDetector.HideElement=this.HideElement.bind(this),this.pinterestPinDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestPinDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestPinDetector.isVideo=this.isVideo.bind(this),this.pinterestPinDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestPinDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this),this.pinterestSearchDetector.getGlobalContainer=this.GetGlobalContainer.bind(this),this.pinterestSearchDetector.sendAdCandidatesToBackground=this.sendPinterestAd.bind(this),this.pinterestSearchDetector.isCarousel=this.isCarousel.bind(this),this.pinterestSearchDetector.HideElement=this.HideElement.bind(this),this.pinterestSearchDetector.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.pinterestSearchDetector.getAdPinterestObject=this.getAdPinterestObject.bind(this),this.pinterestSearchDetector.isVideo=this.isVideo.bind(this),this.pinterestSearchDetector.removeCloneElement=this.removeCloneElement.bind(this),this.pinterestSearchDetector.IsPostContentRendered=this.IsPostContentRendered.bind(this)}ActivateDetectors(){this.pinterestFeedDetector.ActivateDetector(),this.pinterestSearchDetector.ActivateDetector(),this.pinterestPinDetector.ActivateDetector()}DeactivateDetectors(k){this.pinterestFeedDetector.DeactivateDetector(k),this.pinterestSearchDetector.DeactivateDetector(k),this.pinterestPinDetector.DeactivateDetector(k)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new A(this.id),this.VideoTrafficDetector.InjectDetector(this.id+"_p",JSON.stringify(this.pinterestConfig)))}GetGlobalContainer(){return document.querySelector(this.pinterestConfig.MAIN_CONTAINER_QUERY)}getUniqueContentId(k){const E=k.querySelector(`div[${this.pinterestConfig.UNIQUE_ATTRIBUTE}]`);return E?E.getAttribute(this.pinterestConfig.UNIQUE_ATTRIBUTE):""}IsPostContentRendered(k,E,D){let r=!1;if(k){let n=s.GetFullElementSize(k);if(n.w>0&&n.h>0){s.GetImagesSpacePercentage(D,k,n).some((k=>k>=E))&&(r=!0)}}return r}sendPinterestAd(k,E){let D=document.querySelector(`[${L.ATTRIBUTE_BIS_ID}=${k}]`);D&&(Q.SendCandidatePlacementsCount(this.id,1,L.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST,null),Q.SendAdCandidates(this.id,[E],L.MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST,null),M.Gk&&M.Vk&&(E.videoData?D.style.cssText+=L.STYLES_OUTLINE_VIDEO_AD:D.style.cssText+=L.STYLES_OUTLINE_SUCCESS_DETECT))}}},2629:(k,E,D)=>{D(9346);const r=D(1568),n=D(2880),x=D(655);k.exports=class extends x{constructor(k,E,D,n){super(k,E,n),this.id=k,this.pinterestConfig=D,this.adBlockerAgent=n,this.adPlacementType=r.PINTEREST_AD_PLACEMENT_TYPE_FEED,this.feedContainer=null,this.lastFeedAdsCheckTime=0,this.feedObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(k,E){}setSizesAndIdForAllElements(k){}getAdPinterestObject(k,E,D,r,n,x,L){}isVideo(k,E){}removeCloneElement(k){}IsPostContentRendered(k,E,D){}ActualizeDetector(){return!!this.isFeedPageURL()&&(this.feedContainer=this.getFeedContainer(),!!this.feedContainer)}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,r.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!0)}Detector(){let k=this.detectPromotedPins();if(k&&k.length)for(let E of k){n.GetElementSize(E);if(!E.hasAttribute(r.ATTRIBUTE_BIS_ID)){let k=n.GenerateAndSetBisIdToPinterestAds(E);this.setSizesAndIdForAllElements(E);const D=this.createHTML(E),x=this.getAdvertiserName(E),L=this.getTargetUrl(E),Q=this.getTitleText(E),M=this.getAdvertiserUrl(E),A=this.getAdPinterestObject(E,D,x,L,Q,M,r.PINTEREST_AD_PLACEMENT_TYPE_FEED);this.isVideo(E,this.pinterestConfig.FEED_PAGE.TAGS_FOR_VIDEO_CHECK)&&(A.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.adBlockerAgent.IsElementHidden(E)&&(this.HideElement(E),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(D);let T=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,k,A),clearTimeout(T)}),100)}}}detectPromotedPins(){if(!this.feedContainer)return[];let k=[],E=this.pinterestConfig.FEED_PAGE.IMG_SPACE_PERCENTAGE,D=this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,r=Array.from(this.feedContainer.childNodes),n=this.pinterestConfig.PROMOTED_ALIASES;for(let x of r)if(this.IsPostContentRendered(x,E,this.pinterestConfig.FEED_PAGE.TAGS_FOR_LOADING_CHECK)){const E=x.querySelector(this.pinterestConfig.FEED_PAGE.PROMOTED_PINS_QUERY);if(!E)continue;let r=E.innerText;if(!r||"style"===E.nodeName.toLowerCase()){let k=window.getComputedStyle(E,":before");r=E.textContent,k&&k.content&&!r&&(r=k.content);for(let k of D){if(!r){r="";break}let E=k[0],D=k[1],n="join"!==E?new RegExp(D,"g"):"";"join"!==E||1!==r.length?r="replace"===E?r[E](n,""):r[E](n):r=r[0]}}n.some((k=>r.search(k)>=0))&&k.push(x)}return k}getFeedContainer(){let k=this.getGlobalContainer(),E=null;return k?(E=k.querySelector(this.pinterestConfig.FEED_PAGE.CONTAINER_QUERY),E):E}get cloneBodyWithStyles(){const k=document.createElement("body"),E=document.querySelectorAll("body style");return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}get cloneHeadWithStyles(){const k=document.createElement("head"),E=document.querySelectorAll('head link[rel="stylesheet"], head script');return E&&E.forEach((E=>{let D=E.cloneNode();k.appendChild(D)})),k}createHTML(k){const E=document.createElement("html"),D=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,n=k.cloneNode(!0);return this.styleFixes(n),D.appendChild(n),E.appendChild(r),E.appendChild(D),E}getAdvertiserName(k){const E=this.pinterestConfig.FEED_PAGE.ADVERTISER_NAME_QUERY;let D=Array.from(k.querySelectorAll(E));for(let k of D)if(k&&k.innerText)return k.innerText;return""}getAdvertiserUrl(k){const E=this.pinterestConfig.FEED_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let D=k.querySelector(E);return D?D.href:""}styleFixes(k){k.style.cssText=k.style.cssText.replace(/transform.[^;]*;/,"");for(let E of this.pinterestConfig.FEED_PAGE.STYLE_FIXES){const D=k.querySelector(E.ELEMENT_QUERY);let n=E.NEW_RULES;if(D){if(E.NEW_RULES.includes("${")){let k=JSON.parse(D.getAttribute(r.ATTRIBUTE_BIS_SIZE)).h;n=E.NEW_RULES.replace(/\$\{.[^}]*\}/,k)}D.style.cssText+=n}}}getTargetUrl(k){const E=this.pinterestConfig.FEED_PAGE.TARGET_URL_QUERY;let D=k.querySelector(E),r="";return D&&D.href&&(r=D.href),r}getTitleText(k){const E=this.pinterestConfig.FEED_PAGE.TITLE_TEXT_QUERY;let D=k.querySelector(E),r="";return D&&D.textContent.length&&(r=D.textContent),r}isFeedPageURL(){return-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin|search)\//)}}},1050:(k,E,D)=>{const r=D(1568),n=D(2880),x=D(655);k.exports=class extends x{constructor(k,E,D,n){super(k,E,n),this.id=k,this.pinterestConfig=D,this.adBlockerAgent=n,this.pinContainer=null,this.adPlacementType=r.PINTEREST_AD_PLACEMENT_TYPE_PIN,this.lastPinAdsCheckTime=0,this.pinObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(k,E){}setSizesAndIdForAllElements(k){}getAdPinterestObject(k,E,D,r,n,x,L){}isVideo(k,E){}removeCloneElement(k){}IsPostContentRendered(k,E,D){}ActualizeDetector(){return this.pinContainer=this.getPinContainer(),!!this.pinContainer}ActivateMutationObserver(){this.pinContainer?(this.pinObserver||(this.pinObserver=new MutationObserver(this.DetectCandidates.bind(this,r.AD_DETECTOR_INITIATOR_MUTATION)),this.pinObserver.observe(this.pinContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.pinObserver&&(this.pinObserver.disconnect(),this.pinObserver=null,this.pinContainer=null,this.isObserverAlreadySet=!1)}Detector(){let k=this.detectPromotedPins();if(k&&k.length)for(let E of k){n.GetElementSize(E);if(!E.hasAttribute(r.ATTRIBUTE_BIS_ID)){let k=n.GenerateAndSetBisIdToPinterestAds(E);this.setSizesAndIdForAllElements(E);const D=this.createHTML(E),r=this.getAdvertiserName(E),x=this.getTargetUrl(E),L=this.getTitleText(E),Q=this.getAdvertiserUrl(E),M=this.getAdPinterestObject(E,D,r,x,L,Q,this.adPlacementType);this.isVideo(E,this.pinterestConfig.PIN_PAGE.TAGS_FOR_VIDEO_CHECK)&&(M.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.adBlockerAgent.IsElementHidden(E)&&(this.HideElement(E),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(D);let A=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,k,M),clearTimeout(A)}),100)}}}detectPromotedPins(){if(!this.pinContainer)return[];let k=[],E=this.pinterestConfig.PIN_PAGE.IMG_SPACE_PERCENTAGE,D=this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,r=Array.from(this.pinContainer.childNodes),n=this.pinterestConfig.PROMOTED_ALIASES;for(let x of r)if(this.IsPostContentRendered(x,E,this.pinterestConfig.PIN_PAGE.TAGS_FOR_LOADING_CHECK)){const E=x.querySelector(this.pinterestConfig.PIN_PAGE.PROMOTED_PINS_QUERY);if(!E)continue;let r=E.innerText;if(!r||"style"===E.nodeName.toLowerCase()){let k=window.getComputedStyle(E,":before");r=E.textContent,k&&k.content&&!r&&(r=k.content);for(let k of D){if(!r){r="";break}let E=k[0],D=k[1],n="join"!==E?new RegExp(D,"g"):"";"join"!==E||1!==r.length?r="replace"===E?r[E](n,""):r[E](n):r=r[0]}}n.some((k=>r.search(k)>=0))&&k.push(x)}return k}getPinContainer(){let k=this.getGlobalContainer(),E=null;return k?(E=k.querySelector(this.pinterestConfig.PIN_PAGE.CONTAINER_QUERY),E):E}get cloneBodyWithStyles(){const k=document.createElement("body"),E=document.querySelectorAll("body style");return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}get cloneHeadWithStyles(){const k=document.createElement("head"),E=document.querySelectorAll('head link[rel="stylesheet"], head script');return E&&E.forEach((E=>{let D=E.cloneNode();k.appendChild(D)})),k}createHTML(k){const E=document.createElement("html"),D=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,n=k.cloneNode(!0);return this.styleFixes(n),D.appendChild(n),E.appendChild(r),E.appendChild(D),E}getAdvertiserName(k){const E=this.pinterestConfig.PIN_PAGE.ADVERTISER_NAME_QUERY;let D=Array.from(k.querySelectorAll(E));for(let k of D)if(k&&k.innerText)return k.innerText;return""}getAdvertiserUrl(k){const E=this.pinterestConfig.PIN_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let D=k.querySelector(E);return D?D.href:""}getTitleText(k){const E=this.pinterestConfig.PIN_PAGE.TITLE_TEXT_QUERY;let D=k.querySelector(E),r="";return D&&D.textContent.length&&(r=D.textContent),r}styleFixes(k){k.style.cssText=k.style.cssText.replace(/transform.[^;]*;/,"");for(let E of this.pinterestConfig.PIN_PAGE.STYLE_FIXES){const D=k.querySelector(E.ELEMENT_QUERY);let n=E.NEW_RULES;if(D){if(E.NEW_RULES.includes("${")){let k=JSON.parse(D.getAttribute(r.ATTRIBUTE_BIS_SIZE)).h;n=E.NEW_RULES.replace(/\$\{.[^}]*\}/,k)}D.style.cssText+=n}}}getTargetUrl(k){const E=this.pinterestConfig.PIN_PAGE.TARGET_URL_QUERY;let D=k.querySelector(E),r="";return D&&D.href&&(r=D.href),r}isPinPageURL(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(pin)\//))}}},2765:(k,E,D)=>{const r=D(1568),n=D(2880),x=D(655);k.exports=class extends x{constructor(k,E,D,r){super(k,E,r),this.id=k,this.pinterestConfig=D,this.adBlockerAgent=r,this.searchContainer=null,this.lastSearchPageAdsCheckTime=0,this.searchPageObserver=null,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0}isCarousel(){}HideElement(){}getGlobalContainer(){}sendAdCandidatesToBackground(k,E){}setSizesAndIdForAllElements(k){}getAdPinterestObject(k,E,D,r,n,x,L){}isVideo(k,E){}removeCloneElement(k){}IsPostContentRendered(k,E,D){}ActualizeDetector(){return this.searchContainer=this.getSearchContainer(),!!this.searchContainer}ActivateMutationObserver(){this.searchContainer?(this.searchPageObserver||(this.searchPageObserver=new MutationObserver(this.DetectCandidates.bind(this,r.AD_DETECTOR_INITIATOR_MUTATION)),this.searchPageObserver.observe(this.searchContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.searchPageObserver&&(this.searchPageObserver.disconnect(),this.searchPageObserver=null,this.searchContainer=null,this.isObserverAlreadySet=!1)}Detector(){let k=this.detectPromotedPins();if(k&&k.length)for(let E of k){n.GetElementSize(E);if(!E.hasAttribute(r.ATTRIBUTE_BIS_ID)){let k=n.GenerateAndSetBisIdToPinterestAds(E);this.setSizesAndIdForAllElements(E);const D=this.createHTML(E),x=this.getAdvertiserName(E),L=this.getTargetUrl(E),Q=this.getTitleText(E),M=this.getAdvertiserUrl(E),A=this.getAdPinterestObject(E,D,x,L,Q,M,r.PINTEREST_AD_PLACEMENT_TYPE_SEARCH);this.isVideo(E,this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_VIDEO_CHECK)&&(A.videoData={}),this.adBlockerAgent.IsEnabledForPinterest()&&!this.AdBlockerAgent.IsElementHidden(E)&&(this.HideElement(E),this.adBlockerAgent.SetHiddenAmount(1)),this.removeCloneElement(D);let T=setTimeout((()=>{this.sendAdCandidatesToBackground.call(this,k,A),clearTimeout(T)}),100)}}}detectPromotedPins(){if(!this.searchContainer)return[];let k=[],E=this.pinterestConfig.SEARCH_PAGE.IMG_SPACE_PERCENTAGE,D=this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY_BY_REGEXP,r=Array.from(this.searchContainer.childNodes),n=this.pinterestConfig.PROMOTED_ALIASES;for(let x of r)if(this.IsPostContentRendered(x,E,this.pinterestConfig.SEARCH_PAGE.TAGS_FOR_LOADING_CHECK)){const E=x.querySelector(this.pinterestConfig.SEARCH_PAGE.PROMOTED_PINS_QUERY);if(!E)continue;let r=E.innerText;if(!r||"style"===E.nodeName.toLowerCase()){let k=window.getComputedStyle(E,":before");r=E.textContent,k&&k.content&&!r&&(r=k.content);for(let k of D){if(!r){r="";break}let E=k[0],D=k[1],n="join"!==E?new RegExp(D,"g"):"";"join"!==E||1!==r.length?r="replace"===E?r[E](n,""):r[E](n):r=r[0]}}n.some((k=>r.search(k)>=0))&&k.push(x)}return k}getSearchContainer(){let k=this.getGlobalContainer(),E=null;return k?(E=k.querySelector(this.pinterestConfig.SEARCH_PAGE.CONTAINER_QUERY),E):E}get cloneBodyWithStyles(){const k=document.createElement("body"),E=document.querySelectorAll("body style");return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}get cloneHeadWithStyles(){const k=document.createElement("head"),E=document.querySelectorAll('head link[rel="stylesheet"], head script');return E&&E.forEach((E=>{let D=E.cloneNode();k.appendChild(D)})),k}createHTML(k){const E=document.createElement("html"),D=this.cloneBodyWithStyles,r=this.cloneHeadWithStyles,n=k.cloneNode(!0);return this.styleFixes(n),D.appendChild(n),E.appendChild(r),E.appendChild(D),E}getAdvertiserName(k){const E=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_NAME_QUERY;let D=Array.from(k.querySelectorAll(E));for(let k of D)if(k&&k.innerText)return k.innerText;return""}getAdvertiserUrl(k){const E=this.pinterestConfig.SEARCH_PAGE.ADVERTISER_PINTEREST_URL_QUERY;let D=k.querySelector(E);return D?D.href:""}styleFixes(k){k.style.cssText=k.style.cssText.replace(/transform.[^;]*;/,"");for(let E of this.pinterestConfig.SEARCH_PAGE.STYLE_FIXES){const D=k.querySelector(E.ELEMENT_QUERY);let n=E.NEW_RULES;if(D){if(E.NEW_RULES.includes("${")){let k=JSON.parse(D.getAttribute(r.ATTRIBUTE_BIS_SIZE)).h;n=E.NEW_RULES.replace(/\$\{.[^}]*\}/,k)}D.style.cssText+=n}}}getTargetUrl(k){const E=this.pinterestConfig.SEARCH_PAGE.TARGET_URL_QUERY;let D=k.querySelector(E),r="";return D&&D.href&&(r=D.href),r}getTitleText(k){const E=this.pinterestConfig.SEARCH_PAGE.TITLE_TEXT_QUERY;let D=k.querySelector(E),r="";return D&&D.textContent.length&&(r=D.textContent),r}isSearchPageURL(){return!(-1===document.location.href.search(/\.pinterest\..{1,6}\/(search)\//))}}},8792:(k,E,D)=>{const r=D(2880);D(1568);k.exports=class{constructor(k){this.id=k}InjectDetector(k,E){if(document.head){var D=document.createElement("script");this.setAttributes(D),document.head.appendChild(D)}}setAttributes(k){const E=r.getURL("../executors/pinterest.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}}},5465:(k,E,D)=>{const r=D(9346),n=D(9105),x=D(1568),L=D(8384),Q=D(5364),M=D(9431),A=D(1145),T=D(9955);k.exports=class extends r{constructor(k,E,D){super(k),this.id=k,this.RedditVideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=D,this.redditConfig=E.RedditConfig,this.RedditDetectorFeed=null,this.RedditDetectorComments=null,this.RedditDetectorRightColumn=null,this.ActivateTrafficDetector()}onPageUrlChanged(k,E){this.available&&setTimeout((()=>{this.DeactivateDetectors(x.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.RedditDetectorFeed.ActivateDetector(),this.RedditDetectorComments.ActivateDetector(),this.RedditDetectorRightColumn.ActivateDetector()}DeactivateDetectors(k){this.RedditDetectorFeed.DeactivateDetector(k),this.RedditDetectorComments.DeactivateDetector(k),this.RedditDetectorRightColumn.DeactivateDetector(k)}ActivateDetector(k){k===x.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.RedditDetectorFeed=new M(this.id,this.redditConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorComments=new A(this.id,this.redditConfig.COMMENT_PAGE.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.RedditDetectorRightColumn=new T(this.id,this.redditConfig.RIGHT_COLUMN.DETECTOR_OPTIONS,this.AdBlockerAgent,this.redditConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.RedditDetectorFeed.isCarousel=this.isCarousel.bind(this),this.RedditDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorFeed.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorFeed.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorFeed.HideElement=this.HideElement.bind(this),this.RedditDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorComments.HideElement=this.HideElement.bind(this),this.RedditDetectorComments.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorComments.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorComments.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorComments.doesElementExists=this.doesElementExists.bind(this),this.RedditDetectorRightColumn.HideElement=this.HideElement.bind(this),this.RedditDetectorRightColumn.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.RedditDetectorRightColumn.getAdRedditObject=this.getAdRedditObject.bind(this),this.RedditDetectorRightColumn.ExtractAd=this.processAndSendRedditAd.bind(this),this.RedditDetectorRightColumn.doesElementExists=this.doesElementExists.bind(this)}ActivateTrafficDetector(){this.RedditVideoTrafficDetector||(this.RedditVideoTrafficDetector=new n(this.id),this.RedditVideoTrafficDetector.InjectDetector(this.id+"_r",JSON.stringify(this.redditConfig)))}processAndSendRedditAd(k,E,D=!1){let r=document.querySelector(`[${x.ATTRIBUTE_BIS_ID}=${k}]`);if(r){let k=!!r.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK);Q.SendCandidatePlacementsCount(this.id,1,x.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT,null),Q.SendAdCandidates(this.id,[E],x.MESSAGE_TYPE_CANDIDATES_DATA_REDDIT,null),L.Gk&&L.Vk&&(r.style.cssText+=D?x.STYLES_OUTLINE_VIDEO_AD:k?x.STYLES_OUTLINE_TEXT_AD:x.STYLES_OUTLINE_SUCCESS_DETECT)}}}},1145:(k,E,D)=>{const r=D(655),n=D(1568),x=D(2880);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.id=k,this.redditConfig=r,this.commentPageContainer=null,this.AdBlockerAgent=D,this.commentPageObserver=null,this.adPlacementType=n.REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE}HideElement(){}setSizesAndIdForAllElements(k){}getAdRedditObject(k,E,D,r){}doesElementExists(k){}ActualizeDetector(){return this.commentPageContainer=this.getCommentPageContainer,!!this.commentPageContainer}ActivateMutationObserver(){this.commentPageContainer?(this.commentPageObserver||(this.commentPageObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.commentPageObserver.observe(this.commentPageContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.commentPageObserver&&(this.commentPageObserver.disconnect(),this.commentPageObserver=null,this.isObserverAlreadySet=!1)}get getCommentPageContainer(){let k=this.redditConfig.COMMENT_PAGE.QUERIES,E=this.redditConfig.COMMENT_PAGE.MIN_HEIGHT,D=window.innerWidth,r=this.redditConfig.COMMENT_PAGE.QUERY_TO_EXCLUDE,n=this.redditConfig.COMMENT_PAGE.TOP_DISTANCE;for(let x of k){const k=Array.from(document.querySelectorAll(x));for(let x of k){const k=x.getBoundingClientRect(),L=(D-parseInt(x.offsetWidth))/D*100,Q=Array.from(x.children);if(parseInt(x.offsetHeight)>E&&L>2&&(parseInt(k.top)>n||parseInt(k.top)<0)&&Q.length>=3&&!x.querySelector(r))return x}}return null}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processCommentPageAds(!0),this.isCommentPage&&this.commentPageContainer&&this.processCommentPageAds()}processCommentPageAds(){this.extractOccurrences()}allCellsAndMinImgSpace(){let k=[],E=[],D=this.redditConfig.COMMENT_PAGE.IMG_SPACE_PERCENTAGE;return this.commentPageContainer&&(k=Array.from(this.commentPageContainer.children).map((k=>{let D=Array.from(k.querySelectorAll(this.redditConfig.COMMENT_PAGE.QUERY_AD_INSIDE_COMMENT_TREE));if(!D?.length)return k;for(let k of D)E.push(k)})).concat(E)),k=k.filter((k=>!!k&&this.isPromoted(k))),{allCells:k,minImgSquarePercentage:D}}extractOccurrences(){let{allCells:k,minImgSquarePercentage:E}=this.allCellsAndMinImgSpace();if(k.length)for(let D of k)if(!D.hasAttribute(n.ATTRIBUTE_BIS_ID)&&!D.hasAttribute(n.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(D,E)&&this.isAvatarImgReady(D)){let k=x.GenerateAndSetBisIdToRedditAds(D),E=this.isVideoPost(D);if(this.isShadowRootExist(D)){const r=this.deepClone(D);let n=this.buildBannerHtml(r,this.adPlacementType),x=this.lookingTargetUrl(n),L=this.getAdRedditObject(D,n,x,this.adPlacementType);E&&(L.videoData=this.lookingForVideoDataInContent(D)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(D)&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),r.remove(),setTimeout(this.ExtractAd.bind(this,k,L,E),100)}else{this.setSizesAndIdForAllElements(D);const r=D.cloneNode(!0);let n=this.buildBannerHtml(r,this.adPlacementType),x=this.lookingTargetUrl(n),L=this.getAdRedditObject(D,n,x,this.adPlacementType);E&&(L.videoData=this.lookingForVideoDataInContent(D)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),r.remove(),setTimeout(this.ExtractAd.bind(this,k,L,E),100)}}}isShadowRootExist(k){if(k.shadowRoot)return!0;return Array.from(k.querySelectorAll("*")).some((k=>k.shadowRoot))}deepClone(k){let E=1;const D=(k,r)=>{const n=(k,E)=>{for(;k;)D(k,E),k=k.nextSibling};if(k){const D=k.cloneNode(!1);"SLOT"===k.nodeName&&(k.setAttribute("data-assigning-slot-id",E),D.setAttribute("data-assigning-slot-id",E)),k.assignedSlot&&k instanceof Element&&k.assignedSlot.hasAttribute("data-assigning-slot-id")&&D.setAttribute("data-assigned-to",k.assignedSlot.getAttribute("data-assigning-slot-id")),E+=1,r.appendChild(D),k.shadowRoot&&(this.setSizesAndIdForAllElements(k.shadowRoot),k.shadowRoot&&k.shadowRoot.firstChild.setAttribute&&x.SetFullSizeToElement(k.shadowRoot.firstChild),n(k.shadowRoot.firstChild,D)),this.setSizesAndIdForAllElements(k),k&&k.setAttribute&&x.SetFullSizeToElement(k),n(k.firstChild,D)}},r=document.createElement("div");return D(k,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}replaceElementsToRightSlots(k){const E=k.querySelectorAll("*[data-assigned-to]"),D=k.querySelectorAll("*[data-assigning-slot-id]");for(let k of E){const E=k.getAttribute("data-assigned-to");for(let r of D){if(E===r.getAttribute("data-assigning-slot-id")){r.appendChild(k);break}}}}buildBannerHtml(k,E){let D=this.commentPageContainer;this.setWrapperClass(D);let r=this.headCopyWithStyles;const n=document.createElement("html"),x=this.bodyCopyWithStyles,L=document.createElement("div"),Q=D.cloneNode();return L.appendChild(Q),this.setWrapperStyles(D,L),r.appendChild(this.getClassNameForStyles(k)),n.appendChild(r),Q.appendChild(k),x.appendChild(L),n.appendChild(x),n}setWrapperClass(k){let E=k.parentElement,D=!1;if(E)for(let n=0;n<50&&!D&&E;n++)if(E.nextSibling&&-1!==E.nextSibling.nodeName.search(/style/i)&&E.previousSibling&&-1!==E.previousSibling.nodeName.search(/style/i)){var r=E.getAttribute("class");k.className+=k.className.length?" "+r:r,D=!0}else E=E.parentElement}get headCopyWithStyles(){const k=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((E=>{const D=E.KEY,r=E.ALL_STYLES_FROM,n=E.COMMENT_PAGE;for(let E of Array.from(k.children))if(-1!==E.nodeName.search(/^(style|link)$/gi)){if(E.dataset[D]){let k=r.some((k=>E.dataset[D].includes(k)));!k&&this.isCommentPage&&(k=n.some((k=>E.dataset[D].includes(k)))),k||E.remove()}}else E.remove()})),this.neccesaryStyleRules){const E=document.createElement("style");E.innerHTML=this.neccesaryStyleRules,k.appendChild(E)}return this.getStylesByTagName(k),k}get neccesaryStyleRules(){let k=null;const E=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((k=>{const E=new RegExp(k,"gi"),D=document.querySelector("head").outerHTML.match(E);let r;return D&&D.length&&(r=D.join("")),r})).filter((k=>k));return E&&E.length&&(k=E.join("")),k}getClassNameForStyles(k){let E=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((D=>{const r=k.querySelector(D.CLASS_NAME_CHILD);let n=r&&r.parentElement?r.parentElement:null,x="";for(let k=1;k<D.DEEP_LEVEL;k++)n&&(n=n.parentElement);n&&(x=n.classList[0],E.innerHTML+="."+x+D.STYLES)})),E}getStylesByTagName(k){let E=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((E=>{const D=new RegExp(E.ATTRIBUTE_REGEX_VALUE);return Array.from(k.querySelectorAll(E.TAG_NAME)).filter((k=>{if(k&&k[E.ATTRIBUTE_NAME]&&-1!==k[E.ATTRIBUTE_NAME].search(D))return k;k.remove()}))})).filter((k=>k)).forEach((k=>{E=E.concat(k)})),E.forEach((E=>{k.appendChild(E)}))}get bodyCopyWithStyles(){const k=document.createElement("body"),E=document.querySelector("body style")?.cloneNode(!0);return E&&k.appendChild(E),k}isPromoted(k){if(!k)return!1;let E=k,D=null;1===E.childElementCount&&E.firstElementChild.shadowRoot&&E.firstElementChild.shadowRoot.firstElementChild?D=E.firstElementChild.shadowRoot.firstElementChild:E.shadowRoot&&(D=E.shadowRoot.firstElementChild);let r=[];D&&(r=Array.from(D.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)));let n=Array.from(E.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)).concat(r);return n.length?n.some((k=>{let E=k.textContent.trim().toLowerCase();return E?this.redditConfig.PROMOTED_ALIASES.some((k=>E.indexOf(k)>=0)):k.dataset.beforeContent?(E=k.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((k=>E.indexOf(k)>=0))):void 0})):void 0}IsPostContentRendered(k,E){let D=!1;if(k){let r=k.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){let r=x.GetFullElementSize(k);if(r.w>0){x.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,k,r).some((k=>k>=E))&&(D=!0)}}k.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(D=!0)}return D}lookingTargetUrl(k){let E="";let D=Array.from(k.querySelectorAll('a[target="_blank"]')).filter((k=>!(!k||!k.href||k.href.includes("reddit.com/user/"))));return D.length&&(E=D[0].href),E}isAvatarImgReady(k){if(!k)return!1;let E=[k],D=null;1===k.childElementCount&&k.firstElementChild.shadowRoot&&(D=k.firstElementChild.shadowRoot.firstElementChild),k.shadowRoot&&(D=k.shadowRoot.firstElementChild),D&&E.push(D);let r=!1;for(let k of E){let E=k.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(E){if(!E.shadowRoot)return!0;if(r=!!E.shadowRoot&&!!E.shadowRoot.querySelector("img"),r)break}}return r}isVideoPost(k){let E=!1;if(k){E=Array.from(k.querySelectorAll("*")).some((k=>{let E=!!k.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!E&&k.shadowRoot&&(E=!!k.shadowRoot.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length),E}))}return E}lookingForVideoDataInContent(k){const E=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT;let D=k.querySelector(E);if(D){let k=D.getAttribute("src");D.getAttribute("poster");if(k&&!k.includes("blob:")){const E=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let D=k.match(E),r=null;if(D?.groups?.videoId)return r=D.groups.videoId,{videoId:r,url:k}}}return{}}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}setWrapperStyles(k,E){E.style.cssText=E.style.cssText+`max-width: ${this.maxWidthContainer(k)}`}get isCommentPage(){return-1!==window.location.href.indexOf(this.redditConfig.COMMENT_PAGE.TEXT_FROM_HREF)}get isCommentPopup(){return!!document.querySelector(this.redditConfig.COMMENT_PAGE.QUERY_IS_POPUP)}}},9431:(k,E,D)=>{const r=D(655),n=D(1568),x=D(2880);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.id=k,this.feedObserver=null,this.redditConfig=r,this.feedContainer=null,this.AdBlockerAgent=D,this.lastTopPosition=null,this.adPlacementType=n.REDDIT_AD_PLACEMENT_TYPE_FEED}isCarousel(){}HideElement(){}setSizesAndIdForAllElements(k){}getAdRedditObject(k,E,D,r){}doesElementExists(k){}ActualizeDetector(){return!!this.isValidUrl&&(this.feedContainer=this.getFeedContainer,!!this.feedContainer)}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.lastTopPosition=parseInt(this.feedContainer.getBoundingClientRect().top),this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processFeedAds(),this.isCommentPage||this.isCommentPopup||(this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processFeedAds())}processFeedAds(){this.extractOccurrences()}allCellsAndMinImgSpace(){let k=[],E=0;if(this.feedContainer){let D=Array.from(this.feedContainer.children),r=Array.from(document.querySelectorAll(this.redditConfig.FEED.QUERY_POSTS));k=D,r&&r.length&&(k=D.concat(r)),E=this.redditConfig.FEED.IMG_SPACE_PERCENTAGE}return k=k.filter((k=>this.isPromoted(k)&&k.offsetHeight<this.redditConfig.FEED.MAX_CHILD_HEIGHT)),{allCells:k,minImgSquarePercentage:E}}extractOccurrences(){let{allCells:k,minImgSquarePercentage:E}=this.allCellsAndMinImgSpace();if(k.length)for(let D of k)if(!D.hasAttribute(n.ATTRIBUTE_BIS_ID)&&!D.hasAttribute(n.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(D,E)&&this.isAvatarImgReady(D)){this.isCarousel(D)&&this.redditConfig.IS_ACTIVE_GET_SLIDES_SRC&&this.getSlidesSrc(D);let k=x.GenerateAndSetBisIdToRedditAds(D),E=this.isVideoPost(D);if(this.isShadowRootExist(D)){const r=this.deepClone(D);let n=this.buildBannerHtml(r,this.adPlacementType),x=this.getAdRedditObject(D,n,"",this.adPlacementType);E&&(x.videoData=this.lookingForVideoDataInContent(D)),this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(D)&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),r.remove(),setTimeout(this.ExtractAd.bind(this,k,x,E),100)}else{this.setSizesAndIdForAllElements(D);const r=D.cloneNode(!0);let n=this.buildBannerHtml(r,this.adPlacementType),L=this.getAdRedditObject(D,n,"",this.adPlacementType);L.size.h<300&&(L.size=x.SetFullSizeToElement(D)),E&&(L.videoData=this.lookingForVideoDataInContent(D)),this.AdBlockerAgent.IsEnabledForReddit()&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),r.remove(),setTimeout(this.ExtractAd.bind(this,k,L,E),100)}}}isShadowRootExist(k){if(k.shadowRoot)return!0;return Array.from(k.querySelectorAll("*")).some((k=>k.shadowRoot))}deepClone(k){let E=1;const D=(k,r)=>{const n=(k,E)=>{for(;k;)D(k,E),k=k.nextSibling};if(k){const D=k.cloneNode(!1);"SLOT"===k.nodeName&&(k.setAttribute("data-assigning-slot-id",E),D.setAttribute("data-assigning-slot-id",E)),k.assignedSlot&&k instanceof Element&&k.assignedSlot.hasAttribute("data-assigning-slot-id")&&D.setAttribute("data-assigned-to",k.assignedSlot.getAttribute("data-assigning-slot-id")),E+=1,r.appendChild(D),k.shadowRoot&&(this.setSizesAndIdForAllElements(k.shadowRoot),k.shadowRoot&&k.shadowRoot.firstChild.setAttribute&&x.SetFullSizeToElement(k.shadowRoot.firstChild),n(k.shadowRoot.firstChild,D)),this.setSizesAndIdForAllElements(k),k&&k.setAttribute&&x.SetFullSizeToElement(k),n(k.firstChild,D)}},r=document.createElement("div");return D(k,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}replaceElementsToRightSlots(k){const E=k.querySelectorAll("*[data-assigned-to]"),D=k.querySelectorAll("*[data-assigning-slot-id]");for(let k of E){const E=k.getAttribute("data-assigned-to");for(let r of D){if(E===r.getAttribute("data-assigning-slot-id")){r.appendChild(k);break}}}}getSlidesSrc(k){var E=k.querySelector("ul").parentElement,D=E.querySelector(this.redditConfig.CAROUSEL_BUTTON_NEXT),r=E.querySelector(this.redditConfig.CAROUSEL_BUTTON_PREVIUOS);D&&r&&(D.click(),r.click())}buildBannerHtml(k,E){let D=this.feedContainer;this.setWrapperClass(D);let r=this.headCopyWithStyles;const n=document.createElement("html"),x=this.bodyCopyWithStyles,L=document.createElement("div"),Q=D.cloneNode();return L.appendChild(Q),this.setWrapperStyles(D,L),r.appendChild(this.getClassNameForStyles(k)),n.appendChild(r),Q.appendChild(k),x.appendChild(L),n.appendChild(x),n}setWrapperClass(k){let E=k.parentElement,D=!1;if(E)for(let n=0;n<50&&!D&&E;n++)if(E.nextSibling&&-1!==E.nextSibling.nodeName.search(/style/i)&&E.previousSibling&&-1!==E.previousSibling.nodeName.search(/style/i)){var r=E.getAttribute("class");k.className+=k.className.length?" "+r:r,D=!0}else E=E.parentElement}setWrapperStyles(k,E){E.style.cssText=E.style.cssText+`max-width: ${this.maxWidthContainer(k)}`}get getFeedContainer(){let k=this.redditConfig.FEED.QUERIES,E=window.innerWidth,D=this.redditConfig.FEED.SECONDARY_CHECK_QUERY,r=this.redditConfig.FEED.QUERY_TO_EXCLUDE;for(let n of k){const k=Array.from(document.querySelectorAll(n));for(let n of k){const k=getComputedStyle(n),x=(E-parseInt(k.width))/E*100;if(parseInt(k.height)>1e3&&x>2&&!n.querySelector(r))return n.querySelector(D)?n.querySelector(D):n}}return null}get headCopyWithStyles(){const k=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((E=>{const D=E.KEY,r=E.ALL_STYLES_FROM,n=E.FEED_PAGE;for(let E of Array.from(k.children))if(-1!==E.nodeName.search(/^(style|link)$/gi)){if(E.dataset[D]){let k=r.some((k=>E.dataset[D].includes(k)));k||this.isCommentPage||(k=n.some((k=>E.dataset[D].includes(k)))),k||E.remove()}}else E.remove()})),this.neccesaryStyleRules){const E=document.createElement("style");E.innerHTML=this.neccesaryStyleRules,k.appendChild(E)}return this.getStylesByTagName(k),k}get neccesaryStyleRules(){let k=null;const E=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((k=>{const E=new RegExp(k,"gi"),D=document.querySelector("head").outerHTML.match(E);let r;return D&&D.length&&(r=D.join("")),r})).filter((k=>k));return E&&E.length&&(k=E.join("")),k}getClassNameForStyles(k){let E=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((D=>{const r=k.querySelector(D.CLASS_NAME_CHILD);let n=r&&r.parentElement?r.parentElement:null,x="";for(let k=1;k<D.DEEP_LEVEL;k++)n&&(n=n.parentElement);n&&(x=n.classList[0],E.innerHTML+="."+x+D.STYLES)})),E}getStylesByTagName(k){let E=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((E=>{const D=new RegExp(E.ATTRIBUTE_REGEX_VALUE);return Array.from(k.querySelectorAll(E.TAG_NAME)).filter((k=>{if(k&&k[E.ATTRIBUTE_NAME]&&-1!==k[E.ATTRIBUTE_NAME].search(D))return k;k.remove()}))})).filter((k=>k)).forEach((k=>{E=E.concat(k)})),E.forEach((E=>{k.appendChild(E)}))}get bodyCopyWithStyles(){const k=document.createElement("body"),E=Array.from(document.querySelectorAll("body style")).map((k=>{if(k)return k.cloneNode(!0)}));return E&&E.forEach((E=>{k.appendChild(E)})),k}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}isVideoPost(k){let E=!1;if(k){E=Array.from(k.querySelectorAll("*")).some((k=>{let E=!!k.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length;return!E&&k.shadowRoot&&(E=!!k.shadowRoot.querySelectorAll(this.redditConfig.TAGS_FOR_VIDEO_CHECK).length),E}))}return E}lookingForVideoDataInContent(k){const E=this.redditConfig.VIDEO_TRAFFIC_DETECTOR.QUERY_VIDEO_DATA_FROM_CONTENT;let D=k.querySelector(E);if(D){let k=D.getAttribute("src");D.getAttribute("poster");if(k&&!k.includes("blob:")){const E=new RegExp(this.redditConfig.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let D=k.match(E),r=null;if(D?.groups?.videoId)return r=D.groups.videoId,{videoId:r,url:k}}}return{}}isPromoted(k){if(k){let E=k;1===E.childElementCount&&E.firstElementChild.shadowRoot&&E.firstElementChild.shadowRoot.firstElementChild&&(E=E.firstElementChild.shadowRoot.firstElementChild);let D=Array.from(E.querySelectorAll(this.redditConfig.FEED.PROMOTED_SELECTOR)),r=Array.from(E.querySelectorAll(this.redditConfig.COMMENT_PAGE.PROMOTED_SELECTOR)),n=Array.from(k.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR)),x=D.concat(n).concat(r);if(x.length)return x.some((k=>{let E=k.textContent.trim().toLowerCase();return E?this.redditConfig.PROMOTED_ALIASES.some((k=>E.indexOf(k)>=0)):k.dataset.beforeContent?(E=k.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((k=>E.indexOf(k)>=0))):void 0}))}return!1}IsPostContentRendered(k,E){let D=!1;if(k){let r=k.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(r&&0===r.length){let r=x.GetFullElementSize(k);if(r.w>0){x.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,k,r).some((k=>k>=E))&&(D=!0)}}k.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(D=!0)}return D}isAvatarImgReady(k){if(!k)return!1;let E=[k],D=null;1===k.childElementCount&&k.firstElementChild.shadowRoot&&(D=k.firstElementChild.shadowRoot.firstElementChild),k.shadowRoot&&(D=k.shadowRoot.firstElementChild),D&&E.push(D);let r=!1;for(let k of E){let E=k.querySelector(this.redditConfig.QUERY_CHECK_READY_AD_CELLS);if(E){if(!E.shadowRoot)return!0;if(r=!!E.shadowRoot&&!!E.shadowRoot.querySelector("img"),r)break}}return r}get isValidUrl(){return!this.redditConfig.FEED.INVALID_URL_PATHS.some((k=>window.location.href.includes(k)))}}},9955:(k,E,D)=>{const r=D(655),n=D(1568),x=D(2880);k.exports=class extends r{constructor(k,E,D,r){super(k,E,D),this.id=k,this.rightColumnObserver=null,this.redditConfig=r,this.rightColumnContainer=null,this.AdBlockerAgent=D,this.lastTopPosition=null,this.adPlacementType=n.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN}HideElement(){}setSizesAndIdForAllElements(k){}getAdRedditObject(k,E,D,r){}doesElementExists(k){}ActualizeDetector(){return this.rightColumnContainer=this.getRightColumnContainer,!!this.rightColumnContainer}ActivateMutationObserver(){this.rightColumnContainer?(this.rightColumnObserver||(this.rightColumnObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.rightColumnObserver.observe(this.rightColumnContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.rightColumnObserver&&(this.rightColumnObserver.disconnect(),this.rightColumnObserver=null,this.isObserverAlreadySet=!1)}Detector(){this.AdBlockerAgent.IsEnabledForReddit()&&this.processRightColumnAds(),this.rightColumnContainer=this.doesElementExists(this.rightColumnContainer)?this.rightColumnContainer:this.getRightColumnContainer,this.rightColumnContainer&&this.processRightColumnAds()}processRightColumnAds(){this.extractOccurrences(n.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN)}allCellsAndMinImgSpace(){let k=[],E=0;return this.rightColumnContainer&&this.rightColumnContainer.children&&(k=Array.from(this.rightColumnContainer.children).map((k=>k.querySelector("div ~ div > button")?k.querySelector("div:nth-child(1)"):"HR"===k.nodeName||0===k.getBoundingClientRect().height?null:k)).filter((k=>k)),E=this.redditConfig.RIGHT_COLUMN.IMG_SPACE_PERCENTAGE),k=k.filter((k=>this.isPromoted(k))),{allCells:k,minImgSquarePercentage:E}}extractOccurrences(){let{allCells:k,minImgSquarePercentage:E}=this.allCellsAndMinImgSpace();if(k.length)for(let D of k)if(!D.hasAttribute(n.ATTRIBUTE_BIS_ID)&&!D.hasAttribute(n.ATTRIBUTE_BIS_SIZE)&&this.IsPostContentRendered(D,E)){let k=x.GenerateAndSetBisIdToRedditAds(D);if(this.isShadowRootExist(D)){const E=this.deepClone(D);let r=this.buildBannerHtml(E),n=this.lookingTargetUrl(r),x=this.getAdRedditObject(D,r,n,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(D)&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),E.remove(),setTimeout(this.ExtractAd.bind(this,k,x),100)}else{this.setSizesAndIdForAllElements(D);const E=D.cloneNode(!0);let r=this.buildBannerHtml(E),n=this.lookingTargetUrl(r),x=this.getAdRedditObject(D,r,n,this.adPlacementType);this.AdBlockerAgent.IsEnabledForReddit()&&!this.AdBlockerAgent.IsElementHidden(D)&&(this.HideElement(D),this.AdBlockerAgent.SetHiddenAmount(1)),E.remove(),setTimeout(this.ExtractAd.bind(this,k,x),100)}}}isShadowRootExist(k){if(k.shadowRoot)return!0;return Array.from(k.querySelectorAll("*")).some((k=>k.shadowRoot))}deepClone(k){let E=1;const D=(k,r)=>{const n=(k,E)=>{for(;k;)D(k,E),k=k.nextSibling};if(k){const D=k.cloneNode(!1);"SLOT"===k.nodeName&&(k.setAttribute("data-assigning-slot-id",E),D.setAttribute("data-assigning-slot-id",E)),k.assignedSlot&&k instanceof Element&&k.assignedSlot.hasAttribute("data-assigning-slot-id")&&D.setAttribute("data-assigned-to",k.assignedSlot.getAttribute("data-assigning-slot-id")),E+=1,r.appendChild(D),k.shadowRoot&&(this.setSizesAndIdForAllElements(k.shadowRoot),k.shadowRoot&&k.shadowRoot.firstChild.setAttribute&&x.SetFullSizeToElement(k.shadowRoot.firstChild),n(k.shadowRoot.firstChild,D)),this.setSizesAndIdForAllElements(k),k&&k.setAttribute&&x.SetFullSizeToElement(k),n(k.firstChild,D)}},r=document.createElement("div");return D(k,r),this.replaceElementsToRightSlots(r.firstElementChild),r.firstElementChild}buildBannerHtml(k){let E=this.rightColumnContainer;this.setWrapperClass(E);let D=this.headCopyWithStyles;const r=document.createElement("html"),n=this.bodyCopyWithStyles,x=document.createElement("div"),L=E.cloneNode();return x.appendChild(L),this.setWrapperStyles(E,x),D.appendChild(this.getClassNameForStyles(k)),r.appendChild(D),L.appendChild(k),n.appendChild(x),r.appendChild(n),r}setWrapperClass(k){let E=k.parentElement,D=!1;if(E)for(let n=0;n<50&&!D&&E;n++)if(E.nextSibling&&-1!==E.nextSibling.nodeName.search(/style/i)&&E.previousSibling&&-1!==E.previousSibling.nodeName.search(/style/i)){var r=E.getAttribute("class");k.className+=k.className.length?" "+r:r,D=!0}else E=E.parentElement}setWrapperStyles(k,E){E.style.cssText=E.style.cssText+`max-width: ${this.maxWidthContainer(k)}`}replaceElementsToRightSlots(k){const E=k.querySelectorAll("*[data-assigned-to]"),D=k.querySelectorAll("*[data-assigning-slot-id]");for(let k of E){const E=k.getAttribute("data-assigned-to");for(let r of D){if(E===r.getAttribute("data-assigning-slot-id")){r.appendChild(k);break}}}}isPromoted(k){if(k){let E=k,D=Array.from(E.querySelectorAll(this.redditConfig.RIGHT_COLUMN.PROMOTED_SELECTOR));if(D.length)return D.some((k=>{let E=k.textContent.trim().toLowerCase();return E?this.redditConfig.PROMOTED_ALIASES.some((k=>E.indexOf(k)>=0)):k.dataset.beforeContent?(E=k.dataset.beforeContent,this.redditConfig.PROMOTED_ALIASES.some((k=>E.indexOf(k)>=0))):void 0}))}return!1}IsPostContentRendered(k,E){let D=!1;if(k){let r=k.querySelectorAll(this.redditConfig.PROGRESS_SELECTOR);if(0===r?.length){let r=x.GetFullElementSize(k);if(r.w>0&&r.h>0){x.GetImagesSpacePercentage(this.redditConfig.TAGS_FOR_LOADING_CHECK,k,r).some((k=>k>=E))&&(D=!0)}}k.querySelector(this.redditConfig.TAGS_FOR_TEXT_AD_CHECK)&&(D=!0)}return D}lookingTargetUrl(k){let E="";let D=Array.from(k.querySelectorAll('a[target="_blank"]')).filter((k=>!(!k?.href||this.redditConfig.BAD_URL_PATTERN_FOR_TARGET_URL.some((E=>k.href.includes(E))))));return D.length&&(E=D[0].href),E}get headCopyWithStyles(){const k=document.querySelector("head").cloneNode(!0);if(this.redditConfig.NECESSARY_STYLES.BY_DATA_ATTRIBUTE.forEach((E=>{const D=E.KEY,r=E.ALL_STYLES_FROM,n=E.FEED_PAGE;for(let E of Array.from(k.children))if(-1!==E.nodeName.search(/^(style|link)$/gi)){if(E.innerHTML=E.innerHTML.replace(/}.[^}]*{visibility:hidden}/,"}"),E.dataset[D]){let k=r.some((k=>E.dataset[D].includes(k)));k||this.isCommentPage||(k=n.some((k=>E.dataset[D].includes(k)))),k||E.remove()}}else E.remove()})),this.necessaryStyleRules){const E=document.createElement("style");E.innerHTML=this.necessaryStyleRules,k.appendChild(E)}return this.getStylesByTagName(k),k}get necessaryStyleRules(){let k=null;const E=this.redditConfig.NECESSARY_STYLES.BY_QUERIES_RULES.map((k=>{const E=new RegExp(k,"gi"),D=document.querySelector("head").outerHTML.match(E);let r;return D&&D.length&&(r=D.join("")),r})).filter((k=>k));return E&&E.length&&(k=E.join("")),k}getClassNameForStyles(k){let E=document.createElement("style");return this.redditConfig.NECESSARY_STYLES.BY_CLASS_NAME.forEach((D=>{const r=k.querySelector(D.CLASS_NAME_CHILD);let n=r&&r.parentElement?r.parentElement:null,x="";for(let k=1;k<D.DEEP_LEVEL;k++)n&&(n=n.parentElement);n&&(x=n.classList[0],E.innerHTML+="."+x+D.STYLES)})),E}getStylesByTagName(k){let E=[];this.redditConfig.NECESSARY_STYLES.BY_TAG_NAME.map((E=>{const D=new RegExp(E.ATTRIBUTE_REGEX_VALUE);return Array.from(k.querySelectorAll(E.TAG_NAME)).filter((k=>{if(k&&k[E.ATTRIBUTE_NAME]&&-1!==k[E.ATTRIBUTE_NAME].search(D))return k;k.remove()}))})).filter((k=>k)).forEach((k=>{E=E.concat(k)})),E.forEach((E=>{k.appendChild(E)}))}get bodyCopyWithStyles(){const k=document.createElement("body"),E=document.querySelector("body style")?.cloneNode(!0);return E&&k.appendChild(E),k}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}get getRightColumnContainer(){const k=this.redditConfig.RIGHT_COLUMN.QUERIES;let E=null;for(let D of k){let k=Array.from(document.querySelectorAll(D));if(!k.length)continue;let r=k.filter((k=>k.children.length>2));if(r&&r.length){E=r[0];break}}return E}}},9105:(k,E,D)=>{const r=D(2880);D(1568);k.exports=class{constructor(k){this.id=k}setAttributes(k){const E=r.getURL("../executors/reddit.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}InjectDetector(){if(document.head){var k=document.createElement("script"),E=function(){document.head.appendChild(k),window.removeEventListener("DOMContentLoaded",E)};this.setAttributes(k),window.addEventListener("DOMContentLoaded",E)}}}},5849:(k,E,D)=>{const r=D(9346),n=D(1568),x=D(8384),L=D(5364),Q=D(1687),M=D(8838),A=D(2880),T=D(9358);k.exports=class extends r{constructor(k,E,D){super(k),this.id=k,this.VideoTrafficDetector=null,this.onPageRefreshed=this.onPageUrlChanged,this.AdBlockerAgent=D,this.tiktokConfig=E.TiktokConfig,this.tiktokDetectorFeed=null,this.ActivateTrafficDetector()}onPageUrlChanged(){this.available&&setTimeout((()=>{this.DeactivateDetectors(n.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateDetectors(){this.tiktokDetectorFeed.ActivateDetector()}DeactivateDetectors(k){this.tiktokDetectorFeed.DeactivateDetector(k)}ActivateDetector(k){k===n.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.tiktokDetectorFeed=new Q(this.id,this.tiktokConfig.FEED.DETECTOR_OPTIONS,this.AdBlockerAgent,this.tiktokConfig),this.AddNecessaryMethods(),this.ActivateDetectors()}AddNecessaryMethods(){this.tiktokDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.tiktokDetectorFeed.getTiktokAdObject=this.getTiktokAdObject.bind(this),this.tiktokDetectorFeed.ExtractAd=this.processAndSendTiktokAd.bind(this),this.tiktokDetectorFeed.removePostCopy=this.removePostCopy.bind(this),this.tiktokDetectorFeed.HideElement=this.HideElement.bind(this)}ActivateTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new M(this.id,this.AdBlockerAgent),this.VideoTrafficDetector.InjectDetector(this.id+"_t",JSON.stringify(this.tiktokConfig)))}processAndSendTiktokAd(k,E,D=document){let r=D.querySelector(`[${n.ATTRIBUTE_BIS_ID}=${k}]`);r&&(L.SendAdCandidates(this.id,[E],n.MESSAGE_TYPE_TIKTOK_FEED_DATA,null),x.Gk&&x.Vk&&(r.children[0].children[0].style.cssText+=n.STYLES_OUTLINE_VIDEO_AD))}getTiktokAdObject(k,E,D,r){const n=A.SetFullSizeToElement(k);return{content:T.encode(E.outerHTML),size:n,adPlacementType:r,videoId:D}}removePostCopy(k){k.remove()}}},1687:(k,E,D)=>{const r=D(2880),n=D(1568),x=D(655);k.exports=class extends x{constructor(k,E,D,r){super(k,E,D),this.tiktokConfig=r,this.id=k,this.adBlockerAgent=D,this.feedContainer=null,this.feedObserver=null}HideElement(k){}setSizesAndIdForAllElements(k){}getTiktokAdObject(k,E,D,r){}removePostCopy(k){}ActualizeDetector(){return this.feedContainer=this.#B(),!!this.feedContainer}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.DetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.#X()}CheckIfAdRendered(k){for(let E of this.tiktokConfig.FEED.PREVIEW_QUERIES){const D=k.querySelector(E);if(D?.src)return new RegExp(/^https:\/\//).test(D.src)}return!1}#B(){const k=this.tiktokConfig.FEED.CONTAINER_QUERIES,E=this.tiktokConfig.FEED.CONTAINER_MIN_HEIGHT;for(let D of k){let k=document.querySelector(D);if(k){if(k.offsetHeight>=E)return k}}}#X(){let k=this.#h();if(k?.length)for(let E of k)if(this.CheckIfAdRendered(E)&&!E.hasAttribute(n.ATTRIBUTE_BIS_ID)){this.setSizesAndIdForAllElements(E);const k=r.GenerateAndSetBisIdToInstagramAds(E),D=this.#y(E),x=this.#Y(E),L=this.getTiktokAdObject(E,D,x,n.TIKTOK_AD_PLACEMENT_TYPE_FEED);this.removePostCopy(D);let Q=setTimeout((()=>{this.ExtractAd.call(this,k,L),clearTimeout(Q)}),100)}}#h(){if(!this.feedContainer)return[];let k=Array.from(this.feedContainer.children),E=[];for(let D of k){if(this.tiktokConfig.FEED.PROMOTED_QUERIES.find((k=>D.querySelector(k)))){E.push(D);break}}return E}#y(k){const E=this.feedContainer.cloneNode(),D=document.createElement("html"),r=this.#J(),n=this.#f(),x=k.cloneNode(!0);return E.appendChild(x),r.appendChild(E),D.appendChild(n),D.appendChild(r),D}#J(){const k=document.createElement("body"),E=document.querySelectorAll('body style, body link[rel="stylesheet"]');return E&&E.forEach((E=>{const D=E.cloneNode(!0);k.appendChild(D)})),k}#f(){const k=document.createElement("head"),E=document.querySelectorAll("style"),D=document.querySelectorAll('head link[rel="stylesheet"], head link[rel="preload"], head');return E&&E.forEach((E=>{let D="";for(let k of E.sheet.cssRules)D+=k.cssText;const r=E.cloneNode(!0);r.innerHTML=D,k.appendChild(r)})),D&&D.forEach((E=>{let D=E.cloneNode(!0);k.appendChild(D)})),k}#Y(k){const E=this.tiktokConfig.FEED.VIDEO_CONTAINER_QUERIES.find((E=>k.querySelector(E))),D=k.querySelector(E);if(D){const k=new RegExp(/\d{5,}/).exec(D.id);return k?k[0]:null}return null}}},8838:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k,E){this.id=k,this.AdBlockerAgent=E}InjectDetector(k){if(document.head){let k=document.createElement("script");this.setAttributes(k),document.head.appendChild(k)}}setAttributes(k){const E=r.getURL("../executors/tiktok.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E,this.AdBlockerAgent.IsEnabledForTiktok()&&k.setAttribute("adblock_use","")}}},9203:(k,E,D)=>{const r=D(1568),n=D(4736);k.exports=class{constructor(k,E,D,r){this.id=k,this.videoTrafficDetector=null,this.ioManager=D,this.adBlockerAgent=r,this.config=E.twitchConfig,this.videoTrafficDetector=new n(this.id,this.config,this.ioManager),this.videoTrafficDetector.InjectDetector()}ActivateDetector(k){k===r.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0)}}},4736:(k,E,D)=>{const r=D(2880),n=D(9358),x=D(855);k.exports=class extends x{constructor(k,E,D){super(k,E,D,!0),this.id=k,this.IOManager.onGotTwitchVideoInstreamDataCallback=this.processTwitchInstreamData.bind(this),this.signature=null,this.token=null,this.config=E}InjectDetector(){if(document.head){let k=document.createElement("script");this.setAttributes(k),document.head.appendChild(k)}}setAttributes(k){const E=r.getURL("../executors/twitch.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}processTwitchInstreamData(k){this.findAndSaveSignatureAndToken(k.content);const E=this.parsePostBodyData(k);let D=this.buildInstreamAdURL(E);const r=this.prepareObjectToSend(D);this.sendCandidateToBackground(r)}findAndSaveSignatureAndToken(k){k?.includes("streamPlaybackAccessToken")&&(this.signature=k.match(/signature":(| )["'](?<sig>.[^"]*)",/)?.groups?.sig,this.token=encodeURIComponent(k.match(/value":(| )["'](?<token>.*)/).groups.token.replace(/","signature":.*/,"").replace(/\\/g,"")))}parsePostBodyData(k){if(!new RegExp("video-edge.*.ts$").test(k.url)&&"application/x-www-form-urlencoded; charset=utf-8"!==k.type)return;if(!k.encodedPostBody||0!==k.encodedPostBody.search(/^data=/))return;let E=n.decode(k.encodedPostBody.replace(/data=/,""),!1);return JSON.parse(E)}buildInstreamAdURL(k){if(!this.signature)return;const E={};if(E.channel=document.location.pathname.match(/\//g)?.length>1?"":document.location.pathname.replace(/\//g,""),!E.channel)return;E.browserFamily=r.IsChrome()?"chrome":"firefox",E.browserVersion=navigator.userAgent.match(new RegExp("(chrome|firefox)/(?<browserVersion>\\d{3}.\\d)","i")).groups.browserVersion;const{osName:D,osVersion:n}=navigator.userAgent.match(/\((?<osName>.[^ ]*)\s(?<osVersion>.[^;]*);\)?/)?.groups;E.osName=D,E.osVersion=n,E.signature=this.signature,E.token=this.token,E.p=Math.floor(1e7*Math.random())+1;for(let D of k)if(D?.properties.hasOwnProperty("play_session_id")){E.playSessionId=D.properties.play_session_id;break}return E.playSessionId?this.replaceMacrosesInUrl(E):void 0}getMacrosArray(){return this.config.URL_PATTERN_TO_GET_HLS.match(/\$\{(.[^}]*)}/g).map((k=>k.replace(/[${}]/g,"")))}replaceMacrosesInUrl(k){let E=this.config.URL_PATTERN_TO_GET_HLS;for(let[D,r]of Object.entries(k))E=E.replace(`\${${D}}`,r);return E}prepareObjectToSend(k){return{requestMethod:"GET",urlToGetInstreamData:k,url:"",contentType:"",mediaType:"",alias:"TWITCH_HLS"}}sendCandidateToBackground(k){this.IOManager.SendTwitchInstreamData(this.id,k)}}},4919:(k,E,D)=>{const r=D(8384),n=D(2880),x=D(1568),L=D(9346),Q=D(5364),M=D(1402),A=D(9473);D(5473);k.exports=class extends L{constructor(k,E,D){super(k),this.id=k,this.onPageRefreshed=this.onPageUrlChanged,this.twConfig=E.TwitterConfig,this.TwitterDetectorFeed=null,this.TwitterDetectorRightColumn=null,this.VideoTrafficDetector=null,this.AdBlockerAgent=D,this.ActivateVideoTrafficDetector()}onPageUrlChanged(k,E){this.available&&setTimeout((()=>{this.DeactivateDetectors(x.AD_DETECTOR_INITIATOR_URL),this.ActivateDetectors()}),50)}ActivateVideoTrafficDetector(){this.VideoTrafficDetector||(this.VideoTrafficDetector=new M(this.id),this.VideoTrafficDetector.InjectDetector())}ActivateDetector(k){k===x.ACTIVATION_BY_ADS_MANAGER&&(this.available=!0),this.TwitterDetectorFeed=new A(this.id,this.twConfig.FEED.DETECTOR_OPTIONS,this.twConfig,this.AdBlockerAgent),this.AddNecessaryMethods(),this.ActivateDetectors()}ActivateDetectors(){this.TwitterDetectorFeed.ActivateDetector()}AddNecessaryMethods(){this.TwitterDetectorFeed.ExtractAd=this.processAndSendTwitterAd.bind(this),this.TwitterDetectorFeed.isVideo=this.isVideo.bind(this),this.TwitterDetectorFeed.HideElement=this.HideElement.bind(this),this.TwitterDetectorFeed.IsAdContentRendered=this.IsAdContentRendered.bind(this),this.TwitterDetectorFeed.doesElementExists=this.doesElementExists.bind(this),this.TwitterDetectorFeed.setSizesAndIdForAllElements=this.setSizesAndIdForAllElements.bind(this),this.TwitterDetectorFeed.getAdTwitterObject=this.getAdTwitterObject.bind(this)}DeactivateDetectors(k){this.TwitterDetectorFeed.DeactivateDetector(k)}IsAdContentRendered(k,E){let D=!1;if(k){let r=k.querySelectorAll(this.twConfig.PROGRESS_SELECTOR);if(r&&0===r.length){let r=n.GetFullElementSize(k);if(r.w>0){n.GetImagesSpacePercentage(this.twConfig.TAGS_FOR_LOADING_CHECK,k,r).some((k=>k>=E))&&(D=!0)}}}return D}processAndSendTwitterAd(k,E,D=!1,n=document){let L=n.querySelector(`[${x.ATTRIBUTE_BIS_ID}=${k}]`);L&&(Q.SendCandidatePlacementsCount(this.id,1,x.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER,null),Q.SendAdCandidates(this.id,[E],x.MESSAGE_TYPE_CANDIDATES_DATA_TWITTER,null),r.Gk&&r.Vk&&(L.style.cssText+=D?x.STYLES_OUTLINE_VIDEO_AD:x.STYLES_OUTLINE_SUCCESS_DETECT))}}},9473:(k,E,D)=>{const r=D(2880),n=D(1568),x=D(655);k.exports=class extends x{constructor(k,E,D,n){super(k,E,n),this.available=!1,this.twConfig=D,this.AdBlockerAgent=n,this.feedObserver=null,this.activated=!1,this.observerNodesListenerInterval=null,this.observerNodesChecksAmount=0,this.lastFeedPostAdsCheckTime=r.GetCurrentTimestampMs(),this.lastFeedWhoToFollowAdsCheckTime=r.GetCurrentTimestampMs(),this.feedContainer=null}isVideo(k,E){}HideElement(){}IsAdContentRendered(k,E){}doesElementExists(k){}setSizesAndIdForAllElements(k){}getAdTwitterObject(k,E,D){}ActualizeDetector(){return this.feedContainer=this.getFeedContainer,!!this.feedContainer}get getFeedContainer(){const k=this.twConfig.FEED.CONTAINER;let E=Array.from(document.querySelectorAll(k)).filter((k=>k&&k.children.length>2));return E&&E.length?E[0]:null}ActivateMutationObserver(){this.feedContainer?(this.feedObserver||(this.feedObserver=new MutationObserver(this.startIntervalDetectCandidates.bind(this,n.AD_DETECTOR_INITIATOR_MUTATION)),this.feedObserver.observe(this.feedContainer,{childList:!0,subtree:!0}),window.addEventListener("beforeunload",(()=>{this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.isObserverAlreadySet=!1)}))),this.isObserverAlreadySet=!0):this.isObserverAlreadySet=!1}DeactivateMutationObserver(){this.feedObserver&&(this.feedObserver.disconnect(),this.feedObserver=null,this.feedContainer=null,this.isObserverAlreadySet=!1)}Detector(){this.feedContainer=this.doesElementExists(this.feedContainer)?this.feedContainer:this.getFeedContainer,this.feedContainer&&this.processAdsFromFeed()}processAdsFromFeed(){this.processFeedAds(),this.processFeedWhoToFollowAds()}processFeedAds(){this.extractOccurrences(n.TWITTER_AD_PLACEMENT_TYPE_FEED)}processFeedWhoToFollowAds(){this.extractOccurrences(n.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW)}allCellsAndMinImgSpace(k){let E=[],D=0;return k===n.TWITTER_AD_PLACEMENT_TYPE_FEED?(this.feedContainer&&(E=Array.from(this.feedContainer.children)),D=this.twConfig.FEED.MIN_IMGS_SPACE_PERCENTAGE):k===n.TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW&&(E=Array.from(document.querySelectorAll(this.twConfig.FEED.WHO_TO_FOLLOW_SELECTOR)),D=this.twConfig.FEED.WHO_TO_FOLLOW_MIN_IMGS_SPACE_PERCENTAGE),E=E.filter((k=>this.isPromoted(k))),{allCells:E,minImgSquarePercentage:D}}extractOccurrences(k){let{allCells:E,minImgSquarePercentage:D}=this.allCellsAndMinImgSpace(k);if(E.length)for(const x of E)if(!x.hasAttribute(n.ATTRIBUTE_BIS_ID)&&!x.hasAttribute(n.ATTRIBUTE_BIS_SIZE)&&this.IsAdContentRendered(x,D)){let E,D=r.GenerateAndSetBisIdToTwitterAds(x);this.setSizesAndIdForAllElements(x);let L=this.isVideo(x,this.twConfig.FEED.TAGS_FOR_VIDEO_TWEET_CHECK);const Q=x.cloneNode(!0);let M=this.buildBannerHtml(Q,k),A=this.chooseContent(x,M);E=this.getAdTwitterObject(A,x,k,this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT),k===n.TWITTER_AD_PLACEMENT_TYPE_FEED&&(L&&!this.isCarouselCandidate(x)?E.videoData={}:!L&&this.isCarouselCandidate(x)&&this.twConfig.COLLECT_CAROUSEL_DATA&&(E.carouselData={})),this.AdBlockerAgent.IsEnabledForTwitter()&&!this.AdBlockerAgent.IsElementHidden(x)&&(this.HideElement(x),this.AdBlockerAgent.SetHiddenAmount(1)),setTimeout(this.ExtractAd.bind(this,D,E,L),100)}}chooseContent(k,E){return this.twConfig.COLLECT_ALTERNATIVE_HTML_CONTENT?E:k.querySelector(this.twConfig.FEED.TWEETS_SELECTOR)?k.querySelector(this.twConfig.FEED.TWEETS_SELECTOR):k}buildBannerHtml(k,E){let D=this.feedContainer;this.setWrapperClass(D),k.style.transform="none",k.style.position="relative";let r=this.headCopyWithStyles;const n=document.createElement("html"),x=document.createElement("body"),L=document.createElement("div"),Q=D.cloneNode();return Q.style.minHeight="auto",L.appendChild(Q),this.setWrapperStyles(D,L),n.appendChild(r),Q.appendChild(k),x.appendChild(L),n.appendChild(x),n}setWrapperClass(k){let E=k.parentElement,D=!1;if(E)for(let r=0;r<50&&!D&&E;r++)if(E.nextSibling&&-1!==E.nextSibling.nodeName.search(/style/i)&&E.previousSibling&&-1!==E.previousSibling.nodeName.search(/style/i)){let r=E.getAttribute("class");k.className+=k.className.length?" "+r:r,D=!0}else E=E.parentElement}setWrapperStyles(k,E){E.style.cssText=E.style.cssText+`max-width: ${this.maxWidthContainer(k)}`}maxWidthContainer(k){return k?k.offsetWidth+"px":"auto"}get headCopyWithStyles(){const k=document.createElement("head"),E=this.#a();if(E){let D=document.createElement("style");D.innerHTML=E,k.appendChild(D)}const D=Array.from(document.querySelectorAll("head meta")).map((k=>{if(k)return k.cloneNode(!0)}));return D&&D.forEach((E=>{k.appendChild(E)})),k}#a(){const k=Array.from(document.styleSheets);let E=[];for(let D of k)try{E.push(D.cssRules)}catch(k){}return E.reduce(((k,E)=>{for(let D of E)D?.cssText&&(k+=D.cssText+"\n");return k}),"")}isPromoted(k){if(k){let E=Array.from(k.querySelectorAll(this.twConfig.PROMOTED_SELECTOR));if(E.length)return E.some((k=>{let E=k.textContent;return!(!E||"string"!=typeof E)&&this.twConfig.PROMOTED_ALIASES.some((k=>{let D=E.toLowerCase().trim().split(" ");return D.length<6&&D.includes(k.toLowerCase().trim())}))}))}return!1}isCarouselCandidate(k){if(k){if(k.querySelector(this.twConfig.FEED.CHECK_IF_CAROUSEL_QUERY))return!0}return!1}}},5473:()=>{},1402:(k,E,D)=>{const r=D(2880);k.exports=class{constructor(k){this.id=k}InjectDetector(){if(document.head){let k=document.createElement("script"),E=function(){document.head.appendChild(k),window.removeEventListener("DOMContentLoaded",E)};this.setAttributes(k),window.addEventListener("DOMContentLoaded",E)}}setAttributes(k){const E=r.getURL("../executors/twitter.js");k.setAttribute("bis_use","true"),k.type="text/javascript",k.setAttribute("charset","utf-8"),k.setAttribute("nonce",""),k.src=E}}},2880:(k,E,D)=>{const r=D(1568);class n{static QuerySelectorAll(k,E){return document.__proto__.querySelectorAll.call(k,E)}static QuerySelector(k,E){return document.__proto__.querySelector.call(k,E)}static Escape(k){return k.replace(/\"/g,"&quot;")}static ToJSON(k){return"function"==typeof k.toJSON?k.toJSON():JSON.stringify(k)}static GetBaseHref(){let k=n.QuerySelector(document,"base");return k&&k.href?k.href:""}static GetTabIdKey(k){return"tb_"+k}static GetMainPageId(k){return"mp_"+k}static IsOnChromeRuntime(){let k=!0;if(chrome){if(chrome.runtime){try{chrome.runtime.getManifest()}catch(E){k=!1}if(k)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(chrome.app)return chrome.app?void 0!==chrome.app.isInstalled:!!chrome.runtime}else if(self.navigator.userAgent.toLowerCase().includes("firefox"))return!!chrome.runtime;return!1}static GetElementSize(k){let E={x:0,y:0,w:0,h:0};if(k&&k.getBoundingClientRect){let D=k.getBoundingClientRect();E={x:~~(D.left+window.scrollX),y:~~(D.top+window.scrollY),w:~~D.width,h:~~D.height}}return E}static IsCoordinatesValid(k){return!!(k&&k.hasOwnProperty("x")&&"number"==typeof k.x&&k.hasOwnProperty("y")&&"number"==typeof k.y)}static GetFullElementSize(k,E,D){let r=n.GetElementSize(k);return n.IsCoordinatesValid(D)&&(r.x=r.x+D.x,r.y=r.y+D.y),n.IsCoordinatesValid(E)?(r.abs_x=r.x+E.x,r.abs_y=r.y+E.y):(r.abs_x=r.x,r.abs_y=r.y),r}static SetFullSizeToElement(k,E,D){let r={x:0,y:0,w:0,h:0};return n.IsCoordinatesValid(D)&&(r.x=r.x+D.x,r.y=r.y+D.y),k&&k.setAttribute&&(r=n.GetFullElementSize(k,E,D),k.setAttribute("bis_size",n.ToJSON(r))),r}static GenerateAndSetBisId(k,E){let D=E+n.GenerateQuickId();return k&&k.setAttribute&&k.setAttribute(r.ATTRIBUTE_BIS_ID,D),D}static GenerateAndSetBisIdToFrame(k){return n.GenerateAndSetBisId(k,"fr_")}static GenerateAndSetBisIdToBanner(k){return n.GenerateAndSetBisId(k,"bn_")}static GenerateAndSetBisIdToPinterestAds(k){return n.GenerateAndSetBisId(k,"pt_")}static GenerateAndSetBisIdToInstagramAds(k){return n.GenerateAndSetBisId(k,"ig_")}static GenerateAndSetBisIdToLinkedinAds(k){return n.GenerateAndSetBisId(k,"ln_")}static GenerateAndSetBisIdToFBAds(k){return n.GenerateAndSetBisId(k,"fb_")}static GenerateAndSetBisIdToTwitterAds(k){return n.GenerateAndSetBisId(k,"tw_")}static GenerateAndSetBisIdToRedditAds(k){return n.GenerateAndSetBisId(k,"rd_")}static SetBisDepth(k,E){k&&k.setAttribute&&k.setAttribute("bis_depth",E)}static SetBisChainId(k,E){k&&k.setAttribute&&k.setAttribute("bis_chainid",E)}static SetBannerId(k,E){k&&k.setAttribute&&k.setAttribute("bis_bannerid",E)}static UpdateCandidateStatusBorderColor(k,E){if(k&&k.style&&k.style.cssText&&E){let D="";E.filteredOut?D=r.STYLES_BORDER_BANNER_FILTERED:E.sentToBackend?D=r.STYLES_BORDER_BANNER_SENT:E.targetUrlExtracted?D=r.STYLES_BORDER_BANNER_URL_EXTRACTED:E.fullContentExtracted&&(D=r.STYLES_BORDER_BANNER_CONTENT_EXTRACTED);let n=k.style.cssText;n.includes(D)||(n=n.replace(/((border|outline): .{3,20} solid 6px !important;)|((border|outline): 6px solid .{3,20} !important;)/,D),k.style.cssText=n)}}static GetMainDomainFromHost(k){if(k&&k.split){let E=k.split(".");if(E.length>=2){let k=E[E.length-2],D=E[E.length-1];return E.length>=3&&2===D.length&&3===k.length?`${E[E.length-3]}.${k}.${D}`:k+"."+D}}return null}static GetMainDomainFromUrl(k){return n.GetMainDomainFromHost(n.GetHostNameFromUrl(k))}static GetHostNameFromUrl(k){let E=k.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=E&&E.length>2&&"string"==typeof E[2]&&E[2].length>0?E[2]:null}static IsUrlFromHost(k,E){return-1!==k.indexOf(n.GetMainDomainFromUrl(E))}static IsPublisherInBlacklist(k,E){let D=!1,r=n.GetHostNameFromUrl(k);return E&&E.length&&r&&E.includes(r)&&(D=!0),D}static GetUrlFromStyleStr(k){let E=k.replace(/"/g,"'"),D=E.indexOf("http");-1===D&&(D=E.indexOf("//"));let r=E.indexOf("'",D),n="";return D>0&&r>0&&D<r&&(n=E.substr(D,r-D)),n}static GetCurrentDataTimeStr(k=null){function E(k){return k<10?"0"+k:""+k}let D=k?new Date(k):new Date;return`${D.getFullYear()}-${E(D.getMonth()+1)}-${E(D.getDate())} ${E(D.getHours())}:${E(D.getMinutes())}:${E(D.getSeconds())}`}static GetCurrentDataTimeStrWithGMT(k=null){function E(k){return k<10?"0"+k:""+k}let D=k?new Date(k):new Date;return`${D.getFullYear()}-${E(D.getMonth()+1)}-${E(D.getDate())} ${E(D.getHours())}:${E(D.getMinutes())}:${E(D.getSeconds())} ${D.toTimeString().match(/GMT.\S*/)[0]}`}static GetWindowSize(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}static IsIframeHasContentScript(k){try{if(k&&!n.IsIframeSecure(k)&&"ok"!==k.contentDocument.body.getAttribute("bis_status"))return!1}catch(k){}return!0}static IsIframeSecure(k){return!k||0!==k.src.length&&"about:blank"!==k.src&&"about:srcdoc"!==k.src&&0!==k.src.indexOf("javascript:")}static isValidUrl(k){return"string"==typeof k&&k.length>0&&(-1!==k.indexOf("http")||-1!==k.indexOf("//"))}static IsValidBisId(k){return!!(k.startsWith("mp_")||k.startsWith("bg_")||k.startsWith("fr_"))}static IsYouTubeUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.indexOf("youtube.com")}static IsFacebookUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.indexOf("facebook.com")}static IsTwitterUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.search(/twitter|x\.com/)}static IsRedditUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.indexOf("reddit.com")}static IsPinterestUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.search(/pinterest\.(com|ca|at|ch|cl|co\.kr|com\.au|com\.mx|co\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/)}static IsInstagramUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.indexOf("instagram.com")}static IsLinkedinUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.indexOf("linkedin.com")}static IsTiktokUrl(k){return!!~n.GetHostNameFromUrl(k).indexOf("tiktok.com")}static IsTwitchUrl(k){let E=n.GetHostNameFromUrl(k);return!!E&&-1!==E.indexOf("twitch.tv")}static isClaudeUrl(k,E){const D=E?.bk?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isChatgptUrl(k,E){const D=E?.Kk?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isDeepseekUrl(k,E){const D=E?.Rk?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isCopilotUrl(k,E){const D=E?.ck?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isPerplexityUrl(k,E){const D=E?.ik?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isMetaUrl(k,E){const D=E?.jk?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isGeminiUrl(k,E){const D=E?.uk?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isGrokUrl(k,E){const D=E?.Nk?.URL_PATTERN,r=n.GetHostNameFromUrl(k);return!!D&&n.getRegExpFromString(D).test(r)}static isAI(k,E){return[n.isClaudeUrl,n.isChatgptUrl,n.isCopilotUrl,n.isDeepseekUrl,n.isPerplexityUrl,n.isMetaUrl,n.isGeminiUrl,n.isGrokUrl].some((D=>D(k,E)))}static GetFullIdStr(k,E,D){return`ext:${chrome.runtime.id}-chainId:${k}-frameId:${E}-bisId:${D}`}static GetRandomIntInRange(k,E){return parseInt((Math.random()*(E-k)+k).toFixed(0))}static GetCurrentTimestamp(){return Date.now()/1e3|0}static GetCurrentTimestampMs(){return Date.now()}static GenerateQuickId(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}static GenerateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(k){let E=16*Math.random()|0;return("x"==k?E:3&E|8).toString(16)}))}static IsInFilterList(k,E){let D=!1;if(k)for(let r=0;r<k.length&&!D;r++)-1!==E.indexOf(k[r])&&(D=!0);return D}static IsChrome(){return-1!==navigator.userAgent.indexOf("Chrome")}static IsFirefox(){return-1!==navigator.userAgent.indexOf("Firefox")}static IsFBVideoDataValid(k){let E=!1;if(k)try{"number"==typeof k.detectionTime&&"string"==typeof k.videoId&&"string"==typeof k.videoUrl&&k.videoId.length&&k.videoUrl.length&&(E=!0)}catch(k){}return E}static GetDefaultAdblockerStatus(){return{[r.ADBLOCKER_FOR_DISPLAY]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_FACEBOOK]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_TWITTER]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_REDDIT]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_PINTEREST]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_INSTAGRAM]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_TIKTOK]:r.ADBLOCKER_STATUS_DISABLED,[r.ADBLOCKER_FOR_LINKEDIN]:r.ADBLOCKER_STATUS_DISABLED,[r.USE_LOCAL_CONFIG]:r.ADBLOCKER_STATUS_DISABLED}}static GetImagesSpacePercentage(k,E,D){let r=[];if(!E)return r;const x=D.w*D.h;let L=[],Q=Array.from(E.querySelectorAll("*")).map((E=>E.shadowRoot?E.shadowRoot.querySelectorAll(k):"IMG"===E.nodeName||"IFRAME"===E.nodeName?E:E.querySelectorAll(k))).filter((k=>k)).reduce(((k,E)=>(E&&E.length&&E.forEach((E=>{k.includes(E)||k.push(E)})),"IMG"!==E.nodeName&&"IFRAME"!==E.nodeName||k.push(E),k)),[]);if(!Q?.length||0===x)return r;for(let E of Q){let D=E;D&&D.shadowRoot&&(D=D.shadowRoot.firstElementChild.querySelector(k));let r=n.GetElementSize(D);L.push(r.w*r.h/x*100)}return L}static CheckDocumentReadyState(k){return document.readyState===k}static getURL(k){return chrome.runtime.getURL(k)}static getDataFromStorageLocal(k){return chrome.storage.local.get([k]).then((E=>E[k]?E[k]:E))}static getDataFromStorageSync(k){return new Promise(((E,D)=>{try{chrome.storage.sync.get([k]).then((D=>{D[k]?E(D[k]):E(D)}))}catch(k){D(k)}}))}static GetCookie(k){let E=k+"=",D=decodeURIComponent(document.cookie).split(";");for(let k=0;k<D.length;k++){let r=D[k];for(;" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(E))return r.substring(E.length,r.length)}return""}static GetOriginFromHref(k){k&&k.search(/^http/)}static GetLocaleDateString(){try{return(new Date).toJSON().replace("T",", ")}catch(k){return(new Date).toTimeString()}}static GetAllCookies(){return document.cookie}static async waitForElement(k,E=1e4){return new Promise(((D,r)=>{const n=document.querySelector(k);if(n)return D(n);const x=new MutationObserver((()=>{const E=document.querySelector(k);E&&(x.disconnect(),D(E))}));x.observe(document.body,{childList:!0,subtree:!0}),E&&setTimeout((()=>{x.disconnect(),r(new Error(`Element ${k} not found within timeout`))}),E)}))}static getRegExpFromString(k){let E=k.replace(/.*\/([gimy]*)$/,"$1"),D=k.replace(new RegExp("^/(.*?)/"+E+"$"),"$1");return new RegExp(D,E)}}k.exports=n},1568:(k,E,D)=>{const r=D(9358);k.exports=class{static get DOCUMENT_READYSTATE_LOADING(){return"loading"}static get DOCUMENT_READYSTATE_INTERACTIVE(){return"interactive"}static get DOCUMENT_READYSTATE_COMPLETE(){return"complete"}static get ATTRIBUTE_BIS_ID(){return"bis_id"}static get ATTRIBUTE_BIS_SIZE(){return"bis_size"}static get ATTRIBUTE_BIS_STYLE(){return"bis_style"}static get ATTRIBUTE_BIS_STATUS(){return"bis_status"}static get ATTRIBUTE_BIS_LABEL(){return"bis_label"}static get ATTRIBUTE_BIS_ELEMENT_ID(){return"bis_element_id"}static get ATTRIBUTE_BIS_HIDE_HEIGHT(){return"bis_hide_height"}static get ATTRIBUTE_BIS_HIDE_WIDTH(){return"bis_hide_width"}static get ATTRIBUTE_BIS_HIDE_STATUS(){return"bis_hide_status"}static get ATTRIBUTE_BIS_HIDE_LEFT_OFFSET(){return"bis_hide_left_offset"}static get ATTRIBUTE_BIS_PRECISE_AD(){return"bis_precise_ad"}static get ACTIVATION_BY_ADS_MANAGER(){return"ACTIVATION_BY_ADS_MANAGER"}static get ACTIVATION_BY_ADS_SELF(){return"ACTIVATION_BY_ADS_SELF"}static get MESSAGE_ID(){return"PANELOS_MESSAGE"}static get MESSAGE_TYPE_TEST(){return"TEST"}static get MESSAGE_TYPE_IFRAME_CONTENT(){return"IFRAME_CONTENT"}static get MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME"}static get MESSAGE_TYPE_GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE(){return"GET_HEADER_INFO_FOR_BLOCKED_IFRAME_RESPONSE"}static get MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT(){return"IFRAME_INVALID_CHAIN_SEGMENT_CONTENT"}static get MESSAGE_TYPE_TAB_INITIALIZATION(){return"TAB_INITIALIZATION"}static get MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION(){return"TAB_SINGLE_PAGE_REINITIALIZATION"}static get MESSAGE_TYPE_TAB_URL_CHANGED(){return"TAB_URL_CHANGED"}static get MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED(){return"TAB_ADBLOCKER_STATUS_CHANGED"}static get MESSAGE_TYPE_IFRAME_INITIALIZATION(){return"IFRAME_INITIALIZATION"}static get MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE(){return"IFRAME_INITIALIZATION_RESPONSE"}static get MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS(){return"IFRAME_CONTENT_INFO_DETECTED_INPUTS"}static get MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS(){return"IFRAME_CONTENT_INFO_DETECTED_REDIRECTS"}static get MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT(){return"HIDDEN_AD_CANDIDATES_AMOUNT"}static get MESSAGE_TYPE_GET_WINDOW_TARGET_URL(){return"GET_WINDOW_TARGET_URL"}static get MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND(){return"GET_WINDOW_TARGET_URL_RESPOND"}static get MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL(){return"GET_WINDOW_CLICK_TARGET_URL"}static get MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND(){return"GET_WINDOW_CLICK_TARGET_URL_RESPOND"}static get MESSAGE_TYPE_GET_FRAME_CONTENT(){return"GET_FRAME_CONTENT"}static get MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK(){return"TARGET_URL_DETECTION_BY_CLICK"}static get MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET(){return"NEW_PAGE_CREATED_TICKET"}static get MESSAGE_TYPE_PANEL_REGULATOR_RESULT(){return"PANEL_REGULATOR_RESULT"}static get MESSAGE_TYPE_OUT_TICKET(){return"OUT_TICKET"}static get MESSAGE_TYPE_CHAIN_ACTIVATION(){return"CHAIN_ACTIVATION"}static get MESSAGE_TYPE_HEADER_INFO_TO_STORAGE(){return"HEADER_INFO_TO_STORAGE"}static get MESSAGE_TYPE_LINKEDIN_FRAME_CONTENT_TO_STORAGE(){return"LINKEDIN_FRAME_CONTENT_TO_STORAGE"}static get MESSAGE_TYPE_CANDIDATES_DATA_SKINADS(){return"CANDIDATES_DATA_SKINADS"}static get MESSAGE_TYPE_CANDIDATES_DATA_BANNERS(){return"CANDIDATES_DATA_BANNERS"}static get MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK(){return"CANDIDATES_DATA_FACEBOOK"}static get MESSAGE_TYPE_CANDIDATES_VIDEO_DATA_TWITCH(){return"CANDIDATES_VIDEO_DATA_TWITCH"}static get MESSAGE_TYPE_CANDIDATES_DATA_TWITTER(){return"CANDIDATES_DATA_TWITTER"}static get MESSAGE_TYPE_CANDIDATES_DATA_REDDIT(){return"CANDIDATES_DATA_REDDIT"}static get MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST(){return"CANDIDATES_DATA_PINTEREST"}static get MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM(){return"CANDIDATES_DATA_INSTAGRAM"}static get MESSAGE_TYPE_CANDIDATES_DATA_LINKEDIN(){return"CANDIDATES_DATA_LINKEDIN"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK(){return"CANDIDATE_PLACEMENTS_FACEBOOK"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER(){return"CANDIDATE_PLACEMENTS_TWITTER"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT(){return"CANDIDATE_PLACEMENTS_REDDIT"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST(){return"CANDIDATE_PLACEMENTS_PINTEREST"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5(){return"CANDIDATE_PLACEMENTS_HTML5"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM(){return"CANDIDATE_PLACEMENTS_INSTAGRAM"}static get MESSAGE_TYPE_CANDIDATE_PLACEMENTS_LINKEDIN(){return"CANDIDATE_PLACEMENTS_LINKEDIN"}static get MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES(){return"HTML5_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES(){return"BANNER_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES(){return"SKIN_AD_CANDIDATES_EXTRACTION_STATUSES"}static get MESSAGE_TYPE_VIDEO_XHR_CANDIDATE(){return"VIDEO_XHR_CANDIDATE"}static get MESSAGE_TYPE_VIDEO_HAR(){return"VIDEO_HAR"}static get MESSAGE_TYPE_FACEBOOK_VIDEO_DATA(){return"FACEBOOK_VIDEO_DATA"}static get MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA(){return"FACEBOOK_INSTREAM_DATA"}static get MESSAGE_TYPE_FACEBOOK_MARKETPLACE_VIDEO_DATA(){return"FACEBOOK_MARKETPLACE_VIDEO_DATA"}static get MESSAGE_TYPE_FACEBOOK_CANVAS_TEXT(){return"FACEBOOK_CANVAS_TEXT"}static get MESSAGE_TYPE_PINTEREST_VIDEO_DATA(){return"PINTEREST_VIDEO_DATA"}static get MESSAGE_TYPE_TWITTER_VIDEO_DATA(){return"TWITTER_VIDEO_DATA"}static get MESSAGE_TYPE_TWITTER_CAROUSEL_DATA(){return"TWITTER_CAROUSEL_DATA"}static get MESSAGE_TYPE_REDDIT_VIDEO_DATA(){return"REDDIT_VIDEO_DATA"}static get MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA(){return"REDDIT_RIGHT_COLUMN_DATA"}static get MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA(){return"INSTAGRAM_VIDEO_DATA"}static get MESSAGE_TYPE_INSTAGRAM_STORY_DATA(){return"INSTAGRAM_STORY_DATA"}static get MESSAGE_TYPE_INSTAGRAM_FULL_TEXT_DATA(){return"INSTAGRAM_FULL_TEXT_DATA"}static get MESSAGE_TYPE_INSTAGRAM_CAROUSEL_SLIDES_SOURCES(){return"INSTAGRAM_CAROUSEL_SLIDES_SOURCES"}static get MESSAGE_TYPE_LINKEDIN_VIDEO_DATA(){return"LINKEDIN_VIDEO_DATA"}static get MESSAGE_TYPE_LINKEDIN_SLIDES_DATA(){return"LINKEDIN_SLIDES_DATA"}static get MESSAGE_TYPE_VIDEO_TWITCH_INSTREAM_DATA(){return"VIDEO_TWITCH_INSTREAM_DATA"}static get MESSAGE_TYPE_VIDEO_TWITCH_ACCESS_TOKEN_DATA(){return"VIDEO_XHR_ACCESS_TOKEN_DATA"}static get MESSAGE_TYPE_TIKTOK_FEED_DATA(){return"TIKTOK_FEED_DATA"}static get MESSAGE_TYPE_TIKTOK_VIDEO_CANDIDATES(){return"TIKTOK_VIDEO_CANDIDATES"}static get MESSAGE_TYPE_CLAUDE_DATA(){return"CLAUDE_DATA"}static get MESSAGE_TYPE_CHATGPT_DATA(){return"CHATGPT_DATA"}static get MESSAGE_TYPE_CHATGPT_PROTECTION_STATUS(){return"CHATGPT_PROTECTION_STATUS"}static get MESSAGE_TYPE_CHATGPT_PROTECTION_STATUS_RESPONSE(){return"CHATGPT_PROTECTION_STATUS_RESPONSE"}static get MESSAGE_TYPE_GEMINI_DATA(){return"GEMINI_DATA"}static get MESSAGE_TYPE_GEMINI_PROTECTION_STATUS(){return"GEMINI_PROTECTION_STATUS"}static get MESSAGE_TYPE_GEMINI_PROTECTION_STATUS_RESPONSE(){return"GEMINI_PROTECTION_STATUS_RESPONSE"}static get MESSAGE_TYPE_COPILOT_DATA(){return"COPILOT_DATA"}static get MESSAGE_TYPE_PERPLEXITY_DATA(){return"PERPLEXITY_DATA"}static get MESSAGE_TYPE_META_AI_DATA(){return"META_AI_DATA"}static get MESSAGE_TYPE_DEEPSEEK_DATA(){return"DEEPSEEK_DATA"}static get MESSAGE_TYPE_GROK_DATA(){return"GROK_DATA"}static get MESSAGE_TYPE_GROK_PROTECTION_STATUS(){return"GROK_PROTECTION_STATUS"}static get MESSAGE_TYPE_GROK_PROTECTION_STATUS_RESPONSE(){return"GROK_PROTECTION_STATUS_RESPONSE"}static get MESSAGE_TYPE_AI_FEATURES_PROTECTION_CLEAR_TIMEOUT(){return"AI_FEATURES_PROTECTION_CLEAR_TIMEOUT"}static get MESSAGE_TYPE_AI_FEATURES_PROTECTION_NO_WARNINGS(){return"AI_FEATURES_PROTECTION_NO_WARNINGS"}static get MESSAGE_TYPE_AI_FEATURES_PROTECTION_STATUS_RESPONSE(){return"AI_FEATURES_PROTECTION_STATUS_RESPONSE"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID(){return"GET_PANALYTICS_ID"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION(){return"GET_PANELOS_VERSION"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS(){return"GET_ADBLOCKER_STATUS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS(){return"GET_ADBLOCKER_COUNTERS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER(){return"ENABLE_ADBLOCKER"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER(){return"DISABLE_ADBLOCKER"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS(){return"GET_DATA_COLLECTION_STATUS"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION(){return"ENABLE_DATA_COLLECTION"}static get MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION(){return"DISABLE_DATA_COLLECTION"}static get MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT(){return"ADBLOCK_INSPECTOR_AGENT_REPORT"}static get MESSAGE_TYPE_GET_EXCLUDE_LIST(){return"GET_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST(){return"ADD_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST(){return"REMOVE_FROM_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST(){return"ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST(){return"ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST"}static get MESSAGE_TYPE_GET_CURRENT_DOMAIN(){return"GET_CURRENT_DOMAIN"}static get MESSAGE_TYPE_GET_CURRENT_PAGE_URL(){return"GET_CURRENT_PAGE_URL"}static get MESSAGE_TYPE_USE_LOCAL_CONFIG(){return"USE_LOCAL_CONFIG"}static get MESSAGE_TYPE_GET_LOCAL_CONFIG_STATUS(){return"GET_LOCAL_CONFIG_STATUS"}static get ADBLOCKER_STATUS_ENABLED(){return"enabled"}static get ADBLOCKER_STATUS_DISABLED(){return"disabled"}static get VIDEO_TRAFFIC_SOURCE_HTML(){return"HTML"}static get VIDEO_TRAFFIC_SOURCE_JS(){return"JS"}static get VIDEO_TRAFFIC_SOURCE_XHR(){return"XHR"}static get VIDEO_TRAFFIC_MEDIA_TYPE_HTML(){return"HTML"}static get VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON(){return"JSON"}static get VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON(){return"JSON_FB"}static get VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE(){return"YT_JSON_NEXTPAGE"}static get VIDEO_TRAFFIC_ALIAS_YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE(){return"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE"}static get FACEBOOK_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH(){return"feedWatch"}static get FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE(){return"marketplace"}static get FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN(){return"rightColumn"}static get FACEBOOK_AD_PLACEMENT_TYPE_STORIES(){return"stories"}static get FACEBOOK_AD_PLACEMENT_TYPE_VIDEO_PAGE(){return"videoPage"}static get FACEBOOK_AD_VIDEO_URL_REPLACE_NAME(){return"[ADVERTISER_NAME]"}static get FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID(){return"[VIDEO_ID]"}static get TWITTER_AD_PLACEMENT_TYPE_FEED(){return"feedPost"}static get TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW(){return"feedWhoToFollow"}static get TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW(){return"rightColumnWhoToFollow"}static get REDDIT_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE(){return"commentPage"}static get REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN(){return"rightColumn"}static get LINKEDIN_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get LINKEDIN_AD_PLACEMENT_TYPE_RIGHT_COLUMN(){return"rightColumn"}static get PINTEREST_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get PINTEREST_AD_PLACEMENT_TYPE_SEARCH(){return"searchPage"}static get PINTEREST_AD_PLACEMENT_TYPE_PIN(){return"pinPage"}static get PINTEREST_LOADER_TYPE_PIN_PAGE(){return"pinPage"}static get PINTEREST_LOADER_TYPE_USER_INFO(){return"userInfo"}static get INSTAGRAM_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get INSTAGRAM_AD_PLACEMENT_TYPE_STORY(){return"story"}static get TIKTOK_AD_PLACEMENT_TYPE_FEED(){return"feed"}static get KNOWN_CSS_NAMES(){return["align-content","align-items","align-self","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-adjust","color-interpolation","color-interpolation-filters","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-width","contain","content","counter-increment","counter-reset","counter-set","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphens","image-orientation","image-rendering","ime-mode","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","opacity","order","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-inline","overflow-wrap","overflow-x","overflow-y","overscroll-behavior-x","overscroll-behavior-y","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","paint-order","perspective","perspective-origin","pointer-events","position","quotes","r","resize","right","row-gap","ruby-align","ruby-position","rx","ry","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","scrollbar-color","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vector-effect","vertical-align","visibility","white-space","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","-moz-appearance","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-float-edge","-moz-force-broken-image-icon","-moz-image-region","-moz-orient","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-stack-sizing","-moz-tab-size","-moz-text-size-adjust","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-window-dragging","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke-color","-webkit-text-stroke-width","offset-distance","offset-path","offset-rotate","orphans","speak","tab-size","text-underline-position","text-size-adjust","widows","zoom","-webkit-appearance","-webkit-border-horizontal-spacing","-webkit-border-image","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","column-span","backdrop-filter","-webkit-font-smoothing","-webkit-highlight","-webkit-hyphenate-character","-webkit-line-break","-webkit-locale","-webkit-margin-before-collapse","-webkit-margin-after-collapse","-webkit-mask-box-image","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-repeat","-webkit-mask-size","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-emphasis-color","-webkit-text-emphasis-position","-webkit-text-emphasis-style","-webkit-text-orientation","-webkit-text-security","-webkit-user-drag","-webkit-user-modify","-webkit-writing-mode","-webkit-app-region","buffered-rendering","color-rendering","alignment-baseline","baseline-shift","d"]}static get FACEBOOK_DESIGN_VERSION_OLD(){return 1}static get FACEBOOK_DESIGN_VERSION_NEW(){return 2}static get OUT_TICKET_TYPE_SINGLE(){return"SINGLE"}static get OUT_TICKET_TYPE_MULTI(){return"MULTI"}static get ADBLOCKER_FOR_DISPLAY(){return"DISPLAY"}static get ADBLOCKER_FOR_FACEBOOK(){return"FACEBOOK"}static get ADBLOCKER_FOR_TWITTER(){return"TWITTER"}static get ADBLOCKER_FOR_REDDIT(){return"REDDIT"}static get ADBLOCKER_FOR_PINTEREST(){return"PINTEREST"}static get ADBLOCKER_FOR_INSTAGRAM(){return"INSTAGRAM"}static get ADBLOCKER_FOR_TIKTOK(){return"TIKTOK"}static get ADBLOCKER_FOR_LINKEDIN(){return"LINKEDIN"}static get USE_LOCAL_CONFIG(){return"CONFIG"}static get AD_DETECTOR_INITIATOR_TIMER(){return"timer"}static get AD_DETECTOR_INITIATOR_MUTATION(){return"mutation"}static get AD_DETECTOR_INITIATOR_PAGECHANGE(){return"pagechange"}static get AD_DETECTOR_INITIATOR_ACTIVATION(){return"activation"}static get AD_DETECTOR_INITIATOR_URL(){return"url"}static get AD_DETECTOR_INITIATOR_SCROLL_EVENT(){return"scroll"}static get IFRAMES_CHAIN_BUILDING_STATUS_NONE(){return 0}static get IFRAMES_CHAIN_BUILDING_STATUS_INITED(){return 1}static get IFRAMES_CHAIN_BUILDING_STATUS_STARTED(){return 2}static get IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED(){return 3}static get IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED(){return 4}static get IFRAMES_CHAIN_BUILDING_STATUS_FINISHED(){return 5}static get IFRAMES_TRAFFIC_FILENAME_TO_INJECT(){return"fr-co.js"}static get CANDIDATE_PROCESS_STATUS_DETECTED(){return 1}static get CANDIDATE_PROCESS_STATUS_START_PROCESSING(){return 2}static get CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED(){return 3}static get CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT(){return 4}static get TICKET_BUILDING_STATUS_INIT(){return 0}static get TICKET_BUILDING_STATUS_STARTED(){return 1}static get TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES(){return 2}static get TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES(){return 3}static get TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE(){return 4}static get TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE(){return 5}static get TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE(){return 6}static get TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE(){return 7}static get TICKET_BUILDING_STATUS_DONE(){return 8}static get MESSAGE_TYPE_CONFIG_NOT_FOUND(){return"CONFIG_NOT_FOUND"}static get MESSAGE_TYPE_CONFIG_UPDATED_IN_STORAGE(){return"CONFIG_UPDATED_IN_STORAGE"}static get TICKET_ALIAS_PANALYTICSID(){return r.decode("cGFuZWxpc3RJZA==")}static get TICKET_ALIAS_PINSTANCEID(){return r.decode("cGFuZWxJZA==")}static get MAX_OUT_TICKETS_QUEUE_LENGTH(){return 20}static EXCLUDE_DOMAINS_LIST(){return"EXCLUDE_DOMAINS_LIST"}static EXCLUDE_PAGES_LIST(){return"EXCLUDE_PAGES_LIST"}static get STYLES_BORDER_BANNER_CONTENT_EXTRACTED(){return"border: 6px solid blue !important;"}static get STYLES_BORDER_BANNER_URL_EXTRACTED(){return"border: 6px solid blueviolet !important;"}static get STYLES_BORDER_BANNER_FILTERED(){return"border: 6px solid orange !important;"}static get STYLES_BORDER_BANNER_SENT(){return"border: 6px solid green !important;"}static get STYLES_OUTLINE_SUCCESS_DETECT(){return"outline: green solid 6px !important;"}static get STYLES_OUTLINE_VIDEO_AD(){return"outline: rgba(42, 213, 255, 1) solid 6px !important;"}static get STYLES_OUTLINE_TEXT_AD(){return"outline: rgba(243, 143, 20, 1) solid 6px !important;"}static get STYLES_CONSOLE_LOGS_INFO(){return"background-color: rgba(108, 101, 224, 0.2); color: rgba(58, 191, 224, 1)"}static get STYLES_CONSOLE_LOGS_ERROR(){return"background-color: rgba(241, 0, 43, 0.4); color: rgba(58, 191, 224, 1)"}static get STYLES_HIDE_INSTAGRAM_FEED_AD(){return["position: absolute !important; height: 0px !important; margin: 0px !important; padding: 0px !important; overflow: hidden !important;","height: 0px !important; visibility: hidden !important;"]}static get STYLES_HIDE_ELEMENT(){return"left: -10000px !important; position: absolute !important; height: 0;"}}},6882:(k,E,D)=>{const r=D(1568),n=D(2880);k.exports=class{static get EmptyMessage(){return{posdMessageId:r.MESSAGE_ID,posdHash:n.GenerateQuickId(),from:"",to:"",multiTo:[],type:"",content:""}}static IsValid(k){try{if(void 0!==k&&void 0!==k.posdMessageId&&void 0!==k.type&&void 0!==k.content)return k.posdMessageId===r.MESSAGE_ID}catch(k){throw k}return!1}static IsStrictValid(k){try{if(void 0!==k&&void 0!==k.posdMessageId&&void 0!==k.from&&void 0!==k.to&&void 0!==k.type&&void 0!==k.content)return k.posdMessageId===r.MESSAGE_ID}catch(k){throw k}return!1}}},533:(k,E,D)=>{const r=D(1568);k.exports=class{constructor(){}getStylesByElementsBisId(k){let E={};return this.addStylesForNode(k,E),k.querySelectorAll("*").forEach((k=>{this.addStylesForNode(k,E)})),E}addStylesForNode(k,E){let D=this.getStyles(k);E[k.getAttribute(r.ATTRIBUTE_BIS_ELEMENT_ID)]=D}getStyles(k){let E=window.getComputedStyle(k,null);return this.minimiseComputedStyles(E)}minimiseComputedStyles(k){let E={};for(let D=0;D<k.length;D++){let n=k.item(D),x=k.getPropertyValue(n);E[x]||(E[x]=[]);let L=r.KNOWN_CSS_NAMES.indexOf(n);L>=0?E[x].push(L):E[x].push(n)}return E}}},9358:k=>{var E={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(k,D=!0){if(TextEncoder&&atob&&btoa&&D)return E.bytesToBase64((new TextEncoder).encode(k));let r,n,x,L,Q,M,A,T="",s=0;for(k=E._utf8_encode(k);s<k.length;)r=k.charCodeAt(s++),n=k.charCodeAt(s++),x=k.charCodeAt(s++),L=r>>2,Q=(3&r)<<4|n>>4,M=(15&n)<<2|x>>6,A=63&x,isNaN(n)?M=A=64:isNaN(x)&&(A=64),T=T+this._keyStr.charAt(L)+this._keyStr.charAt(Q)+this._keyStr.charAt(M)+this._keyStr.charAt(A);return T},decode:function(k,D=!0){if("{"===k[0])return k;if(TextDecoder&&atob&&btoa&&D)return(new TextDecoder).decode(E.base64ToBytes(k));let r,n,x,L,Q,M,A,T="",s=0;for(k=k.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<k.length;)L=this._keyStr.indexOf(k.charAt(s++)),Q=this._keyStr.indexOf(k.charAt(s++)),M=this._keyStr.indexOf(k.charAt(s++)),A=this._keyStr.indexOf(k.charAt(s++)),r=L<<2|Q>>4,n=(15&Q)<<4|M>>2,x=(3&M)<<6|A,T+=String.fromCharCode(r),64!=M&&(T+=String.fromCharCode(n)),64!=A&&(T+=String.fromCharCode(x));return T=E._utf8_decode(T),T},_utf8_encode:function(k){k=k.replace(/\r\n/g,"\n");let E="";for(let D=0;D<k.length;D++){let r=k.charCodeAt(D);r<128?E+=String.fromCharCode(r):r>127&&r<2048?(E+=String.fromCharCode(r>>6|192),E+=String.fromCharCode(63&r|128)):(E+=String.fromCharCode(r>>12|224),E+=String.fromCharCode(r>>6&63|128),E+=String.fromCharCode(63&r|128))}return E},_utf8_decode:function(k){let E="",D=0,r=0,n=0,x=0;for(;D<k.length;)r=k.charCodeAt(D),r<128?(E+=String.fromCharCode(r),D++):r>191&&r<224?(n=k.charCodeAt(D+1),E+=String.fromCharCode((31&r)<<6|63&n),D+=2):(n=k.charCodeAt(D+1),x=k.charCodeAt(D+2),E+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&x),D+=3);return E},base64ToBytes:function(k){const E=atob(k);return Uint8Array.from(E,(k=>k.codePointAt(0)))},bytesToBase64:function(k){const E=Array.from(k,(k=>String.fromCodePoint(k))).join("");return btoa(E)}};k.exports=E}},E={};function D(r){var n=E[r];if(void 0!==n)return n.exports;var x=E[r]={exports:{}};return k[r](x,x.exports,D),x.exports}D.n=k=>{var E=k&&k.__esModule?()=>k.default:()=>k;return D.d(E,{a:E}),E},D.d=(k,E)=>{for(var r in E)D.o(E,r)&&!D.o(k,r)&&Object.defineProperty(k,r,{enumerable:!0,get:E[r]})},D.o=(k,E)=>Object.prototype.hasOwnProperty.call(k,E),(()=>{"use strict";D(7452);const k=D(1568),E=D(3129),r=D(3870),n=D(2880);if(self===top){(new E).Init()}else if(n.CheckDocumentReadyState(k.DOCUMENT_READYSTATE_LOADING))document.addEventListener("DOMContentLoaded",(()=>{(new r).Init()}));else if(n.CheckDocumentReadyState(k.DOCUMENT_READYSTATE_INTERACTIVE)||n.CheckDocumentReadyState(k.DOCUMENT_READYSTATE_COMPLETE)){(new r).Init()}})()})();