(()=>{const k=null!==(E=sessionStorage.getItem("bis_data"))?JSON.parse(E):null;var E;const D=k?k.config.redditConfig:null,r=k?k.id+"_w":null;if(null!==D){function n(k){const E=function(k){const E=function(k){const E=new RegExp(D.VIDEO_TRAFFIC_DETECTOR.VIDEO_ID_REGEX);let r=k.match(E),n=null;r&&r.length&&(n=r[1]);return n}(k);return{videoId:E,url:k}}(k);!function(k){try{k.detectionTime=Date.now()/1e3|0;let E={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_VIDEO_DATA",from:r,to:r.substring(0,r.length-2),content:k};window.postMessage(E)}catch(k){}}(E)}function x(k){try{const E=JSON.parse(k.content);let D=[];for(let k of E){const E={};k.source&&k.source.hasOwnProperty("outboundUrl")&&(E.elementId=k.id,E.targetUrl=k.source.outboundUrl,D.push(E))}!function(k){try{let E={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"REDDIT_RIGHT_COLUMN_DATA",from:r,to:r.substring(0,r.length-2),content:k};window.postMessage(E)}catch(k){}}(D)}catch(k){}}let L=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],this.url=arguments[1],L.apply(this,arguments)};let Q=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){var k=this;let E=(r=k.url,new RegExp(D.VIDEO_TRAFFIC_DETECTOR.VIDEO_MPD_URL_CHECK).test(r));var r;let L,M=function(k){return new RegExp(D.RIGHT_COLUMN.PATH_WITH_AD_URL).test(k)}(k.url);if(!E&&!M)return Q.apply(this,arguments);const A=function(){if(M&&4===k.readyState){x({url:k.url,content:""===k.responseType||"text"===k.responseType?k.responseText:""})}else M&&4!==k.readyState?L=setTimeout((()=>A.apply(this,arguments)),0):L&&clearTimeout(L)};return A(),n(k.url),Q.apply(this,arguments)}}})();