(()=>{function k(k,E,D,r,n=null){try{let x=document.location.host,L="detector",Q={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"VIDEO_XHR_CANDIDATE",from:L,to:L.substring(0,L.length-2),content:{requestMethod:k,url:E,type:D,content:r}};x.includes("youtube.com")&&n&&n[0]&&n[0].length&&(Q.content.encodedPostBody=n[0]),window.postMessage(Q,"*")}catch(k){}}let E=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],E.apply(this,arguments)};let D=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){const E=Object.assign(arguments,{});let r=this.onreadystatechange;return this.onreadystatechange=function(){if(4!==this.readyState||function(k){const E=document.querySelector("script[data-bis-config]")?JSON.parse(document.querySelector("script[data-bis-config]").getAttribute("data-bis-config")):null;return!!E&&E.some((E=>k.includes(E)))}(this.responseURL)||k(this.requestMethod,this.responseURL,this.getResponseHeader("content-type"),this.response,E),r)return r.apply(this,arguments)},D.apply(this,arguments)};let r=fetch;fetch=function(){const E=arguments;let D=arguments[0]instanceof Request?arguments[0].url:arguments[0];const n=arguments[0]instanceof Request?arguments[0].method:"GET";return"object"==typeof D&&D.href&&(D=D.href),new Promise(((x,L)=>{r.apply(this,E).then((function(E){if(E.body instanceof ReadableStream){const r=E.json;E.json=function(){return new Promise(((x,L)=>{r.apply(this,arguments).then((function(r){0!==E.url.search(/data:application\/json;base64/)&&k(n,D,E.headers.get("content-type"),JSON.stringify(r)),x(r)})).catch((function(k){L(k)}))}))};const x=E.text;E.text=function(){return new Promise(((r,L)=>{x.apply(this,arguments).then((function(x){0!==E.url.search(/data:application\/json;base64/)&&k(n,D,E.headers.get("content-type"),x),r(x)})).catch((function(k){L(k)}))}))}}x.apply(this,arguments)})).catch((function(k){L.apply(this,arguments)}))}))}})();