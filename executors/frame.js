(()=>{const k=null!==(E=sessionStorage.getItem("bis_data"))?JSON.parse(E):null;var E;const D=document.querySelector("script[bis_id]");window.bisData={id:D?D.getAttribute("bis_id")+"_w":null,html5TargetUrlDetectionConfig:k?k.config.html5TargetUrlDetectionConfig:null};const r=window.bisData.html5TargetUrlDetectionConfig,n=window.bisData.id;function x(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}function L(k,E,D,r){if(!window.bisData)return;let n=window.bisData.html5TargetUrlDetectionConfig.TARGET_URL_CLICK_ELEMENTS_SELECTOR;var L=document.querySelectorAll(n);if(L.length){window.bisData.origWindowOpen=window.open,window.bisData.elementSquare=0,window.bisData.clickTargetUrl=[],window.bisData.clickTargetUrlProcessed=!1;var Q=function(n){if(window.bisData.clickTargetUrl.some((k=>k.href===n)))return null;if(window.bisData.clickTargetUrl.push({href:n,square:window.bisData.elementSquare}),window.bisData&&window.bisData.clickTargetUrl&&window.bisData.clickTargetUrl.length){let n="GET_WINDOW_TARGET_URL"===r.type?{targetUrlList:window.bisData.clickTargetUrl}:{chainId:r.content.chainId,clickTargetUrl:window.bisData.clickTargetUrl},L={posdMessageId:"PANELOS_MESSAGE",posdHash:x(),type:`${r.type}_RESPOND`,from:k,to:k.substring(0,k.length-2),content:n};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(L)),E.postMessage&&E.postMessage(L,D)}return null};window.open=Q;for(var M=0;M<L.length&&0===window.bisData.clickTargetUrl.length;M++)try{if(L[M]&&L[M].click&&L[M].getBoundingClientRect){let k=L[M].getBoundingClientRect();k.width>40&&k.height>40&&(window.bisData.elementSquare=k.width*k.height,window.open==Q&&L[M].click())}}catch(k){}setTimeout((()=>{window.open=window.bisData.origWindowOpen}),1e3),window.bisData.clickTargetUrlProcessed=!0}}window.addEventListener("message",(function(k){try{var E=n,D=k.data;let M=k.source,A=k.origin;if(void 0!==(Q=D)&&void 0!==Q.posdMessageId&&void 0!==Q.from&&void 0!==Q.to&&void 0!==Q.type&&void 0!==Q.content&&"PANELOS_MESSAGE"===Q.posdMessageId&&D.to===E)if("GET_WINDOW_TARGET_URL"===D.type){let n=function(k,E,D){let r=s(E,[n,x,L,Q,M,A],D);r&&r.length;return r;function n(k){if(void 0!==k.clickTag&&T(k.clickTag))return{href:k.clickTag,square:1000001}}function x(k){if(void 0!==k.adData){if(void 0!==k.adData.destination_url&&T(k.adData.destination_url))return{href:k.adData.destination_url,square:1000001};if(void 0!==k.adData.redirect_url&&T(k.adData.redirect_url))return{href:k.adData.redirect_url,square:1000001}}}function L(k){if(void 0!==k.BF&&void 0!==k.BF.Parameters&&void 0!==k.BF.Parameters.targeturl&&T(k.BF.Parameters.targeturl))return{href:k.BF.Parameters.targeturl,square:1000001}}function Q(k){if(void 0!==k.ADAPT&&void 0!==k.ADAPT.symbols&&void 0!==k.ADAPT.symbols.stage&&void 0!==k.ADAPT.symbols.stage.clickUrl&&T(k.ADAPT.symbols.stage.clickUrl))return{href:k.ADAPT.symbols.stage.clickUrl,square:1000001}}function M(k){if(void 0!==k.admixAPI&&void 0!==k.admixAPI.ownerBanner&&void 0!==k.admixAPI.ownerBanner.clickUrl&&T(k.admixAPI.ownerBanner.clickUrl))return{href:k.admixAPI.ownerBanner.clickUrl,square:1000001}}function A(E,D){let r=O(k,E,D);if(T(r))return{href:r,square:999999}}function T(k){return"string"==typeof k&&k.length>0&&(-1!==k.indexOf("http")||-1!==k.indexOf("//"))}function s(k,E,D){let r=[];for(let n of E)try{let E=n(k,D);E&&E.href&&r.push(E)}catch(k){}return r}function O(k,E,D){let r=h(E,D);return r&&0!==r.length?m(E,r,D):null}function m(k,E,D,r=[]){let n=D.WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL;if(r.length>n)return null;for(let n of E)try{let E=k[n];if(!E)return null;let x=r.concat(n);if("object"==typeof E){let k=m(E,Object.getOwnPropertyNames(E),D,x);if(k)return k}else if("string"==typeof E&&B(n,D)&&T(E))return E}catch(k){}return null}function B(k,E){let D=X(k),r=E.WINDOW_TARGET_URL_PROPERTY_KEY_WORDS;for(let k of r){if(D===k)return!0}return!1}function X(k){return k.toLowerCase().replace(/[^a-zA-Z]+/g,"")}function h(k,E){let D=Object.getOwnPropertyNames(k);const r=E.WINDOW_PROPERTY_NAMES;return D.filter((k=>r.indexOf(k)<0))}}(E,window,r);if(n.length){let D={posdMessageId:"PANELOS_MESSAGE",posdHash:x(),type:"GET_WINDOW_TARGET_URL_RESPOND",from:E,to:E.substring(0,E.length-2),content:{targetUrlList:n}};document.body&&document.body.setAttribute&&document.body.setAttribute("bis_mes_to_fr",JSON.stringify(D)),k.source.postMessage&&k.source.postMessage(D,k.origin)}else{if(window.bisData.clickTargetUrlProcessed)return;L(E,M,A,D)}}else if("GET_WINDOW_CLICK_TARGET_URL"===D.type){if(window.bisData.clickTargetUrlProcessed)return;L(E,M,A,D)}}catch(k){}var Q}),!1)})();