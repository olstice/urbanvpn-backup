(()=>{const k=(E=sessionStorage.getItem("bis_data"),D={adOpt:!!document.querySelector("script[ad-opt-on]"),config:null},null!==E&&(D.config=JSON.parse(E)),D);var E,D;const r=k&&k.config?k.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PARSERS:[],n=k&&k.config?k.config.config.instagramConfig.TRAFFIC_LISTENER_CONFIG.PROPERTIES_FOR_VIDEO_DATA:[],x=k&&k.config?`${k.config.id}_i`:null;!(!k||!k.adOpt)&&k.adOpt;let L=0;const Q=function(k,E){return function(){!function(k,E,D){try{let r={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:D,from:k,to:k.substring(0,k.length-2),content:E};window.postMessage(r)}catch(k){}}(x,k,E)}},M=function(k,E){let D=null,r=null;for(let x of n){const n=x.NAME,L=x.PATH_NAME,Q=x.IS_NECESSARY,M=x.DEFAULT_VALUE;if(D||(D={}),"detectionTime"!==n){if(E[L])if("showFullText"!==n){if(D[n]=A(k,E[L],M),Q&&!D[n])return null}else r=E[L].some((E=>!!A(k,E,M)))}else D[n]=Date.now()/1e3|0}return D.headlineText?.length&&(D.fullText=D.headlineText+"\n"+D.fullText),delete D.headlineText,!1===r&&(D.fullText=""),D},A=function(k,E,D){let r=k;for(let[k,n]of Object.entries(E)){if("*"===n&&r.length){const D=E.slice(+k+1),n=D.length-1;return r.map((k=>{let E=k;for(let[k,r]of Object.entries(D))if(E[r]&&(E=E[r]),n===+k&&"string"==typeof E)return E}))}if(r[n])r=r[n];else if(!r[n]){r=D;break}}return r},T=function(k,E){if(!k||!k.length)return;let D=null;for(let r of k){let k="";try{if(O(r,E.PATH_CHECK_PROPERTIES))D=M(r,E.PATHS_GET_PROPERTIES),k=D.videoSrc?"INSTAGRAM_VIDEO_DATA":"INSTAGRAM_CAROUSEL_SLIDES_SOURCES";else{if(!E.RULES_TO_GET_FULL_TEXT||!O(r,E.RULES_TO_GET_FULL_TEXT.PATH_CHECK_PROPERTIES))continue;D=M(r,E.RULES_TO_GET_FULL_TEXT.PATHS_GET_PROPERTIES),k="INSTAGRAM_FULL_TEXT_DATA"}D&&setTimeout(Q(D,k),0)}catch(k){}}},s=function(k,E){if(!k||!k.length)return;let D=[];for(let r of k){if(!O(r,E.PATH_CHECK_PROPERTIES))continue;let k=M(r,E.PATHS_GET_PROPERTIES);k&&(null===k.videoVersions&&delete k.videoVersions,D.push(k))}D.length&&setTimeout(Q(D,"INSTAGRAM_STORY_DATA"),0)},O=function(k,E){let D=!1;for(let r of E){let E=k,n=r.length-1;for(let[k,x]of Object.entries(r))if(x in E&&E[x]){if(E=E[x],n===+k){D=!0;break}}else{if("*"===x&&E.length&&E.length>1&&!D&&n===+k){D=!0;break}D=!1}if(D)break}return D},m={XMLHttpRequest:function(k){let E=XMLHttpRequest.prototype.open,D=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=function(){const k=arguments[0].toLowerCase(),E=arguments[1];this.requestHeaders||(this.requestHeaders={}),this.requestHeaders[k]=E,D.apply(this,arguments)},XMLHttpRequest.prototype.open=function(){this.requestMethod=arguments[0],E.apply(this,arguments)};let r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){let E=this.onreadystatechange;return this.onreadystatechange=function(){const D=function(){const E=k.AD_TYPES_WAYS_TO_PROPERTIES;let D=k.QUERY;for(let k=0;k<E.length;k++){const r="QUERY_AD_TYPE_"+k,n=E[k];D=D.replace(r,n.QUERY_URL_PATH)}return new RegExp(D)}(),r=k.MATCH_HEADERS,n=this.requestHeaders?Object.keys(this.requestHeaders):null;let x=!1;if(n&&(x=n.some((k=>{if(r[k]&&r[k].includes(this.requestHeaders[k]))return!0}))),4===this.readyState&&D.test(this.responseURL))for(let Q of k.AD_TYPES_WAYS_TO_PROPERTIES){const M=this.responseURL.includes(Q.QUERY_URL_PATH);if(x||M){let A=this.response.length?JSON.parse(this.response):this.response;function L(k,E){let D=E;for(let[E,r]of Object.entries(k))D&&D[r]&&(D=D[r]),"*"===r&&D.length&&(D=D.map((D=>L(k.slice(+E+1),D))));return D}let O=L(Q.PATH_TO_POSTS,A);"story"===Q.AD_TYPE&&this.responseURL.includes(Q.QUERY_URL_PATH)&&O.length?O.forEach((k=>{k&&s(k,Q)})):"feed"===Q.AD_TYPE&&T(O,Q)}}if(E)return E.apply(this,arguments)},r.apply(this,arguments)}},script:function(k){function E(){let E=Array.from(document.querySelectorAll("script"));const D=new RegExp(k.REGEXP_FILTER);let r=E.filter((k=>k.innerHTML.search(D)>-1));return r.length?r[0]:null}if(L++,"complete"!==document.readyState&&L<15){let E=null;return void(E=setTimeout((()=>{E&&clearTimeout(E),m.script(k)}),200))}let D=function(){let k=E();return k?JSON.parse(k.innerHTML):null}();let r=function k(E,D){let r=D;for(let[D,n]of Object.entries(E))r&&r[n]&&(r=r[n]),"*"===n&&r.length&&(r=r.map((r=>k(E.slice(+D+1),r))));return r}(k.PATH_TO_POSTS,D);T(r,k)}};for(let k of r)k.USE&&m[k.TYPE](k)})();