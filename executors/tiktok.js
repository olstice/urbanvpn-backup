(()=>{const k=!!document?.querySelector("script[adblock_use][bis_use]"),E=(()=>{const k=sessionStorage.getItem("bis_data");if(null!==k){return JSON.parse(k)}return null})(),D=E?.config?`${E.id}_t`:null,r=E?.config?.tiktokConfig?.TRAFFIC_LISTENER_CONFIG||{},{PARSERS:n=[]}=r;ParserProcessors={XMLHttpRequest:function(E){const D=fetch;fetch=async function(r){let n=r instanceof Request?r.url:r;if("object"==typeof n&&n.href&&(n=n.href),!(k=>{let E=k.replace(/.*\/([gimy]*)$/,"$1"),D=k.replace(new RegExp("^/(.*?)/"+E+"$"),"$1");return new RegExp(D,E)})(E.QUERY).test(n))return D.apply(this,arguments);try{const r=await D.apply(this,arguments);if(r.body instanceof ReadableStream){const D=r.clone(),n=await D.json(),Q=n[E.CONTENT_QUERY],M=x(Q,E.PATHS_CHECK_AD);if(M?.length&&(L(M,E),k)){n[E.CONTENT_QUERY]=Q.filter((k=>!k.isAd));const k=JSON.stringify(n);return new Response(k,{status:r.status,statusText:r.statusText,headers:r.headers})}}return r}catch(k){return D.apply(this,arguments)}}}};const x=(k,E)=>{const D=[];for(let r of k)E.some((k=>k.reduce(((k,E)=>k&&"object"==typeof k?k[E]:k),r)))&&D.push(r);return D},L=(k,E)=>{if(k?.length)for(let n of k){const k=Q(n,r.PROPERTIES_FOR_AD_DATA,E.PATHS_GET_PROPERTIES);k&&M(D,k)}},Q=function(k,E,D){let r={};for(let n of E){const{NAME:E,PATH_NAME:x,IS_NECESSARY:L}=n,Q=D[x];if(r[E]=Q?.length?Q.reduce(((k,E,D)=>{if(D===Q.length-1&&"PATH_TO_PAGE_LINK"===x){return`https://www.tiktok.com/@${k[E]}`}return k&&"object"==typeof k?k?k[E]:null:k??null}),k):null,L&&!r[E])return null}return r},M=(k,E)=>{try{let D={posdMessageId:"PANELOS_MESSAGE",posdHash:(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22),type:"TIKTOK_VIDEO_CANDIDATES",from:k,to:k.substring(0,k.length-2),content:E};window.postMessage(D)}catch(k){}};for(let k of n)k.USE&&ParserProcessors[k.TYPE](k)})();